===================== 
FILE: E:\My Mob Projects\3 Flutter abo hamza\demos\finance_app\lib\main.dart 
===================== 
import 'package:flutter/material.dart';
import 'package:flutter_localizations/flutter_localizations.dart';
import 'package:get/get.dart';
import 'package:google_fonts/google_fonts.dart';
import 'package:intl/date_symbol_data_local.dart';

import 'core/security/simple_encryption.dart';
import 'core/localization/app_translations.dart';
import 'features/expense/presentation/controllers/expense_controller.dart';
import 'features/expense/presentation/controllers/budget_controller.dart';
import 'features/goals/presentation/controllers/goal_controller.dart';
import 'features/alerts/presentation/controllers/alert_controller.dart';
import 'features/backup/presentation/controllers/backup_controller.dart';
import 'features/search/presentation/controllers/expense_search_controller.dart';
import 'features/expense/presentation/pages/home_page.dart';

void main() async {
  WidgetsFlutterBinding.ensureInitialized();

  // print('ğŸš€ Finance App - Starting...');

  try {
    // 1. Initialize Arabic dates
    await initializeDateFormatting('ar_EG', null);
    // print('âœ… Dates initialized');

    // 2. Initialize encryption (with fallback)
    try {
      await SimpleEncryption.initialize();
      final encryptionStatus = SimpleEncryption.status;
      // print('âœ… Encryption ready: $encryptionStatus');
    } catch (e) {
      // print('âš ï¸ Encryption warning: $e - Continuing in fallback mode');
    }

    // 3. Initialize translations (with fallback)
    bool translationsReady = false;
    try {
      await AppTranslations.init();
      translationsReady = true;
      // print('âœ… Translations initialized');

      // Debug: Check translations
      // print('ğŸ” Translation check:');
      // print('   - Arabic keys: ${AppTranslations.translations['ar']?.length ?? 0}');
      // print('   - English keys: ${AppTranslations.translations['en']?.length ?? 0}');
    } catch (e) {
      // print('âš ï¸ Translations init warning: $e');
      // print('âš ï¸ Continuing without translations');
    }

    // 4. Run the app
    runApp(MyApp(translationsReady: translationsReady));

    // print('âœ… App started successfully');
  } catch (e) {
    // } catch (e, stackTrace) {
    // print('âŒ App startup error: $e');
    // print('Stack trace: $stackTrace');
    runApp(const EmergencyApp());
  }
}

class MyApp extends StatelessWidget {
  final bool translationsReady;

  const MyApp({super.key, this.translationsReady = false});

  @override
  Widget build(BuildContext context) {
    // Inject controllers
    Get.put(ExpenseController());
    Get.put(BudgetController());
    Get.put(AlertController());
    Get.put(BackupController());
    Get.put(ExpenseSearchController(), tag: ExpenseSearchController.TAG);
    Get.put(GoalController());

    return GetMaterialApp(
      title: translationsReady ? 'app_title'.tr : 'Ù…Ø§Ù„ÙŠ - Finance App',
      debugShowCheckedModeBanner: false,

      // ============ Language & Localization Settings ============
      translations: translationsReady ? AppTranslations() : null,
      locale: const Locale('ar', 'EG'), // Default language (Arabic)
      fallbackLocale: const Locale('ar', 'EG'), // Fallback language
      localizationsDelegates: const [
        GlobalMaterialLocalizations.delegate,
        GlobalWidgetsLocalizations.delegate,
        GlobalCupertinoLocalizations.delegate,
      ],
      supportedLocales: const [
        Locale('ar', 'EG'), // Arabic - Egypt
        Locale('en', 'US'), // English - USA
      ],
      // GetMaterialApp automatically handles RTL for Arabic, LTR for English
      // ==========================================================

      themeMode: ThemeMode.system,

      // âœ… Light mode:
      theme: ThemeData.light().copyWith(
        primaryColor: const Color(0xFF1565C0),
        colorScheme: ColorScheme.light(
          primary: const Color(0xFF1565C0),
          secondary: const Color(0xFF42A5F5),
          background: Colors.grey[50]!,
          surface: Colors.white,
          onPrimary: Colors.white,
        ),
        textTheme: GoogleFonts.cairoTextTheme(
          ThemeData.light().textTheme,
        ),
        appBarTheme: AppBarTheme(
          backgroundColor: const Color(0xFF1565C0),
          foregroundColor: Colors.white,
          elevation: 4,
          centerTitle: true,
          titleTextStyle: GoogleFonts.cairo(
            fontSize: 18,
            fontWeight: FontWeight.bold,
            color: Colors.white,
          ),
          iconTheme: const IconThemeData(color: Colors.white),
        ),
        inputDecorationTheme: InputDecorationTheme(
          border: OutlineInputBorder(
            borderRadius: BorderRadius.circular(12),
          ),
          enabledBorder: OutlineInputBorder(
            borderRadius: BorderRadius.circular(12),
            borderSide: BorderSide(color: Colors.grey[400]!),
          ),
          focusedBorder: OutlineInputBorder(
            borderRadius: BorderRadius.circular(12),
            borderSide: const BorderSide(color: Color(0xFF1565C0)),
          ),
          filled: true,
          fillColor: Colors.grey[50],
          contentPadding: const EdgeInsets.symmetric(
            horizontal: 16,
            vertical: 14,
          ),
          hintStyle: TextStyle(color: Colors.grey[600]),
          labelStyle: TextStyle(color: Colors.grey[700]),
        ),
        elevatedButtonTheme: ElevatedButtonThemeData(
          style: ElevatedButton.styleFrom(
            backgroundColor: const Color(0xFF1565C0),
            foregroundColor: Colors.white,
            elevation: 4,
            shape: RoundedRectangleBorder(
              borderRadius: BorderRadius.circular(12),
            ),
            padding: const EdgeInsets.symmetric(
              horizontal: 24,
              vertical: 14,
            ),
            textStyle: GoogleFonts.cairo(
              fontSize: 16,
              fontWeight: FontWeight.w600,
            ),
          ),
        ),
      ),

      // âœ… Dark mode:
      darkTheme: ThemeData.dark().copyWith(
        primaryColor: const Color(0xFF0D47A1),
        colorScheme: ColorScheme.dark(
          primary: const Color(0xFF0D47A1),
          secondary: const Color(0xFF64B5F6),
          background: const Color(0xFF121212),
          surface: const Color(0xFF1E1E1E),
          onPrimary: Colors.white,
        ),
        textTheme: GoogleFonts.cairoTextTheme(
          ThemeData.dark().textTheme,
        ),
        appBarTheme: AppBarTheme(
          backgroundColor: const Color(0xFF0D47A1),
          foregroundColor: Colors.white,
          elevation: 4,
          centerTitle: true,
          titleTextStyle: GoogleFonts.cairo(
            fontSize: 18,
            fontWeight: FontWeight.bold,
            color: Colors.white,
          ),
          iconTheme: const IconThemeData(color: Colors.blue),
        ),
        inputDecorationTheme: InputDecorationTheme(
          border: OutlineInputBorder(
            borderRadius: BorderRadius.circular(12),
          ),
          enabledBorder: OutlineInputBorder(
            borderRadius: BorderRadius.circular(12),
            borderSide: BorderSide(color: Colors.grey[700]!),
          ),
          focusedBorder: OutlineInputBorder(
            borderRadius: BorderRadius.circular(12),
            borderSide: const BorderSide(color: Color(0xFF64B5F6)),
          ),
          filled: true,
          fillColor: const Color(0xFF2D2D2D),
          hintStyle: TextStyle(color: Colors.grey[400]),
          labelStyle: TextStyle(color: Colors.grey[300]),
        ),
        elevatedButtonTheme: ElevatedButtonThemeData(
          style: ElevatedButton.styleFrom(
            backgroundColor: const Color(0xFF0D47A1),
            foregroundColor: Colors.white,
            elevation: 4,
            shape: RoundedRectangleBorder(
              borderRadius: BorderRadius.circular(12),
            ),
            padding: const EdgeInsets.symmetric(
              horizontal: 24,
              vertical: 14,
            ),
            textStyle: GoogleFonts.cairo(
              fontSize: 16,
              fontWeight: FontWeight.w600,
            ),
          ),
        ),
      ),

      home: HomePage(),
    );
  }
}

// Emergency Mode (if app fails to start)
class EmergencyApp extends StatelessWidget {
  const EmergencyApp({super.key});

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      home: Scaffold(
        body: Center(
          child: Text('Finance App - Emergency Mode'),
        ),
      ),
    );
  }
}
===================== 
FILE: E:\My Mob Projects\3 Flutter abo hamza\demos\finance_app\lib\core\config\app_config.dart 
===================== 
import 'dart:ui' as ui;

class AppConfig {
  // App Information
  static const String appName = 'Ù…Ø§Ù„ÙŠ';
  static const String appNameEn = 'Finance App';
  static const String version = '1.1.0';
  static const int buildNumber = 1;

  // Localization
  static const ui.Locale defaultLocale = ui.Locale('ar', 'EG');
  static const ui.Locale fallbackLocale = ui.Locale('ar', 'EG');
  static const List<ui.Locale> supportedLocales = [
    ui.Locale('ar', 'EG'),
    ui.Locale('en', 'US'),
  ];

  // Currency
  static const String currencySymbol = 'Ø¬.Ù…';
  static const String currencyCode = 'EGP';
  static const int decimalPlaces = 2;

  // Security
  static const String encryptionKeyStorageKey = 'finance_app_key';
  static const int encryptionKeyLength = 32; // 256-bit for AES

  // Storage Keys
  static const String expensesKey = 'expenses';
  static const String monthlyBudgetKey = 'monthlyBudget';
  static const String categoryBudgetsKey = 'categoryBudgets';
  static const String lastBackupDateKey = 'lastBackupDate';

  // Default Values
  static const double defaultMonthlyBudget = 0.0;
  static const double largeExpenseThreshold = 500.0;
  static const double budgetAlertThreshold = 80.0; // Percentage

  // Date & Time
  static const String dateFormat = 'yyyy/MM/dd';
  static const String dateTimeFormat = 'yyyy/MM/dd HH:mm';
  static const String backupDateFormat = 'yyyyMMdd_HHmmss';

  // File Export
  static const String csvExportPrefix = 'Ù…Ø§Ù„ÙŠ_ØªØµØ¯ÙŠØ±_';
  static const String jsonExportPrefix = 'Ù…Ø§Ù„ÙŠ_ØªØµØ¯ÙŠØ±_';
  static const String backupFilePrefix = 'finance_backup_';

  // UI Constants
  static const double defaultBorderRadius = 12.0;
  static const double defaultPadding = 16.0;
  static const double cardElevation = 2.0;

  // Chart Configuration
  static const int chartMonthsToShow = 6;
  static const double chartBarWidth = 16.0;
  static const int chartMaxAmountDivisions = 5;

  // Search & Filter
  static const double defaultMinAmount = 0.0;
  static const double defaultMaxAmount = 1000000.0;
  static const int searchResultsLimit = 50;

  // Backup & Export
  static const int backupKeepDays = 7;
  static const int maxBackupFiles = 10;

  // Alerts
  static const bool defaultBudgetAlerts = true;
  static const bool defaultLargeExpenseAlerts = true;
  static const bool defaultDailySummary = false;

  // Categories (Arabic)
  static const List<String> expenseCategories = [
    'Ø·Ø¹Ø§Ù…',
    'Ù…ÙˆØ§ØµÙ„Ø§Øª',
    'ØªØ³ÙˆÙ‚',
    'ØªØ±ÙÙŠÙ‡',
    'ØµØ­Ø©',
    'ØªØ¹Ù„ÙŠÙ…',
    'Ø³ÙƒÙ†',
    'ÙÙˆØ§ØªÙŠØ±',
    'Ù…Ø±ØªØ¨',
    'Ø§Ø³ØªØ«Ù…Ø§Ø±',
    'Ù‡Ø¯Ø§ÙŠØ§',
    'Ø£Ø®Ø±Ù‰'
  ];

  static const List<String> budgetCategories = [
    'Ø·Ø¹Ø§Ù…',
    'Ù…ÙˆØ§ØµÙ„Ø§Øª',
    'ØªØ³ÙˆÙ‚',
    'ØªØ±ÙÙŠÙ‡',
    'ØµØ­Ø©',
    'ØªØ¹Ù„ÙŠÙ…',
    'Ø³ÙƒÙ†',
    'ÙÙˆØ§ØªÙŠØ±'
  ];

  // Payment Methods (Arabic)
  static const List<String> paymentMethods = [
    'Ù†Ù‚Ø¯ÙŠ',
    'Ø¨Ø·Ø§Ù‚Ø© Ø§Ø¦ØªÙ…Ø§Ù†',
    'ØªØ­ÙˆÙŠÙ„ Ø¨Ù†ÙƒÙŠ',
    'Ù…Ø­ÙØ¸Ø© Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©',
    'Ø´ÙŠÙƒ'
  ];

  // Theme Colors
  static const Map<String, dynamic> lightThemeColors = {
    'primary': 0xFF2196F3,
    'secondary': 0xFF03A9F4,
    'background': 0xFFFAFAFA,
    'surface': 0xFFFFFFFF,
    'error': 0xFFF44336,
    'success': 0xFF4CAF50,
    'warning': 0xFFFF9800,
    'income': 0xFF4CAF50,
    'expense': 0xFFF44336,
  };

  static const Map<String, dynamic> darkThemeColors = {
    'primary': 0xFF64B5F6,
    'secondary': 0xFF4FC3F7,
    'background': 0xFF121212,
    'surface': 0xFF1E1E1E,
    'error': 0xFFCF6679,
    'success': 0xFF81C784,
    'warning': 0xFFFFB74D,
    'income': 0xFF81C784,
    'expense': 0xFFCF6679,
  };

  // App URLs (Update these for production)
  static const String privacyPolicyUrl = 'https://example.com/privacy';
  static const String termsOfServiceUrl = 'https://example.com/terms';
  static const String supportEmail = 'support@example.com';
  static const String websiteUrl = 'https://example.com';

  // Feature Flags (Enable/Disable features)
  static const bool enableBackup = true;
  static const bool enableExport = true;
  static const bool enableAlerts = true;
  static const bool enableAnalytics = true;
  static const bool enableDarkMode = true;
}
===================== 
FILE: E:\My Mob Projects\3 Flutter abo hamza\demos\finance_app\lib\core\constants\app_colors.dart 
===================== 
import 'package:flutter/material.dart';

class AppColors {
  static const Color primary = Color(0xFF2196F3);
  static const Color secondary = Color(0xFF03A9F4);
  static const Color success = Color(0xFF4CAF50);
  static const Color warning = Color(0xFFFF9800);
  static const Color danger = Color(0xFFF44336);
  static const Color income = Color(0xFF4CAF50);
  static const Color expense = Color(0xFFF44336);
}
===================== 
FILE: E:\My Mob Projects\3 Flutter abo hamza\demos\finance_app\lib\core\constants\app_texts.dart 
===================== 
class AppTexts {
  // General
  static const String appName = 'Ù…Ø§Ù„ÙŠ';
  static const String currency = 'Ø¬.Ù…';

  // Buttons
  static const String save = 'Ø­ÙØ¸';
  static const String cancel = 'Ø¥Ù„ØºØ§Ø¡';
  static const String delete = 'Ø­Ø°Ù';
  static const String edit = 'ØªØ¹Ø¯ÙŠÙ„';

  // Messages
  static const String confirmDelete = 'Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©ØŸ';
  static const String deleteSuccess = 'ØªÙ… Ø§Ù„Ø­Ø°Ù Ø¨Ù†Ø¬Ø§Ø­';
  static const String saveSuccess = 'ØªÙ… Ø§Ù„Ø­ÙØ¸ Ø¨Ù†Ø¬Ø§Ø­';
}
===================== 
FILE: E:\My Mob Projects\3 Flutter abo hamza\demos\finance_app\lib\core\localization\app_translations.dart 
===================== 
import 'dart:convert';
import 'package:flutter/services.dart';
import 'package:get/get.dart';

class AppTranslations extends Translations {
  static Map<String, Map<String, String>> translations = {};

  static Future<void> init() async {
    final en = await rootBundle.loadString('assets/lang/en.json');
    final ar = await rootBundle.loadString('assets/lang/ar.json');

    translations['en'] = Map<String, String>.from(json.decode(en));
    translations['ar'] = Map<String, String>.from(json.decode(ar));
  }

  @override
  Map<String, Map<String, String>> get keys => translations;
}
===================== 
FILE: E:\My Mob Projects\3 Flutter abo hamza\demos\finance_app\lib\core\models\enums.dart 
===================== 
enum ExpenseCategory {
  food('Ø·Ø¹Ø§Ù…'),
  transportation('Ù…ÙˆØ§ØµÙ„Ø§Øª'),
  shopping('ØªØ³ÙˆÙ‚'),
  entertainment('ØªØ±ÙÙŠÙ‡'),
  health('ØµØ­Ø©'),
  education('ØªØ¹Ù„ÙŠÙ…'),
  housing('Ø³ÙƒÙ†'),
  bills('ÙÙˆØ§ØªÙŠØ±'),
  salary('Ù…Ø±ØªØ¨'),
  investment('Ø§Ø³ØªØ«Ù…Ø§Ø±'),
  gifts('Ù‡Ø¯Ø§ÙŠØ§'),
  other('Ø£Ø®Ø±Ù‰');

  final String arabicName;
  const ExpenseCategory(this.arabicName);

  static ExpenseCategory fromString(String name) {
    return ExpenseCategory.values.firstWhere(
      (e) => e.arabicName == name,
      orElse: () => ExpenseCategory.other,
    );
  }
}

enum PaymentMethod {
  cash('Ù†Ù‚Ø¯ÙŠ'),
  creditCard('Ø¨Ø·Ø§Ù‚Ø© Ø§Ø¦ØªÙ…Ø§Ù†'),
  bankTransfer('ØªØ­ÙˆÙŠÙ„ Ø¨Ù†ÙƒÙŠ'),
  wallet('Ù…Ø­ÙØ¸Ø© Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©'),
  check('Ø´ÙŠÙƒ');

  final String arabicName;
  const PaymentMethod(this.arabicName);

  static PaymentMethod fromString(String name) {
    return PaymentMethod.values.firstWhere(
      (e) => e.arabicName == name,
      orElse: () => PaymentMethod.cash,
    );
  }
}
===================== 
FILE: E:\My Mob Projects\3 Flutter abo hamza\demos\finance_app\lib\core\models\goal_entity.dart 
===================== 
// FILE: lib/core/models/goal_entity.dart

import 'dart:ui' as ui;
import 'package:uuid/uuid.dart';

enum GoalPriority { low, medium, high, critical }

class FinancialGoal {
  final String id;
  final String title;
  final String description;
  final double targetAmount;
  double currentAmount;
  final DateTime startDate;
  final DateTime targetDate;
  final String category;
  final GoalPriority priority;
  final String colorHex; // Ù„ÙˆÙ† Ù…Ù…ÙŠØ² Ù„ÙƒÙ„ Ù‡Ø¯Ù
  final bool isCompleted;
  final List<Contribution> contributions;

  FinancialGoal({
    String? id,
    required this.title,
    this.description = '',
    required this.targetAmount,
    this.currentAmount = 0.0,
    DateTime? startDate,
    required this.targetDate,
    this.category = 'Ø¹Ø§Ù…',
    this.priority = GoalPriority.medium,
    this.colorHex = '#4CAF50', // Ø£Ø®Ø¶Ø± Ø§ÙØªØ±Ø§Ø¶ÙŠ
    this.isCompleted = false,
    List<Contribution>? contributions,
  })  : id = id ?? const Uuid().v4(),
        startDate = startDate ?? DateTime.now(),
        contributions = contributions ?? [] {
    assert(targetAmount > 0, 'Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø³ØªÙ‡Ø¯Ù ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ø£ÙƒØ¨Ø± Ù…Ù† ØµÙØ±');
    assert(currentAmount >= 0, 'Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ø­Ø§Ù„ÙŠ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø£Ù† ÙŠÙƒÙˆÙ† Ø³Ø§Ù„Ø¨Ø§Ù‹');
    assert(!targetDate.isBefore(startDate ?? DateTime.now()),
        'ØªØ§Ø±ÙŠØ® Ø§Ù„Ù‡Ø¯Ù Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø£Ù† ÙŠÙƒÙˆÙ† Ù‚Ø¨Ù„ ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨Ø¯Ø¡');
  }

  // Ù†Ø³Ø¨Ø© Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²
  double get progressPercentage {
    if (targetAmount <= 0) return 0.0;
    return (currentAmount / targetAmount * 100).clamp(0.0, 100.0);
  }

  // Ø§Ù„Ø£ÙŠØ§Ù… Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ©
  int get daysRemaining {
    final now = DateTime.now();
    if (targetDate.isBefore(now)) return 0;
    return targetDate.difference(now).inDays;
  }

  // Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ
  double get remainingAmount =>
      (targetAmount - currentAmount).clamp(0.0, double.infinity);

  // Ù…ØªÙˆØ³Ø· Ø§Ù„ØªÙˆÙÙŠØ± Ø§Ù„ÙŠÙˆÙ…ÙŠ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨
  double get requiredDailySaving {
    final days = daysRemaining;
    if (days <= 0) return remainingAmount;
    return remainingAmount / days;
  }

  // Ø¥Ø¶Ø§ÙØ© Ù…Ø³Ø§Ù‡Ù…Ø©
  void addContribution(double amount, String note, DateTime date) {
    if (amount <= 0) throw Exception('Ø§Ù„Ù…Ø¨Ù„Øº ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ø£ÙƒØ¨Ø± Ù…Ù† ØµÙØ±');
    if (isCompleted) throw Exception('Ø§Ù„Ù‡Ø¯Ù Ù…ÙƒØªÙ…Ù„ØŒ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø¥Ø¶Ø§ÙØ© Ù…Ø³Ø§Ù‡Ù…Ø§Øª');

    contributions.add(Contribution(
      amount: amount,
      note: note,
      date: date,
    ));
    currentAmount += amount;

    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§ÙƒØªÙ…Ø§Ù„ Ø§Ù„Ù‡Ø¯Ù
    if (currentAmount >= targetAmount && !isCompleted) {
      // ÙÙŠ Ø§Ù„ÙˆØ§Ù‚Ø¹ØŒ Ø³Ù†Ø­ØªØ§Ø¬ Ù„ØªØ­Ø¯ÙŠØ« isCompleted ÙÙŠ Ø§Ù„Ù…ØªØ­ÙƒÙ…
    }
  }

  // ØªØ­ÙˆÙŠÙ„ Ø¥Ù„Ù‰ Map Ù„Ù„ØªØ®Ø²ÙŠÙ†
  Map<String, dynamic> toMap() {
    return {
      'id': id,
      'title': title,
      'description': description,
      'targetAmount': targetAmount,
      'currentAmount': currentAmount,
      'startDate': startDate.toIso8601String(),
      'targetDate': targetDate.toIso8601String(),
      'category': category,
      'priority': priority.index,
      'colorHex': colorHex,
      'isCompleted': isCompleted,
      'contributions': contributions.map((c) => c.toMap()).toList(),
    };
  }

  // Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù† Map
  factory FinancialGoal.fromMap(Map<String, dynamic> map) {
    try {
      return FinancialGoal(
        id: map['id']?.toString(),
        title: map['title']?.toString() ?? 'Ù‡Ø¯Ù Ø¨Ø¯ÙˆÙ† Ø¹Ù†ÙˆØ§Ù†',
        description: map['description']?.toString() ?? '',
        targetAmount: (map['targetAmount'] as num?)?.toDouble() ?? 0.0,
        currentAmount: (map['currentAmount'] as num?)?.toDouble() ?? 0.0,
        startDate: DateTime.parse(
            map['startDate']?.toString() ?? DateTime.now().toIso8601String()),
        targetDate: DateTime.parse(
            map['targetDate']?.toString() ?? DateTime.now().toIso8601String()),
        category: map['category']?.toString() ?? 'Ø¹Ø§Ù…',
        priority: GoalPriority.values[
            (map['priority'] as num?)?.toInt() ?? GoalPriority.medium.index],
        colorHex: map['colorHex']?.toString() ?? '#4CAF50',
        isCompleted: map['isCompleted'] == true,
        contributions: (map['contributions'] as List<dynamic>?)
                ?.map((item) =>
                    Contribution.fromMap(item as Map<String, dynamic>))
                .toList() ??
            [],
      );
    } catch (e) {
      print('âŒ Error parsing FinancialGoal: $e');
      rethrow;
    }
  }

  // Ù†Ø³Ø®Ø© Ù…Ø¹Ø¯Ù„Ø©
  FinancialGoal copyWith({
    String? id,
    String? title,
    String? description,
    double? targetAmount,
    double? currentAmount,
    DateTime? startDate,
    DateTime? targetDate,
    String? category,
    GoalPriority? priority,
    String? colorHex,
    bool? isCompleted,
    List<Contribution>? contributions,
  }) {
    return FinancialGoal(
      id: id ?? this.id,
      title: title ?? this.title,
      description: description ?? this.description,
      targetAmount: targetAmount ?? this.targetAmount,
      currentAmount: currentAmount ?? this.currentAmount,
      startDate: startDate ?? this.startDate,
      targetDate: targetDate ?? this.targetDate,
      category: category ?? this.category,
      priority: priority ?? this.priority,
      colorHex: colorHex ?? this.colorHex,
      isCompleted: isCompleted ?? this.isCompleted,
      contributions: contributions ?? this.contributions,
    );
  }

  @override
  String toString() {
    return 'FinancialGoal($title: $currentAmount/$targetAmount - ${progressPercentage.toStringAsFixed(1)}%)';
  }
}

// Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ù…Ø³Ø§Ù‡Ù…Ø©
class Contribution {
  final String id;
  final double amount;
  final String note;
  final DateTime date;

  Contribution({
    String? id,
    required this.amount,
    required this.note,
    required this.date,
  }) : id = id ?? const Uuid().v4();

  Map<String, dynamic> toMap() {
    return {
      'id': id,
      'amount': amount,
      'note': note,
      'date': date.toIso8601String(),
    };
  }

  factory Contribution.fromMap(Map<String, dynamic> map) {
    return Contribution(
      id: map['id']?.toString(),
      amount: (map['amount'] as num).toDouble(),
      note: map['note']?.toString() ?? '',
      date: DateTime.parse(
          map['date']?.toString() ?? DateTime.now().toIso8601String()),
    );
  }
}

// ÙØ¦Ø§Øª Ø§Ù„Ø£Ù‡Ø¯Ø§Ù Ø§Ù„Ø´Ø§Ø¦Ø¹Ø©
class GoalCategories {
  static const List<String> commonCategories = [
    'Ø³ÙŠØ§Ø±Ø©',
    'Ø¹Ù…Ø±Ø©',
    'Ø¯Ø±Ø§Ø³Ø©',
    'Ø²ÙˆØ§Ø¬',
    'Ù…Ù†Ø²Ù„',
    'Ø§Ø³ØªØ«Ù…Ø§Ø±',
    'Ø³ÙØ±',
    'Ø·ÙˆØ§Ø±Ø¦',
    'ØªÙ‚Ø§Ø¹Ø¯',
    'Ù‡Ø¯ÙŠØ©',
    'ØµØ­Ø©',
    'ØªØ¹Ù„ÙŠÙ…',
    'Ø£Ø®Ø±Ù‰',
  ];

  static const Map<String, String> categoryIcons = {
    'Ø³ÙŠØ§Ø±Ø©': 'ğŸš—',
    'Ø¹Ù…Ø±Ø©': 'ğŸ•‹',
    'Ø¯Ø±Ø§Ø³Ø©': 'ğŸ“',
    'Ø²ÙˆØ§Ø¬': 'ğŸ’',
    'Ù…Ù†Ø²Ù„': 'ğŸ ',
    'Ø§Ø³ØªØ«Ù…Ø§Ø±': 'ğŸ“ˆ',
    'Ø³ÙØ±': 'âœˆï¸',
    'Ø·ÙˆØ§Ø±Ø¦': 'ğŸš¨',
    'ØªÙ‚Ø§Ø¹Ø¯': 'ğŸ‘´',
    'Ù‡Ø¯ÙŠØ©': 'ğŸ',
    'ØµØ­Ø©': 'ğŸ¥',
    'ØªØ¹Ù„ÙŠÙ…': 'ğŸ“š',
    'Ø£Ø®Ø±Ù‰': 'ğŸ¯',
  };

  static String getIconForCategory(String category) {
    return categoryIcons[category] ?? 'ğŸ¯';
  }
}

// Ø£Ù„ÙˆØ§Ù† Ù…Ø®ØµØµØ© Ù„Ù„Ø£Ù‡Ø¯Ø§Ù
class GoalColors {
  static const List<String> availableColors = [
    '#4CAF50', // Ø£Ø®Ø¶Ø±
    '#2196F3', // Ø£Ø²Ø±Ù‚
    '#FF9800', // Ø¨Ø±ØªÙ‚Ø§Ù„ÙŠ
    '#9C27B0', // Ø¨Ù†ÙØ³Ø¬ÙŠ
    '#F44336', // Ø£Ø­Ù…Ø±
    '#00BCD4', // ØªØ±ÙƒÙˆØ§Ø²
    '#FFC107', // Ø£ØµÙØ±
    '#795548', // Ø¨Ù†ÙŠ
    '#607D8B', // Ø±Ù…Ø§Ø¯ÙŠ Ø£Ø²Ø±Ù‚
    '#E91E63', // ÙˆØ±Ø¯ÙŠ
  ];

  static ui.Color hexToColor(String hex) {
    hex = hex.replaceAll('#', '');
    if (hex.length == 6) {
      hex = 'FF$hex';
    }
    return ui.Color(int.parse(hex, radix: 16));
  }
}
===================== 
FILE: E:\My Mob Projects\3 Flutter abo hamza\demos\finance_app\lib\core\security\secure_storage_production.dart 
===================== 
import 'dart:convert';
import 'dart:math';
import 'dart:typed_data';
import 'package:flutter_secure_storage/flutter_secure_storage.dart';
import 'package:encrypt/encrypt.dart' as encrypt;
import 'package:crypto/crypto.dart';
import 'package:get_storage/get_storage.dart';

/// âœ… Ù†Ø¸Ø§Ù… ØªØ´ÙÙŠØ± Ù…Ø¨Ø³Ø· ÙˆØ¢Ù…Ù† Ù„Ù„Ø¥Ù†ØªØ§Ø¬
class SecureStorageProduction {
  static final FlutterSecureStorage _secureStorage = FlutterSecureStorage();
  static final GetStorage _appStorage = GetStorage();
  static encrypt.Encrypter? _encrypter;
  static bool _initialized = false;

  // ØªØ¹Ø·ÙŠÙ„ Ø§Ù„Ù…Ù†Ø´Ø¦
  SecureStorageProduction._();

  /// âœ… ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù†Ø¸Ø§Ù…
  static Future<void> initialize() async {
    if (_initialized) return;

    try {
      print('ğŸ” Starting encryption system...');

      // 1. ØªÙ‡ÙŠØ¦Ø© GetStorage
      await GetStorage.init();

      // 2. Ø¥Ù†Ø´Ø§Ø¡/Ø¬Ù„Ø¨ Ù…ÙØªØ§Ø­ Ø§Ù„ØªØ´ÙÙŠØ±
      final encryptionKey = await _getOrCreateEncryptionKey();

      // 3. ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù€ Encrypter
      _encrypter = encrypt.Encrypter(encrypt.AES(
        encrypt.Key.fromBase64(encryptionKey),
      ));

      // 4. Ù‡Ø¬Ø±Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©
      await _migrateOldData();

      _initialized = true;
      print('âœ… Encryption system ready (AES-256)');
    } catch (e) {
      print('âš ï¸ Encryption init warning: $e');
      // Ø§Ù„Ø§Ø³ØªÙ…Ø±Ø§Ø± Ø¨Ø¯ÙˆÙ† ØªØ´ÙÙŠØ± ÙƒØ­Ù„ Ø¨Ø¯ÙŠÙ„
      _initialized = true;
    }
  }

  /// âœ… Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù…ÙØªØ§Ø­ Ø§Ù„ØªØ´ÙÙŠØ± Ø£Ùˆ Ø¥Ù†Ø´Ø§Ø¡ ÙˆØ§Ø­Ø¯ Ø¬Ø¯ÙŠØ¯
  static Future<String> _getOrCreateEncryptionKey() async {
    try {
      // Ù…Ø­Ø§ÙˆÙ„Ø© Ø¬Ù„Ø¨ Ø§Ù„Ù…ÙØªØ§Ø­ Ø§Ù„Ù…Ø®Ø²Ù†
      String? storedKey = await _secureStorage.read(key: 'aes_256_key');

      if (storedKey != null && storedKey.length >= 32) {
        return storedKey;
      }

      // Ø¥Ù†Ø´Ø§Ø¡ Ù…ÙØªØ§Ø­ Ø¬Ø¯ÙŠØ¯
      final newKey = _generateEncryptionKey();
      await _secureStorage.write(key: 'aes_256_key', value: newKey);

      return newKey;
    } catch (e) {
      print('âš ï¸ Using fallback encryption key');
      // Ù…ÙØªØ§Ø­ Ø§Ø­ØªÙŠØ§Ø·ÙŠ (ÙŠØ¬Ø¨ ØªØºÙŠÙŠØ±Ù‡ ÙÙŠ Ø§Ù„Ø¥Ù†ØªØ§Ø¬ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ)
      return 'ZmFuYW5jZV9hcHBfc2VjdXJlX2tleQ=='; // base64 Ù„Ù€ "finance_app_secure_key"
    }
  }

  /// âœ… Ø¥Ù†Ø´Ø§Ø¡ Ù…ÙØªØ§Ø­ ØªØ´ÙÙŠØ± Ù‚ÙˆÙŠ
  static String _generateEncryptionKey() {
    final random = Random.secure();
    final bytes = List<int>.generate(32, (_) => random.nextInt(256));

    // Ø§Ø³ØªØ®Ø¯Ø§Ù… SHA-256 Ù„Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ø¹Ø´ÙˆØ§Ø¦ÙŠØ©
    final timestamp = DateTime.now().microsecondsSinceEpoch.toString();
    final combined = Uint8List.fromList([...bytes, ...utf8.encode(timestamp)]);
    final hash = sha256.convert(combined);

    return base64Encode(hash.bytes.sublist(0, 32));
  }

  /// âœ… ØªØ´ÙÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
  static String _encryptData(String plaintext) {
    if (_encrypter == null) {
      throw Exception('Encryption system not ready');
    }

    try {
      // IV Ø¹Ø´ÙˆØ§Ø¦ÙŠ Ù„ÙƒÙ„ Ø¹Ù…Ù„ÙŠØ© ØªØ´ÙÙŠØ±
      final iv = encrypt.IV.fromSecureRandom(16);

      // ØªØ´ÙÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
      final encrypted = _encrypter!.encrypt(plaintext, iv: iv);

      // ØªØ®Ø²ÙŠÙ† IV Ù…Ø¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª (base64)
      return jsonEncode({
        'iv': iv.base64,
        'data': encrypted.base64,
        'v': '1.0', // Ø¥ØµØ¯Ø§Ø± Ø§Ù„ØªØ´ÙÙŠØ±
      });
    } catch (e) {
      print('âŒ Encryption failed: $e');
      throw Exception('ÙØ´Ù„ ÙÙŠ ØªØ´ÙÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');
    }
  }

  /// âœ… ÙÙƒ ØªØ´ÙÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
  static String _decryptData(String encryptedJson) {
    if (_encrypter == null) {
      throw Exception('Encryption system not ready');
    }

    try {
      final data = jsonDecode(encryptedJson) as Map<String, dynamic>;

      final iv = encrypt.IV.fromBase64(data['iv'] as String);
      final encrypted = encrypt.Encrypted.fromBase64(data['data'] as String);

      return _encrypter!.decrypt(encrypted, iv: iv);
    } catch (e) {
      print('âŒ Decryption failed: $e');
      throw Exception('ÙØ´Ù„ ÙÙŠ ÙÙƒ ØªØ´ÙÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');
    }
  }

  /// âœ… ÙƒØªØ§Ø¨Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø´ÙØ±Ø©
  static Future<void> writeEncrypted(String key, dynamic data) async {
    if (!_initialized) {
      await initialize();
    }

    try {
      String jsonData;

      if (data is Map || data is List) {
        jsonData = jsonEncode(data);
      } else if (data is String) {
        jsonData = data;
      } else {
        jsonData = jsonEncode(data);
      }

      // ØªØ´ÙÙŠØ± Ø«Ù… ØªØ®Ø²ÙŠÙ†
      final encrypted = _encryptData(jsonData);
      await _appStorage.write(key, encrypted);
    } catch (e) {
      print('âš ï¸ Writing unencrypted data for key: $key');
      // ØªØ®Ø²ÙŠÙ† ØºÙŠØ± Ù…Ø´ÙØ± ÙƒØ­Ù„ Ø¨Ø¯ÙŠÙ„
      await _appStorage.write(key, data);
    }
  }

  /// âœ… Ù‚Ø±Ø§Ø¡Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø´ÙØ±Ø©
  static dynamic readEncrypted(String key) {
    if (!_initialized) {
      throw Exception('Storage not initialized');
    }

    try {
      final data = _appStorage.read(key);

      if (data == null) return null;

      // Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø´ÙØ±Ø© (ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ JSON Ù…Ø¹ iv Ùˆ data)
      if (data is String && data.contains('"iv"') && data.contains('"data"')) {
        final decrypted = _decryptData(data);
        return jsonDecode(decrypted);
      }

      // Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø¨ÙŠØ§Ù†Ø§Øª Ù‚Ø¯ÙŠÙ…Ø© ØºÙŠØ± Ù…Ø´ÙØ±Ø©
      return data;
    } catch (e) {
      print('âš ï¸ Error reading key $key: $e');
      return _appStorage.read(key); // Ø¥Ø±Ø¬Ø§Ø¹ ØºÙŠØ± Ù…Ø´ÙØ±
    }
  }

  /// âœ… Ø­Ø°Ù Ø¨ÙŠØ§Ù†Ø§Øª
  static Future<void> remove(String key) async {
    try {
      await _appStorage.remove(key);
    } catch (e) {
      print('âš ï¸ Error removing key $key: $e');
    }
  }

  /// âœ… Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
  static Future<void> erase() async {
    try {
      await _appStorage.erase();
      await _secureStorage.delete(key: 'aes_256_key');
      print('âœ… All data cleared');
    } catch (e) {
      print('âš ï¸ Error clearing data: $e');
    }
  }

  /// âœ… Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø¨ÙŠØ§Ù†Ø§Øª
  static bool hasData(String key) {
    return _appStorage.hasData(key);
  }

  /// âœ… Ù‡Ø¬Ø±Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©
  static Future<void> _migrateOldData() async {
    try {
      final migrationKeys = ['expenses', 'monthlyBudget', 'categoryBudgets'];

      for (final key in migrationKeys) {
        final oldData = _appStorage.read(key);

        if (oldData != null) {
          print('ğŸ”„ Migrating $key...');
          await writeEncrypted(key, oldData);
          print('âœ… $key migrated');
        }
      }
    } catch (e) {
      print('âš ï¸ Migration error: $e');
    }
  }

  /// âœ… Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø­Ø§Ù„Ø© Ø§Ù„Ù†Ø¸Ø§Ù…
  static Future<Map<String, dynamic>> getStatus() async {
    final hasKey = await _secureStorage.containsKey(key: 'aes_256_key');

    return {
      'initialized': _initialized,
      'encryptionActive': _encrypter != null,
      'hasEncryptionKey': hasKey,
      'algorithm': _encrypter != null ? 'AES-256-CBC' : 'None',
      'storageProvider': 'GetStorage + FlutterSecureStorage',
      'keysCount': _appStorage.getKeys().length,
    };
  }
}
===================== 
FILE: E:\My Mob Projects\3 Flutter abo hamza\demos\finance_app\lib\core\security\security_check.dart 
===================== 
import 'package:flutter/material.dart';
import 'secure_storage_production.dart';

/// âœ… ÙØ­Øµ Ø£Ù…Ù†ÙŠ Ø³Ø±ÙŠØ¹ Ø¹Ù†Ø¯ Ø¨Ø¯Ø¡ Ø§Ù„ØªØ´ØºÙŠÙ„
class SecurityCheck {
  static Future<bool> performSecurityCheck() async {
    try {
      print('ğŸ” Performing security check...');

      // 1. ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø£Ù…Ù†ÙŠ
      await SecureStorageProduction.initialize();

      // 2. Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø­Ø§Ù„Ø© Ø§Ù„ØªØ´ÙÙŠØ±
      final status = await SecureStorageProduction.getStatus();

      print('ğŸ“Š Security Status:');
      print('   - Initialized: ${status['initialized']}');
      print('   - Encryption: ${status['encryptionActive']}');
      print('   - Has Key: ${status['hasEncryptionKey']}');
      print('   - Algorithm: ${status['algorithm']}');
      print('   - Keys Count: ${status['keysCount']}');

      // 3. Ø§Ø®ØªØ¨Ø§Ø± ØªØ´ÙÙŠØ± ÙˆÙÙƒ ØªØ´ÙÙŠØ± Ø¨Ø³ÙŠØ·
      final testData = {
        'test': 'security_check',
        'timestamp': DateTime.now().toString()
      };
      await SecureStorageProduction.writeEncrypted('_security_test', testData);
      final retrieved = SecureStorageProduction.readEncrypted('_security_test');

      if (retrieved != null && retrieved['test'] == 'security_check') {
        print('âœ… Security check passed');
        return true;
      } else {
        print('âš ï¸ Security check warning (fallback mode)');
        return true; // Ù†Ø³ØªÙ…Ø± Ù…Ø¹ ÙˆØ¶Ø¹ Ø§Ù„Ø·ÙˆØ§Ø±Ø¦
      }
    } catch (e, stackTrace) {
      print('âŒ Security check failed: $e');
      print('Stack trace: $stackTrace');

      // ÙÙŠ Ø­Ø§Ù„Ø© Ø§Ù„ÙØ´Ù„ØŒ Ù†Ø³ØªÙ…Ø± Ù…Ø¹ ÙˆØ¶Ø¹ ØºÙŠØ± Ø¢Ù…Ù†
      return false;
    }
  }

  /// âœ… Ø¹Ø±Ø¶ ØªÙ†Ø¨ÙŠÙ‡ Ø£Ù…Ù†ÙŠ Ø¥Ø°Ø§ Ù„Ø²Ù… Ø§Ù„Ø£Ù…Ø±
  static void showSecurityAlert(BuildContext context, {bool isSecure = true}) {
    if (!isSecure) {
      WidgetsBinding.instance.addPostFrameCallback((_) {
        showDialog(
          context: context,
          barrierDismissible: false,
          builder: (context) => AlertDialog(
            title: const Row(
              children: [
                Icon(Icons.warning, color: Colors.orange),
                SizedBox(width: 10),
                Text('ØªØ­Ø°ÙŠØ± Ø£Ù…Ù†ÙŠ'),
              ],
            ),
            content: const Text(
              'Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ´ÙÙŠØ± ØºÙŠØ± Ù†Ø´Ø·. '
              'Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø³ØªÙƒÙˆÙ† Ù…Ø®Ø²Ù†Ø© Ø¨Ø¯ÙˆÙ† ØªØ´ÙÙŠØ±. '
              'Ù‡Ø°Ø§ Ù…Ù‚Ø¨ÙˆÙ„ Ù„Ù„ØªØ·ÙˆÙŠØ± Ù„ÙƒÙ† Ù„ÙŠØ³ Ù„Ù„Ø¥Ù†ØªØ§Ø¬.',
            ),
            actions: [
              TextButton(
                onPressed: () => Navigator.pop(context),
                child: const Text('Ù…ØªØ§Ø¨Ø¹Ø©'),
              ),
            ],
          ),
        );
      });
    }
  }
}
===================== 
FILE: E:\My Mob Projects\3 Flutter abo hamza\demos\finance_app\lib\core\security\simple_encryption.dart 
===================== 
import 'dart:convert';
import 'dart:math';
import 'dart:typed_data';
import 'package:flutter_secure_storage/flutter_secure_storage.dart';
import 'package:encrypt/encrypt.dart' as encrypt;
import 'package:get_storage/get_storage.dart';

/// âœ… Ù†Ø¸Ø§Ù… ØªØ´ÙÙŠØ± Ù…Ø¨Ø³Ø· ÙˆØ¢Ù…Ù†
class SimpleEncryption {
  static final FlutterSecureStorage _secureStorage = FlutterSecureStorage();
  static final GetStorage _appStorage = GetStorage();
  static encrypt.Encrypter? _encrypter;
  static bool _initialized = false;
  static bool _initializing = false;

  /// âœ… ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù†Ø¸Ø§Ù… (Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø© ÙÙ‚Ø·)
  static Future<void> initialize() async {
    if (_initialized || _initializing) return;
    _initializing = true;

    try {
      // print('ğŸ” ØªÙ‡ÙŠØ¦Ø© Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ´ÙÙŠØ±...');

      // Important: initialize GetStorage
      await GetStorage.init();

      final key = await _getEncryptionKey();
      _encrypter = encrypt.Encrypter(encrypt.AES(key));
      _initialized = true;
      _initializing = false;

      // print('âœ… Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ´ÙÙŠØ± Ø¬Ø§Ù‡Ø² (AES-256)');
    } catch (e) {
      _initializing = false;
      // print('âš ï¸ Ø®Ø·Ø£ ÙÙŠ ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØªØ´ÙÙŠØ±: $e');
      _initialized = true; // Ù†Ø³ØªÙ…Ø± Ø¨Ø¯ÙˆÙ† ØªØ´ÙÙŠØ±
    }
  }

  /// âœ… Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù…ÙØªØ§Ø­ Ø§Ù„ØªØ´ÙÙŠØ±
  static Future<encrypt.Key> _getEncryptionKey() async {
    try {
      final storedKey = await _secureStorage.read(key: 'finance_app_key');

      if (storedKey != null && storedKey.isNotEmpty) {
        return encrypt.Key.fromBase64(storedKey);
      }

      final newKey = _generateKey();
      await _secureStorage.write(
        key: 'finance_app_key',
        value: newKey.base64,
      );

      return newKey;
    } catch (e) {
      // print('âš ï¸ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù…ÙØªØ§Ø­ Ø§Ø­ØªÙŠØ§Ø·ÙŠ');
      return _generateKey();
    }
  }

  /// âœ… Ø¥Ù†Ø´Ø§Ø¡ Ù…ÙØªØ§Ø­
  static encrypt.Key _generateKey() {
    final random = Random.secure();
    final bytes = Uint8List(32);

    for (int i = 0; i < bytes.length; i++) {
      bytes[i] = random.nextInt(256);
    }

    return encrypt.Key(bytes);
  }

  /// âœ… ÙƒØªØ§Ø¨Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø´ÙØ±Ø©
  static Future<void> write(String key, dynamic data) async {
    if (!_initialized) {
      await initialize();
    }

    try {
      final jsonString = jsonEncode(data);
      final encrypted = _encrypt(jsonString);
      await _appStorage.write(key, encrypted);
    } catch (e) {
      // ØªØ®Ø²ÙŠÙ† Ø¨Ø¯ÙˆÙ† ØªØ´ÙÙŠØ±
      await _appStorage.write(key, data);
    }
  }

  /// âœ… Ù‚Ø±Ø§Ø¡Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø´ÙØ±Ø©
  static dynamic read(String key) {
    try {
      final data = _appStorage.read(key);
      if (data == null) return null;

      if (data is String && data.startsWith('{"iv":')) {
        final decrypted = _decrypt(data);
        return jsonDecode(decrypted);
      }

      return data;
    } catch (e) {
      return _appStorage.read(key);
    }
  }

  /// âœ… Ø­Ø°Ù Ø¨ÙŠØ§Ù†Ø§Øª
  static Future<void> remove(String key) async {
    try {
      await _appStorage.remove(key);
      // print('âœ… ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…ÙØªØ§Ø­: $key');
    } catch (e) {
      // print('âš ï¸ Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…ÙØªØ§Ø­ $key: $e');
      rethrow;
    }
  }

  /// âœ… Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
  static Future<void> clearAll() async {
    try {
      await _appStorage.erase();
      await _secureStorage.delete(key: 'finance_app_key');
      _encrypter = null;
      _initialized = false;
      // print('âœ… ØªÙ… Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');
    } catch (e) {
      // print('âš ï¸ Ø®Ø·Ø£ ÙÙŠ Ù…Ø³Ø­ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª: $e');
    }
  }

  /// âœ… Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø¨ÙŠØ§Ù†Ø§Øª
  static bool has(String key) {
    return _appStorage.hasData(key);
  }

  /// âœ… ØªØ´ÙÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
  static String _encrypt(String plaintext) {
    if (_encrypter == null) return plaintext;

    try {
      final iv = encrypt.IV.fromSecureRandom(16);
      final encrypted = _encrypter!.encrypt(plaintext, iv: iv);

      return jsonEncode({
        'iv': iv.base64,
        'data': encrypted.base64,
        'v': '1.0',
      });
    } catch (e) {
      // print('âš ï¸ ÙØ´Ù„ Ø§Ù„ØªØ´ÙÙŠØ±: $e');
      return plaintext;
    }
  }

  /// âœ… ÙÙƒ Ø§Ù„ØªØ´ÙÙŠØ±
  static String _decrypt(String encryptedJson) {
    if (_encrypter == null) return encryptedJson;

    try {
      final map = jsonDecode(encryptedJson) as Map<String, dynamic>;
      final iv = encrypt.IV.fromBase64(map['iv']);
      final encrypted = encrypt.Encrypted.fromBase64(map['data']);
      return _encrypter!.decrypt(encrypted, iv: iv);
    } catch (e) {
      // print('âš ï¸ ÙØ´Ù„ ÙÙƒ Ø§Ù„ØªØ´ÙÙŠØ±: $e');
      return encryptedJson;
    }
  }

  /// âœ… Ø­Ø§Ù„Ø© Ø§Ù„Ù†Ø¸Ø§Ù…
  static String get status =>
      _encrypter != null ? 'Encryption Active' : 'Encryption Inactive';
}
===================== 
FILE: E:\My Mob Projects\3 Flutter abo hamza\demos\finance_app\lib\core\utils\error_handler.dart 
===================== 
import 'dart:async'; //  for  TimeoutException
import 'package:flutter/material.dart';
import 'package:get/get.dart';

// Remove the Logger import for now  :
// import 'package:logger/logger.dart';

class ErrorHandler {
  static bool _isShowingDialog = false;

  // Simple logging methods until we add the logger package
  static void _log(String level, String message,
      {dynamic error, dynamic stackTrace}) {
    final timestamp = DateTime.now().toIso8601String();
    print('[$timestamp] [$level] $message');
    if (error != null) {
      print('Error: $error');
    }
    if (stackTrace != null) {
      print('Stack trace: $stackTrace');
    }
  }

  static void showError(String message, {String title = 'Ø®Ø·Ø£'}) {
    try {
      // Close any existing snackbars
      if (Get.isSnackbarOpen == true) {
        Get.back();
      }

      _log('ERROR', '$title - $message');

      Get.snackbar(
        title,
        message,
        snackPosition: SnackPosition.BOTTOM,
        duration: const Duration(seconds: 4),
        backgroundColor: Colors.red[100],
        colorText: Colors.red[900],
        icon: const Icon(Icons.error, color: Colors.red),
        shouldIconPulse: true,
        margin: const EdgeInsets.all(10),
        borderRadius: 8,
        animationDuration: const Duration(milliseconds: 300),
        mainButton: TextButton(
          onPressed: () => Get.back(),
          child: const Text('Ø¥ØºÙ„Ø§Ù‚', style: TextStyle(color: Colors.red)),
        ),
        onTap: (_) => Get.back(),
      );
    } catch (e) {
      _log('ERROR', 'Failed to show error snackbar: $e');
      // Fallback to console
      print('ERROR: $title - $message');
    }
  }

  static void showSuccess(String message, {String title = 'Ù†Ø¬Ø§Ø­'}) {
    try {
      if (Get.isSnackbarOpen == true) {
        Get.back();
      }

      _log('INFO', '$title - $message');

      Get.snackbar(
        title,
        message,
        snackPosition: SnackPosition.BOTTOM,
        duration: const Duration(seconds: 3),
        backgroundColor: Colors.green[100],
        colorText: Colors.green[900],
        icon: const Icon(Icons.check_circle, color: Colors.green),
        margin: const EdgeInsets.all(10),
        borderRadius: 8,
        animationDuration: const Duration(milliseconds: 300),
        onTap: (_) => Get.back(),
      );
    } catch (e) {
      _log('ERROR', 'Failed to show success snackbar: $e');
      print('SUCCESS: $title - $message');
    }
  }

  static void showWarning(String message, {String title = 'ØªØ­Ø°ÙŠØ±'}) {
    try {
      if (Get.isSnackbarOpen == true) {
        Get.back();
      }

      _log('WARNING', '$title - $message');

      Get.snackbar(
        title,
        message,
        snackPosition: SnackPosition.BOTTOM,
        duration: const Duration(seconds: 4),
        backgroundColor: Colors.orange[100],
        colorText: Colors.orange[900],
        icon: const Icon(Icons.warning, color: Colors.orange),
        margin: const EdgeInsets.all(10),
        borderRadius: 8,
        animationDuration: const Duration(milliseconds: 300),
        onTap: (_) => Get.back(),
      );
    } catch (e) {
      _log('ERROR', 'Failed to show warning snackbar: $e');
      print('WARNING: $title - $message');
    }
  }

  static Future<bool> showConfirmationDialog({
    required String title,
    required String message,
    String confirmText = 'Ù†Ø¹Ù…',
    String cancelText = 'Ù„Ø§',
    Color confirmColor = Colors.red,
    bool barrierDismissible = false,
  }) async {
    if (_isShowingDialog) return false;

    _isShowingDialog = true;
    _log('DEBUG', 'Showing confirmation dialog: $title');

    try {
      final result = await Get.dialog<bool>(
        WillPopScope(
          onWillPop: () async {
            _isShowingDialog = false;
            return barrierDismissible;
          },
          child: AlertDialog(
            title: Text(title,
                style: const TextStyle(fontWeight: FontWeight.bold)),
            content: SingleChildScrollView(
              child: Text(message),
            ),
            actions: [
              TextButton(
                onPressed: () {
                  _isShowingDialog = false;
                  Get.back(result: false);
                },
                child: Text(cancelText,
                    style: const TextStyle(fontSize: 16, color: Colors.grey)),
              ),
              ElevatedButton(
                onPressed: () {
                  _isShowingDialog = false;
                  Get.back(result: true);
                },
                style: ElevatedButton.styleFrom(
                  backgroundColor: confirmColor,
                  foregroundColor: Colors.white,
                  padding:
                      const EdgeInsets.symmetric(horizontal: 24, vertical: 12),
                ),
                child: Text(confirmText, style: const TextStyle(fontSize: 16)),
              ),
            ],
            shape:
                RoundedRectangleBorder(borderRadius: BorderRadius.circular(12)),
          ),
        ),
        barrierDismissible: barrierDismissible,
      );

      final bool finalResult = result ?? false;
      _log('DEBUG', 'Confirmation dialog result: $finalResult');
      return finalResult;
    } catch (e) {
      _isShowingDialog = false;
      _log('ERROR', 'Failed to show confirmation dialog: $e');
      return false;
    }
  }

  static void handleApiError(dynamic error, {String? context}) {
    String errorMessage = 'Ø­Ø¯Ø« Ø®Ø·Ø£ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹';

    if (error is String) {
      errorMessage = error;
    } else if (error is FormatException) {
      errorMessage = 'Ø®Ø·Ø£ ÙÙŠ ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª';
    } else if (error is TimeoutException) {
      errorMessage = 'Ø§Ù†ØªÙ‡Øª Ù…Ù‡Ù„Ø© Ø§Ù„Ø§ØªØµØ§Ù„';
    } else if (error is Exception) {
      errorMessage = error.toString();
    }

    _log('ERROR', 'API Error${context != null ? " in $context" : ""}: $error');
    showError(errorMessage);
  }

  static void showLoading({String message = 'Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...'}) {
    try {
      if (Get.isDialogOpen != true) {
        _log('DEBUG', 'Showing loading dialog: $message');

        Get.dialog(
          WillPopScope(
            onWillPop: () async => false,
            child: Dialog(
              backgroundColor: Colors.transparent,
              elevation: 0,
              child: Center(
                child: Container(
                  padding: const EdgeInsets.all(20),
                  decoration: BoxDecoration(
                    color: Colors.white,
                    borderRadius: BorderRadius.circular(12),
                  ),
                  child: Column(
                    mainAxisSize: MainAxisSize.min,
                    children: [
                      const CircularProgressIndicator(),
                      const SizedBox(height: 16),
                      Text(message),
                    ],
                  ),
                ),
              ),
            ),
          ),
          barrierDismissible: false,
        );
      }
    } catch (e) {
      _log('ERROR', 'Failed to show loading dialog: $e');
    }
  }

  static void hideLoading() {
    try {
      if (Get.isDialogOpen == true) {
        _log('DEBUG', 'Hiding loading dialog');
        Get.back();
      }
    } catch (e) {
      _log('ERROR', 'Failed to hide loading dialog: $e');
    }
  }

  static void logInfo(String message, {String? tag}) {
    _log('INFO', '${tag != null ? '[$tag] ' : ''}$message');
  }

  static void logWarning(String message, {String? tag}) {
    _log('WARNING', '${tag != null ? '[$tag] ' : ''}$message');
  }

  static void logError(String message,
      {String? tag, dynamic error, dynamic stackTrace}) {
    _log('ERROR', '${tag != null ? '[$tag] ' : ''}$message',
        error: error, stackTrace: stackTrace);
  }

  static void logDebug(String message, {String? tag}) {
    _log('DEBUG', '${tag != null ? '[$tag] ' : ''}$message');
  }
}
===================== 
FILE: E:\My Mob Projects\3 Flutter abo hamza\demos\finance_app\lib\features\alerts\presentation\controllers\alert_controller.dart 
===================== 
// lib/features/alerts/presentation/controllers/alert_controller.dart

import 'package:flutter/material.dart';
import 'package:get/get.dart';
import 'package:get_storage/get_storage.dart';

class AlertController extends GetxController {
  final _storage = GetStorage();

  // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª
  final budgetAlertsEnabled = true.obs;
  final largeExpenseAlertsEnabled = true.obs;
  final dailySummaryEnabled = false.obs;

  // Ø¹ØªØ¨Ø§Øª Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª
  final budgetAlertThreshold = 80.0.obs; // Ù†Ø³Ø¨Ø© Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ©
  final largeExpenseThreshold = 500.0.obs; // Ù…Ø¨Ù„Øº ÙƒØ¨ÙŠØ±

  @override
  void onInit() {
    super.onInit();
    loadAlertSettings();
  }

  void loadAlertSettings() {
    budgetAlertsEnabled.value = _storage.read('budgetAlerts') ?? true;
    largeExpenseAlertsEnabled.value =
        _storage.read('largeExpenseAlerts') ?? true;
    dailySummaryEnabled.value = _storage.read('dailySummary') ?? false;
    budgetAlertThreshold.value = _storage.read('budgetThreshold') ?? 80.0;
    largeExpenseThreshold.value =
        _storage.read('largeExpenseThreshold') ?? 500.0;
  }

  Future<void> saveAlertSettings() async {
    await _storage.write('budgetAlerts', budgetAlertsEnabled.value);
    await _storage.write('largeExpenseAlerts', largeExpenseAlertsEnabled.value);
    await _storage.write('dailySummary', dailySummaryEnabled.value);
    await _storage.write('budgetThreshold', budgetAlertThreshold.value);
    await _storage.write('largeExpenseThreshold', largeExpenseThreshold.value);
  }

  // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ø¹Ù†Ø¯ Ø¥Ø¶Ø§ÙØ© Ù…Ø¹Ø§Ù…Ù„Ø©
  void checkExpenseAlerts(double amount, String category, bool isIncome) {
    // âœ… Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø£Ù† Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø© Ù„ÙŠØ³Øª Ø¯Ø®Ù„
    if (isIncome) return;

    if (largeExpenseAlertsEnabled.value &&
        amount >= largeExpenseThreshold.value) {
      showLargeExpenseAlert(amount, category);
    }
  }

  void showLargeExpenseAlert(double amount, String category) {
    Get.snackbar(
      'Ù…ØµØ±ÙˆÙ ÙƒØ¨ÙŠØ±! ğŸ’¸',
      'Ù„Ù‚Ø¯ Ø£Ù†ÙÙ‚Øª $amount Ø¬.Ù… Ø¹Ù„Ù‰ $category',
      snackPosition: SnackPosition.BOTTOM,
      duration: const Duration(seconds: 3),
      backgroundColor: Colors.orange[100],
      colorText: Colors.orange[900],
    );
  }

  // ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ©
  void checkBudgetAlerts(double spentPercentage, double remainingBudget) {
    if (!budgetAlertsEnabled.value) return;

    if (spentPercentage >= budgetAlertThreshold.value) {
      showBudgetAlert(spentPercentage, remainingBudget);
    }

    if (remainingBudget < 0) {
      showBudgetExceededAlert(remainingBudget.abs());
    }
  }

  void showBudgetAlert(double percentage, double remaining) {
    Get.snackbar(
      'ØªÙ†Ø¨ÙŠÙ‡ Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ© âš ï¸',
      'Ù„Ù‚Ø¯ Ø£Ù†ÙÙ‚Øª ${percentage.toStringAsFixed(1)}% Ù…Ù† Ù…ÙŠØ²Ø§Ù†ÙŠØªÙƒ\nØ§Ù„Ù…ØªØ¨Ù‚ÙŠ: ${remaining.toStringAsFixed(2)} Ø¬.Ù…',
      snackPosition: SnackPosition.BOTTOM,
      duration: const Duration(seconds: 4),
      backgroundColor: Colors.orange[100],
      colorText: Colors.orange[900],
    );
  }

  void showBudgetExceededAlert(double exceededAmount) {
    Get.snackbar(
      'ØªØ¬Ø§ÙˆØ² Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ©! ğŸš¨',
      'Ù„Ù‚Ø¯ ØªØ¬Ø§ÙˆØ²Øª Ù…ÙŠØ²Ø§Ù†ÙŠØªÙƒ Ø¨Ù…Ù‚Ø¯Ø§Ø± ${exceededAmount.toStringAsFixed(2)} Ø¬.Ù…',
      snackPosition: SnackPosition.BOTTOM,
      duration: const Duration(seconds: 5),
      backgroundColor: Colors.red[100],
      colorText: Colors.red[900],
    );
  }

  // Ù…Ù„Ø®Øµ ÙŠÙˆÙ…ÙŠ
  void showDailySummary(double dailyIncome, double dailyExpense) {
    if (!dailySummaryEnabled.value) return;

    Get.defaultDialog(
      title: 'Ù…Ù„Ø®Øµ Ø§Ù„ÙŠÙˆÙ… ğŸ“Š',
      middleText: 'Ø§Ù„Ø¯Ø®Ù„: ${dailyIncome.toStringAsFixed(2)} Ø¬.Ù…\n'
          'Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª: ${dailyExpense.toStringAsFixed(2)} Ø¬.Ù…\n'
          'Ø§Ù„ØµØ§ÙÙŠ: ${(dailyIncome - dailyExpense).toStringAsFixed(2)} Ø¬.Ù…',
      textConfirm: 'Ø­Ø³Ù†Ø§Ù‹',
      onConfirm: Get.back,
    );
  }
}
===================== 
FILE: E:\My Mob Projects\3 Flutter abo hamza\demos\finance_app\lib\features\alerts\presentation\pages\alerts_settings_page.dart 
===================== 
// lib/features/alerts/presentation/pages/alerts_settings_page.dart

import 'package:flutter/material.dart';
import 'package:get/get.dart';
import '../controllers/alert_controller.dart';

class AlertsSettingsPage extends StatelessWidget {
  AlertsSettingsPage({super.key});
  final AlertController _controller = Get.find();

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title:
            Text('alerts'.tr), // âœ… Changed from const Text('Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª')
        centerTitle: true,
      ),
      body: SingleChildScrollView(
        padding: const EdgeInsets.all(20),
        child: Column(
          crossAxisAlignment: CrossAxisAlignment.start,
          children: [
            // ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ©
            Card(
              child: Padding(
                padding: const EdgeInsets.all(16),
                child: Column(
                  crossAxisAlignment: CrossAxisAlignment.start,
                  children: [
                    Row(
                      children: [
                        const Icon(Icons.account_balance_wallet,
                            color: Colors.orange),
                        const SizedBox(width: 12),
                        Expanded(
                          child: Text(
                            'budget_alerts'
                                .tr, // âœ… Changed from 'ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ©'
                            style: const TextStyle(
                              fontSize: 16,
                              fontWeight: FontWeight.bold,
                            ),
                          ),
                        ),
                        Obx(() => Switch(
                              value: _controller.budgetAlertsEnabled.value,
                              onChanged: (value) {
                                _controller.budgetAlertsEnabled.value = value;
                                _controller.saveAlertSettings();
                              },
                            )),
                      ],
                    ),
                    const SizedBox(height: 12),
                    Obx(() => Column(
                          children: [
                            Text(
                              'budget_alert_threshold'.trParams({
                                // âœ… Changed with parameter
                                'value': _controller.budgetAlertThreshold.value
                                    .toInt()
                                    .toString()
                              }),
                              style: const TextStyle(color: Colors.grey),
                            ),
                            Slider(
                              value: _controller.budgetAlertThreshold.value,
                              min: 50,
                              max: 100,
                              divisions: 10,
                              label:
                                  '${_controller.budgetAlertThreshold.value.toInt()}%',
                              onChanged: _controller.budgetAlertsEnabled.value
                                  ? (value) {
                                      _controller.budgetAlertThreshold.value =
                                          value;
                                      _controller.saveAlertSettings();
                                    }
                                  : null,
                            ),
                          ],
                        )),
                  ],
                ),
              ),
            ),

            const SizedBox(height: 16),

            // ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª Ø§Ù„ÙƒØ¨ÙŠØ±Ø©
            Card(
              child: Padding(
                padding: const EdgeInsets.all(16),
                child: Column(
                  crossAxisAlignment: CrossAxisAlignment.start,
                  children: [
                    Row(
                      children: [
                        const Icon(Icons.warning, color: Colors.red),
                        const SizedBox(width: 12),
                        Expanded(
                          child: Text(
                            'large_expense_alert'
                                .tr, // âœ… Changed from 'ØªÙ†Ø¨ÙŠÙ‡ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª Ø§Ù„ÙƒØ¨ÙŠØ±Ø©'
                            style: const TextStyle(
                              fontSize: 16,
                              fontWeight: FontWeight.bold,
                            ),
                          ),
                        ),
                        Obx(() => Switch(
                              value:
                                  _controller.largeExpenseAlertsEnabled.value,
                              onChanged: (value) {
                                _controller.largeExpenseAlertsEnabled.value =
                                    value;
                                _controller.saveAlertSettings();
                              },
                            )),
                      ],
                    ),
                    const SizedBox(height: 12),
                    Obx(() => Column(
                          children: [
                            Text(
                              'large_expense_alert_threshold'.trParams({
                                // âœ… Changed with parameters
                                'value': _controller.largeExpenseThreshold.value
                                    .toInt()
                                    .toString(),
                                'currency': 'currency_suffix'.tr
                              }),
                              style: const TextStyle(color: Colors.grey),
                            ),
                            Slider(
                              value: _controller.largeExpenseThreshold.value,
                              min: 100,
                              max: 2000,
                              divisions: 19,
                              label:
                                  '${_controller.largeExpenseThreshold.value.toInt()} ${'currency_suffix'.tr}', // âœ… Added currency
                              onChanged: _controller
                                      .largeExpenseAlertsEnabled.value
                                  ? (value) {
                                      _controller.largeExpenseThreshold.value =
                                          value;
                                      _controller.saveAlertSettings();
                                    }
                                  : null,
                            ),
                          ],
                        )),
                  ],
                ),
              ),
            ),

            const SizedBox(height: 16),

            // Ù…Ù„Ø®Øµ ÙŠÙˆÙ…ÙŠ
            Card(
              child: Padding(
                padding: const EdgeInsets.all(16),
                child: Row(
                  children: [
                    const Icon(Icons.summarize, color: Colors.blue),
                    const SizedBox(width: 12),
                    Expanded(
                      child: Column(
                        crossAxisAlignment: CrossAxisAlignment.start,
                        children: [
                          Text(
                            'daily_summary'.tr, // âœ… Changed from 'Ù…Ù„Ø®Øµ ÙŠÙˆÙ…ÙŠ'
                            style: const TextStyle(
                              fontSize: 16,
                              fontWeight: FontWeight.bold,
                            ),
                          ),
                          Text(
                            'daily_summary_desc'
                                .tr, // âœ… Changed from 'Ø¹Ø±Ø¶ Ù…Ù„Ø®Øµ ÙŠÙˆÙ…ÙŠ Ù„Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª ÙˆØ§Ù„Ù…ØµØ±ÙˆÙØ§Øª'
                            style: const TextStyle(
                                fontSize: 12, color: Colors.grey),
                          ),
                        ],
                      ),
                    ),
                    Obx(() => Switch(
                          value: _controller.dailySummaryEnabled.value,
                          onChanged: (value) {
                            _controller.dailySummaryEnabled.value = value;
                            _controller.saveAlertSettings();
                          },
                        )),
                  ],
                ),
              ),
            ),

            const SizedBox(height: 32),

            // Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª
            Center(
              child: ElevatedButton.icon(
                onPressed: () {
                  _controller.showLargeExpenseAlert(600, 'ØªØ³ÙˆÙ‚');
                },
                icon: const Icon(Icons.notifications_active),
                label:
                    Text('test_alerts'.tr), // âœ… Changed from 'Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª'
                style: ElevatedButton.styleFrom(
                  backgroundColor: Colors.orange,
                  foregroundColor: Colors.white,
                ),
              ),
            ),
          ],
        ),
      ),
    );
  }
}
===================== 
FILE: E:\My Mob Projects\3 Flutter abo hamza\demos\finance_app\lib\features\backup\presentation\controllers\backup_controller.dart 
===================== 
// lib/features/backup/presentation/controllers/backup_controller.dart

import 'dart:convert';
import 'dart:io';
import 'package:flutter/material.dart';
import 'package:get/get.dart';
import 'package:get_storage/get_storage.dart';
import 'package:intl/intl.dart';
import 'package:path_provider/path_provider.dart';
import 'package:share_plus/share_plus.dart';
import 'package:file_picker/file_picker.dart';

// Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ù…ØªØ­ÙƒÙ…Ø§Øª Ø§Ù„Ø£Ø®Ø±Ù‰
import 'package:finance_app/features/expense/presentation/controllers/expense_controller.dart';
import 'package:finance_app/features/expense/presentation/controllers/budget_controller.dart';
import 'package:finance_app/features/alerts/presentation/controllers/alert_controller.dart';
import 'package:finance_app/features/search/presentation/controllers/expense_search_controller.dart';

class BackupController extends GetxController {
  final GetStorage _storage = GetStorage();
  final RxBool isLoading = false.obs;
  final Rx<DateTime?> lastBackupDate = Rx<DateTime?>(null);

  @override
  void onInit() {
    super.onInit();
    loadLastBackupDate();
  }

  // ØªØ­Ù…ÙŠÙ„ ØªØ§Ø±ÙŠØ® Ø¢Ø®Ø± Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©
  void loadLastBackupDate() {
    final dateStr = _storage.read('lastBackupDate');
    if (dateStr != null) {
      lastBackupDate.value = DateTime.parse(dateStr);
    }
  }

  // 1. Ø¥Ù†Ø´Ø§Ø¡ Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© ÙƒØ§Ù…Ù„Ø©
  Future<void> createBackup() async {
    isLoading.value = true;

    try {
      // Ø¬Ù…Ø¹ ÙƒÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
      final Map<String, dynamic> backupData = {
        'appName': 'Finance App',
        'version': '1.0.0',
        'backupDate': DateTime.now().toIso8601String(),
        'data': {
          'expenses': _storage.read('expenses') ?? [],
          'monthlyBudget': _storage.read('monthlyBudget'),
          'categoryBudgets': _storage.read('categoryBudgets'),
          'budgetAlerts': _storage.read('budgetAlerts'),
          'largeExpenseAlerts': _storage.read('largeExpenseAlerts'),
          'dailySummary': _storage.read('dailySummary'),
          'budgetThreshold': _storage.read('budgetThreshold'),
          'largeExpenseThreshold': _storage.read('largeExpenseThreshold'),
        },
      };

      // ØªØ­ÙˆÙŠÙ„ Ø¥Ù„Ù‰ JSON
      final jsonData = jsonEncode(backupData);

      // Ø­ÙØ¸ ÙÙŠ Ù…Ù„Ù
      final directory = await getApplicationDocumentsDirectory();
      final timestamp = DateFormat('yyyyMMdd_HHmmss').format(DateTime.now());
      final file = File('${directory.path}/finance_backup_$timestamp.json');
      await file.writeAsString(jsonData);

      // ØªØ­Ø¯ÙŠØ« ØªØ§Ø±ÙŠØ® Ø¢Ø®Ø± Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©
      lastBackupDate.value = DateTime.now();
      await _storage.write('lastBackupDate', DateTime.now().toIso8601String());

      Get.snackbar(
        'âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©',
        'ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­',
        snackPosition: SnackPosition.BOTTOM,
        backgroundColor: Colors.green[100],
        colorText: Colors.green[900],
      );

      // Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ù…Ù„Ù
      await _shareBackupFile(file);
    } catch (e, stackTrace) {
      print('âŒ Backup error: $e');
      print('Stack trace: $stackTrace');

      Get.snackbar(
        'âŒ Ø®Ø·Ø£',
        'ÙØ´Ù„ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©: ${e.toString()}',
        snackPosition: SnackPosition.BOTTOM,
        backgroundColor: Colors.red[100],
        colorText: Colors.red[900],
      );
    } finally {
      isLoading.value = false;
    }
  }

  // 2. Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©
  Future<void> restoreBackup() async {
    try {
      // Ø§Ø®ØªÙŠØ§Ø± Ù…Ù„Ù Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©
      FilePickerResult? result = await FilePicker.platform.pickFiles(
        type: FileType.custom,
        allowedExtensions: ['json'],
        allowMultiple: false,
      );

      if (result == null || result.files.isEmpty) {
        return; // Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø£Ù„ØºÙ‰ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©
      }

      PlatformFile file = result.files.first;
      final filePath = file.path;

      if (filePath == null) {
        throw Exception('Ù…Ø³Ø§Ø± Ù…Ù„Ù ØºÙŠØ± ØµØ§Ù„Ø­');
      }

      isLoading.value = true;

      // Ù‚Ø±Ø§Ø¡Ø© ÙˆØªØ­Ù„ÙŠÙ„ Ù…Ù„Ù Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©
      final backupFile = File(filePath);
      final jsonData = await backupFile.readAsString();
      final backupData = jsonDecode(jsonData);

      // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ù…Ù„Ù Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©
      if (backupData['appName'] != 'Finance App') {
        throw Exception(
            'Ù…Ù„Ù Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© ØºÙŠØ± ØµØ§Ù„Ø­: Ù„ÙŠØ³ Ù…Ù„Ù ØªØ·Ø¨ÙŠÙ‚ Finance App');
      }

      // Ø¹Ø±Ø¶ Ù†Ø§ÙØ°Ø© ØªØ£ÙƒÙŠØ¯
      final bool proceed = await Get.dialog<bool>(
            AlertDialog(
              title: const Row(
                children: [
                  Icon(Icons.warning, color: Colors.orange),
                  SizedBox(width: 8),
                  Text('âš ï¸ Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©'),
                ],
              ),
              content: Column(
                mainAxisSize: MainAxisSize.min,
                crossAxisAlignment: CrossAxisAlignment.start,
                children: [
                  Text('Ø§Ù„ØªØ·Ø¨ÙŠÙ‚: ${backupData['appName']}'),
                  Text('Ø§Ù„Ø¥ØµØ¯Ø§Ø±: ${backupData['version']}'),
                  Text(
                      'ØªØ§Ø±ÙŠØ® Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©: ${DateFormat('yyyy/MM/dd HH:mm').format(DateTime.parse(backupData['backupDate']))}'),
                  const SizedBox(height: 16),
                  const Text(
                    'âš ï¸ Ø³ÙŠØªÙ… Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ© Ø¨Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©!',
                    style: TextStyle(
                        color: Colors.red, fontWeight: FontWeight.bold),
                  ),
                  const SizedBox(height: 8),
                  const Text(
                    'Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡.',
                    style: TextStyle(color: Colors.grey),
                  ),
                ],
              ),
              actions: [
                TextButton(
                  onPressed: () => Get.back(result: false),
                  child: const Text('Ø¥Ù„ØºØ§Ø¡'),
                ),
                ElevatedButton(
                  onPressed: () => Get.back(result: true),
                  style: ElevatedButton.styleFrom(backgroundColor: Colors.red),
                  child: const Text('Ø§Ø³ØªØ¹Ø§Ø¯Ø©'),
                ),
              ],
            ),
          ) ??
          false;

      if (!proceed) {
        isLoading.value = false;
        return;
      }

      // ØªÙ†ÙÙŠØ° Ø§Ù„Ø§Ø³ØªØ¹Ø§Ø¯Ø©
      await _performRestore(backupData['data']);

      Get.snackbar(
        'âœ… ØªÙ…Øª Ø§Ù„Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø¨Ù†Ø¬Ø§Ø­',
        'ØªÙ… Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­',
        snackPosition: SnackPosition.BOTTOM,
        backgroundColor: Colors.green[100],
        colorText: Colors.green[900],
      );
    } catch (e, stackTrace) {
      print('âŒ Restore error: $e');
      print('Stack trace: $stackTrace');

      Get.snackbar(
        'âŒ ÙØ´Ù„Øª Ø§Ù„Ø§Ø³ØªØ¹Ø§Ø¯Ø©',
        'Ø®Ø·Ø£: ${e.toString()}',
        snackPosition: SnackPosition.BOTTOM,
        backgroundColor: Colors.red[100],
        colorText: Colors.red[900],
      );
    } finally {
      isLoading.value = false;
    }
  }

  // 3. ØªÙ†ÙÙŠØ° Ø§Ù„Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ù„ÙØ¹Ù„ÙŠØ©
  Future<void> _performRestore(Map<String, dynamic> backupData) async {
    try {
      // Ù…Ø³Ø­ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ© Ø£ÙˆÙ„Ø§Ù‹
      await _storage.erase();

      // Ø§Ø³ØªØ¹Ø§Ø¯Ø© ÙƒÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
      await _storage.write('expenses', backupData['expenses'] ?? []);
      await _storage.write('monthlyBudget', backupData['monthlyBudget']);
      await _storage.write('categoryBudgets', backupData['categoryBudgets']);
      await _storage.write('budgetAlerts', backupData['budgetAlerts']);
      await _storage.write(
          'largeExpenseAlerts', backupData['largeExpenseAlerts']);
      await _storage.write('dailySummary', backupData['dailySummary']);
      await _storage.write('budgetThreshold', backupData['budgetThreshold']);
      await _storage.write(
          'largeExpenseThreshold', backupData['largeExpenseThreshold']);

      // ØªØ­Ø¯ÙŠØ« ØªØ§Ø±ÙŠØ® Ø¢Ø®Ø± Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©
      lastBackupDate.value = DateTime.now();
      await _storage.write('lastBackupDate', DateTime.now().toIso8601String());

      // Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ ÙƒÙ„ Ø§Ù„Ù…ØªØ­ÙƒÙ…Ø§Øª
      await _reloadAllControllers();
    } catch (e) {
      rethrow;
    }
  }

  // 4. Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ ÙƒÙ„ Ø§Ù„Ù…ØªØ­ÙƒÙ…Ø§Øª Ø¨Ø¹Ø¯ Ø§Ù„Ø§Ø³ØªØ¹Ø§Ø¯Ø©
  Future<void> _reloadAllControllers() async {
    try {
      // Expense Controller
      if (Get.isRegistered<ExpenseController>()) {
        final expenseController = Get.find<ExpenseController>();
        expenseController.loadExpenses();
      }

      // Budget Controller
      if (Get.isRegistered<BudgetController>()) {
        final budgetController = Get.find<BudgetController>();
        budgetController.loadBudgetData();
      }

      // Alert Controller
      if (Get.isRegistered<AlertController>()) {
        final alertController = Get.find<AlertController>();
        alertController.loadAlertSettings();
      }

      // Search Controller
      if (Get.isRegistered<ExpenseSearchController>()) {
        final searchController = Get.find<ExpenseSearchController>();
        searchController.resetFilters();
      }
    } catch (e) {
      print('Error reloading controllers: $e');
    }
  }

  // 5. Ù…Ø´Ø§Ø±ÙƒØ© Ù…Ù„Ù Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©
  Future<void> _shareBackupFile(File file) async {
    try {
      await Share.shareXFiles(
        [XFile(file.path)],
        text:
            'Finance App Backup - ${DateFormat('yyyy/MM/dd HH:mm').format(DateTime.now())}',
      );
    } catch (e) {
      print('Share error: $e');
    }
  }

  // 6. ØªØµØ¯ÙŠØ± ØªÙ‚Ø±ÙŠØ± Ù†ØµÙŠ - Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ù…ØµØ­Ø­Ø©
  Future<void> exportSimpleBackup() async {
    isLoading.value = true;

    try {
      // Ø§Ø³ØªØ®Ø¯Ø§Ù… ExpenseController Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø¨Ø§Ø´Ø±Ø©
      final expenseController = Get.find<ExpenseController>();
      final expenses = expenseController.expensesAsMap;

      if (expenses.isEmpty) {
        Get.snackbar(
          'âš ï¸ Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª',
          'Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ù„ØªØµØ¯ÙŠØ±Ù‡Ø§',
          snackPosition: SnackPosition.BOTTOM,
          backgroundColor: Colors.orange[100],
          colorText: Colors.orange[900],
        );
        isLoading.value = false;
        return;
      }

      // Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­
      double totalIncome = 0;
      double totalExpense = 0;
      final Map<String, double> categoryTotals = {};

      for (var expense in expenses) {
        final amount = (expense['amount'] as num).toDouble();
        final isIncome = expense['isIncome'] == true;
        final category = expense['category']?.toString() ?? 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ';

        if (isIncome) {
          totalIncome += amount;
        } else {
          totalExpense += amount;

          // Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ù„ÙƒÙ„ ÙØ¦Ø©
          categoryTotals.update(
            category,
            (value) => value + amount,
            ifAbsent: () => amount,
          );
        }
      }

      // Ø¨Ù†Ø§Ø¡ Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø¨Ø´ÙƒÙ„ Ù…Ù†Ø³Ù‚
      final report = '''
ğŸ“Š ØªÙ‚Ø±ÙŠØ± Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù…Ø§Ù„ÙŠ
ğŸ“… ØªØ§Ø±ÙŠØ® Ø§Ù„ØªÙ‚Ø±ÙŠØ±: ${_formatDateTime(DateTime.now())}

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“ˆ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø¹Ø§Ù…Ø©:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
â€¢ Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª: ${expenses.length}
â€¢ Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¯Ø®Ù„: ${totalIncome.toStringAsFixed(2)} Ø¬.Ù…
â€¢ Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª: ${totalExpense.toStringAsFixed(2)} Ø¬.Ù…
â€¢ Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„ØµØ§ÙÙŠ: ${(totalIncome - totalExpense).toStringAsFixed(2)} Ø¬.Ù…

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“Š ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª Ø­Ø³Ø¨ Ø§Ù„ÙØ¦Ø©:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
${_buildCategoryReport(categoryTotals, totalExpense)}

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“ Ø¢Ø®Ø± 5 Ù…Ø¹Ø§Ù…Ù„Ø§Øª:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
${_buildRecentTransactions(expenses, limit: 5)}

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ’¾ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
â€¢ Ø¢Ø®Ø± Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©: ${lastBackupDate.value != null ? _formatDateTime(lastBackupDate.value!) : 'Ù„Ù… ÙŠØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ù†Ø³Ø® Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©'}
â€¢ Ø­Ø¬Ù… Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª: ${expenses.length} Ù…Ø¹Ø§Ù…Ù„Ø©
â€¢ ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡: ${_formatDateTime(DateTime.now())}
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
''';

      // Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„ØªÙ‚Ø±ÙŠØ±
      await Share.share(
        report,
        subject: 'ØªÙ‚Ø±ÙŠØ± Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù…Ø§Ù„ÙŠ - ${_formatDate(DateTime.now())}',
      );

      Get.snackbar(
        'âœ… ØªÙ… Ø§Ù„ØªØµØ¯ÙŠØ± Ø¨Ù†Ø¬Ø§Ø­',
        'ØªÙ… Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ù†ØµÙŠ',
        snackPosition: SnackPosition.BOTTOM,
        duration: const Duration(seconds: 2),
        backgroundColor: Colors.green[100],
        colorText: Colors.green[900],
      );
    } catch (e, stackTrace) {
      print('âŒ Error in exportSimpleBackup: $e');
      print('Stack trace: $stackTrace');

      Get.snackbar(
        'âŒ ÙØ´Ù„ ÙÙŠ Ø§Ù„ØªØµØ¯ÙŠØ±',
        'Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØªÙ‚Ø±ÙŠØ±',
        snackPosition: SnackPosition.BOTTOM,
        duration: const Duration(seconds: 4),
        backgroundColor: Colors.red[100],
        colorText: Colors.red[900],
      );
    } finally {
      isLoading.value = false;
    }
  }

  // Ø¯Ø§Ù„Ø© Ù…Ø³Ø§Ø¹Ø¯Ø© Ù„Ø¨Ù†Ø§Ø¡ ØªÙ‚Ø±ÙŠØ± Ø§Ù„ÙØ¦Ø§Øª
  String _buildCategoryReport(
      Map<String, double> categories, double totalExpense) {
    if (categories.isEmpty) {
      return 'â€¢ Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…ØµØ±ÙˆÙØ§Øª Ù…ØµÙ†ÙØ©\n';
    }

    final sortedCategories = categories.entries.toList()
      ..sort((a, b) => b.value.compareTo(a.value));

    String report = '';
    for (var entry in sortedCategories) {
      final percentage =
          totalExpense > 0 ? (entry.value / totalExpense * 100) : 0;

      report +=
          'â€¢ ${entry.key}: ${entry.value.toStringAsFixed(2)} Ø¬.Ù… (${percentage.toStringAsFixed(1)}%)\n';
    }

    return report;
  }

  // Ø¯Ø§Ù„Ø© Ù…Ø³Ø§Ø¹Ø¯Ø© Ù„Ø¨Ù†Ø§Ø¡ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ø§Ù„Ø­Ø¯ÙŠØ«Ø©
  // Ø¯Ø§Ù„Ø© Ù…Ø³Ø§Ø¹Ø¯Ø© Ù„Ø¨Ù†Ø§Ø¡ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ø§Ù„Ø­Ø¯ÙŠØ«Ø© - Ø§Ù„Ø¥ØµØ¯Ø§Ø± Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ
  String _buildRecentTransactions(List<Map<String, dynamic>> expenses,
      {int limit = 5}) {
    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ÙØ§Ø±ØºØ©
    if (expenses.isEmpty) {
      return 'â€¢ Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ø­Ø¯ÙŠØ«Ø©\n';
    }

    // Ù†Ø³Ø® Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© ÙˆØªØ±ØªÙŠØ¨Ù‡Ø§ Ø­Ø³Ø¨ Ø§Ù„ØªØ§Ø±ÙŠØ® (Ø§Ù„Ø£Ø­Ø¯Ø« Ø£ÙˆÙ„Ø§Ù‹)
    final recent = List<Map<String, dynamic>>.from(expenses);

    recent.sort((a, b) {
      try {
        final dateStrA = a['date']?.toString();
        final dateStrB = b['date']?.toString();

        if (dateStrA == null || dateStrB == null) return 0;

        final dateA = DateTime.parse(dateStrA);
        final dateB = DateTime.parse(dateStrB);

        return dateB.compareTo(dateA); // Ø§Ù„Ø£Ø­Ø¯Ø« Ø£ÙˆÙ„Ø§Ù‹
      } catch (e) {
        return 0; // ÙÙŠ Ø­Ø§Ù„Ø© Ø§Ù„Ø®Ø·Ø£ØŒ Ù„Ø§ ØªØºÙŠÙŠØ± ÙÙŠ Ø§Ù„ØªØ±ØªÙŠØ¨
      }
    });

    // Ø£Ø®Ø° Ø§Ù„Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ ÙÙ‚Ø·
    final limitedList = recent.take(limit).toList();

    if (limitedList.isEmpty) {
      return 'â€¢ Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ø­Ø¯ÙŠØ«Ø©\n';
    }

    // Ø¨Ù†Ø§Ø¡ Ø§Ù„ØªÙ‚Ø±ÙŠØ±
    final buffer = StringBuffer();

    for (var expense in limitedList) {
      try {
        final dateStr = expense['date']?.toString();
        if (dateStr == null) continue;

        final date = DateTime.parse(dateStr);
        final formattedDate = _formatDate(date);
        final isIncome = expense['isIncome'] == true;
        final amount = (expense['amount'] as num).toDouble();
        final category = expense['category']?.toString() ?? 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ';
        final description = expense['description']?.toString() ?? '';

        buffer.write('â€¢ $formattedDate: ');
        buffer.write(isIncome ? 'â¬‡ï¸' : 'â¬†ï¸');
        buffer.write(' ${amount.toStringAsFixed(2)} Ø¬.Ù… ($category)');

        if (description.isNotEmpty) {
          buffer.write(' - $description');
        }

        buffer.writeln();
      } catch (e) {
        // ØªØ®Ø·ÙŠ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª ØºÙŠØ± Ø§Ù„ØµØ§Ù„Ø­Ø©
        print('âš ï¸ ØªØ®Ø·ÙŠ Ù…Ø¹Ø§Ù…Ù„Ø© ØºÙŠØ± ØµØ§Ù„Ø­Ø©: $e');
        continue;
      }
    }

    return buffer.toString();
  }

  // Ø¯Ø§Ù„Ø© Ù…Ø³Ø§Ø¹Ø¯Ø© Ù„ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„ØªØ§Ø±ÙŠØ®
  String _formatDate(DateTime date) {
    try {
      return DateFormat('yyyy/MM/dd').format(date);
    } catch (e) {
      return 'ØªØ§Ø±ÙŠØ® ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ';
    }
  }

  // Ø¯Ø§Ù„Ø© Ù…Ø³Ø§Ø¹Ø¯Ø© Ù„ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„ØªØ§Ø±ÙŠØ® ÙˆØ§Ù„ÙˆÙ‚Øª
  String _formatDateTime(DateTime date) {
    try {
      return DateFormat('yyyy/MM/dd HH:mm').format(date);
    } catch (e) {
      return 'ØªØ§Ø±ÙŠØ® ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ';
    }
  }

  // 7. Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ
  String get backupInfo {
    if (lastBackupDate.value == null) {
      return 'Ù„Ù… ÙŠØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ù†Ø³Ø® Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©';
    }

    final diff = DateTime.now().difference(lastBackupDate.value!);

    if (diff.inDays > 0) {
      return 'Ø¢Ø®Ø± Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©: Ù…Ù†Ø° ${diff.inDays} ÙŠÙˆÙ…';
    } else if (diff.inHours > 0) {
      return 'Ø¢Ø®Ø± Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©: Ù…Ù†Ø° ${diff.inHours} Ø³Ø§Ø¹Ø©';
    } else if (diff.inMinutes > 0) {
      return 'Ø¢Ø®Ø± Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©: Ù…Ù†Ø° ${diff.inMinutes} Ø¯Ù‚ÙŠÙ‚Ø©';
    } else {
      return 'Ø¢Ø®Ø± Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©: Ø§Ù„Ø¢Ù†';
    }
  }

  // 8. Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¹Ø¯Ø¯ Ù…Ù„ÙØ§Øª Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ
  Future<int> getBackupFileCount() async {
    try {
      final directory = await getApplicationDocumentsDirectory();
      final files = Directory(directory.path)
          .listSync()
          .where((entity) => entity.path.endsWith('.json'))
          .where((entity) => entity is File)
          .length;
      return files;
    } catch (e) {
      return 0;
    }
  }

  // 9. Ù…Ø³Ø­ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ
  Future<void> clearBackupData() async {
    try {
      final confirmed = await Get.dialog<bool>(
        AlertDialog(
          title: const Text('Ù…Ø³Ø­ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ'),
          content:
              const Text('Ù‡Ù„ ØªØ±ÙŠØ¯ Ù…Ø³Ø­ ÙƒÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©ØŸ'),
          actions: [
            TextButton(
              onPressed: () => Get.back(result: false),
              child: const Text('Ø¥Ù„ØºØ§Ø¡'),
            ),
            ElevatedButton(
              onPressed: () => Get.back(result: true),
              style: ElevatedButton.styleFrom(backgroundColor: Colors.red),
              child: const Text('Ù…Ø³Ø­'),
            ),
          ],
        ),
      );

      if (confirmed == true) {
        await _storage.remove('lastBackupDate');
        lastBackupDate.value = null;
        Get.snackbar(
          'ØªÙ… Ø§Ù„Ù…Ø³Ø­',
          'ØªÙ… Ù…Ø³Ø­ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ',
        );
      }
    } catch (e) {
      Get.snackbar('Ø®Ø·Ø£', 'ÙØ´Ù„ ÙÙŠ Ù…Ø³Ø­ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');
    }
  }
}
===================== 
FILE: E:\My Mob Projects\3 Flutter abo hamza\demos\finance_app\lib\features\backup\presentation\pages\backup_page.dart 
===================== 
// lib/features/backup/presentation/pages/backup_page.dart

import 'package:flutter/material.dart';
import 'package:get/get.dart';
import 'package:intl/intl.dart';
import '../controllers/backup_controller.dart';

class BackupPage extends StatelessWidget {
  BackupPage({super.key});
  final BackupController _controller = Get.find();

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text(
            'backup'.tr), // âœ… Changed from const Text('budget'.tr) - was wrong!
        centerTitle: true,
      ),
      body: SafeArea(
        child: SingleChildScrollView(
          padding: const EdgeInsets.all(20),
          child: Column(
            crossAxisAlignment: CrossAxisAlignment.start,
            children: [
              // Ø¨Ø·Ø§Ù‚Ø© Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ
              Card(
                elevation: 4,
                shape: RoundedRectangleBorder(
                  borderRadius: BorderRadius.circular(16),
                ),
                child: Padding(
                  padding: const EdgeInsets.all(16),
                  child: Column(
                    children: [
                      const Icon(Icons.backup, size: 64, color: Colors.blue),
                      const SizedBox(height: 16),
                      Obx(() => Text(
                            _controller.backupInfo,
                            style: const TextStyle(
                              fontSize: 16,
                              fontWeight: FontWeight.bold,
                              color: Colors.blue,
                            ),
                            textAlign: TextAlign.center,
                          )),
                      const SizedBox(height: 8),
                      Obx(() {
                        if (_controller.lastBackupDate.value != null) {
                          return Text(
                            DateFormat('yyyy/MM/dd HH:mm')
                                .format(_controller.lastBackupDate.value!),
                            style: const TextStyle(color: Colors.grey),
                          );
                        }
                        return const SizedBox();
                      }),
                    ],
                  ),
                ),
              ),

              const SizedBox(height: 24),

              // Ø¹Ù†ÙˆØ§Ù† Ù‚Ø³Ù… Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª
              Text(
                'actions'.tr, // âœ… Added new key
                style: const TextStyle(
                  fontSize: 18,
                  fontWeight: FontWeight.bold,
                ),
              ),
              const SizedBox(height: 12),

              // 1. Ø¥Ù†Ø´Ø§Ø¡ Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© ÙƒØ§Ù…Ù„Ø©
              Card(
                elevation: 2,
                shape: RoundedRectangleBorder(
                  borderRadius: BorderRadius.circular(12),
                ),
                child: ListTile(
                  leading: const Icon(Icons.save, color: Colors.green),
                  title: Text('create_backup'
                      .tr), // âœ… Changed from 'Ø¥Ù†Ø´Ø§Ø¡ Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© ÙƒØ§Ù…Ù„Ø©'
                  subtitle: Text('save_copy'
                      .tr), // âœ… Changed from 'Ø­ÙØ¸ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙÙŠ Ù…Ù„Ù'
                  trailing: Obx(() => _controller.isLoading.value
                      ? const SizedBox(
                          width: 20,
                          height: 20,
                          child: CircularProgressIndicator(strokeWidth: 2),
                        )
                      : const Icon(Icons.chevron_right)),
                  onTap: _controller.createBackup,
                ),
              ),

              const SizedBox(height: 8),

              // 2. Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©
              Card(
                elevation: 2,
                shape: RoundedRectangleBorder(
                  borderRadius: BorderRadius.circular(12),
                ),
                child: ListTile(
                  leading: const Icon(Icons.restore, color: Colors.orange),
                  title: Text('restore'
                      .tr), // âœ… Changed from 'Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©'
                  subtitle: Text('restore_backup_desc'.tr), // âœ… Added new key
                  trailing: Obx(() => _controller.isLoading.value
                      ? const SizedBox(
                          width: 20,
                          height: 20,
                          child: CircularProgressIndicator(strokeWidth: 2),
                        )
                      : const Icon(Icons.chevron_right)),
                  onTap: _controller.restoreBackup,
                ),
              ),

              const SizedBox(height: 8),

              // 3. ØªØµØ¯ÙŠØ± ØªÙ‚Ø±ÙŠØ± Ù†ØµÙŠ
              Card(
                elevation: 2,
                shape: RoundedRectangleBorder(
                  borderRadius: BorderRadius.circular(12),
                ),
                child: ListTile(
                  leading: const Icon(Icons.description, color: Colors.blue),
                  title: Text(
                      'export_data'.tr), // âœ… Changed from 'ØªØµØ¯ÙŠØ± ØªÙ‚Ø±ÙŠØ± Ù†ØµÙŠ'
                  subtitle: Text(
                      'save_copy'.tr), // âœ… Changed from 'Ù…Ø´Ø§Ø±ÙƒØ© Ù…Ù„Ø®Øµ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª'
                  trailing: Obx(() => _controller.isLoading.value
                      ? const SizedBox(
                          width: 20,
                          height: 20,
                          child: CircularProgressIndicator(strokeWidth: 2),
                        )
                      : const Icon(Icons.chevron_right)),
                  onTap: _controller.exportSimpleBackup,
                ),
              ),

              const SizedBox(height: 24),

              // Ù‚Ø³Ù… Ø§Ù„Ù†ØµØ§Ø¦Ø­ Ø§Ù„Ù…Ù‡Ù…Ø©
              Text(
                'important_tips'.tr, // âœ… Added new key
                style: const TextStyle(
                  fontSize: 18,
                  fontWeight: FontWeight.bold,
                ),
              ),
              const SizedBox(height: 12),

              Card(
                elevation: 2,
                shape: RoundedRectangleBorder(
                  borderRadius: BorderRadius.circular(12),
                ),
                child: Padding(
                  padding: EdgeInsets.all(16),
                  child: Column(
                    crossAxisAlignment: CrossAxisAlignment.start,
                    children: [
                      TipsRow(
                        icon: Icons.schedule,
                        text: 'tip_weekly_backup'.tr, // âœ… Added new key
                      ),
                      SizedBox(height: 8),
                      TipsRow(
                        icon: Icons.folder,
                        text: 'tip_save_location'.tr, // âœ… Added new key
                      ),
                      SizedBox(height: 8),
                      TipsRow(
                        icon: Icons.security,
                        text: 'tip_dont_share'.tr, // âœ… Added new key
                      ),
                      SizedBox(height: 8),
                      TipsRow(
                        icon: Icons.devices,
                        text: 'tip_cross_device'.tr, // âœ… Added new key
                      ),
                    ],
                  ),
                ),
              ),

              const SizedBox(height: 24),

              // Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø¥Ø¶Ø§ÙÙŠØ©
              FutureBuilder<int>(
                future: _controller.getBackupFileCount(),
                builder: (context, snapshot) {
                  if (snapshot.connectionState == ConnectionState.waiting) {
                    return const Center(child: CircularProgressIndicator());
                  }

                  final fileCount = snapshot.data ?? 0;

                  return Card(
                    elevation: 2,
                    shape: RoundedRectangleBorder(
                      borderRadius: BorderRadius.circular(12),
                    ),
                    child: Padding(
                      padding: const EdgeInsets.all(16),
                      child: Column(
                        children: [
                          Row(
                            children: [
                              Icon(Icons.analytics, color: Colors.purple),
                              SizedBox(width: 8),
                              Text(
                                'backup_stats'.tr, // âœ… Added new key
                                style: TextStyle(
                                  fontSize: 16,
                                  fontWeight: FontWeight.bold,
                                ),
                              ),
                            ],
                          ),
                          const SizedBox(height: 12),
                          Row(
                            mainAxisAlignment: MainAxisAlignment.spaceAround,
                            children: [
                              _buildStatItem(
                                'backup_files'.tr, // âœ… Added new key
                                fileCount.toString(),
                                Icons.folder,
                                Colors.blue,
                              ),
                              Obx(() => _buildStatItem(
                                    'last_backup'.tr, // âœ… Added new key
                                    _controller.lastBackupDate.value != null
                                        ? DateFormat('MM/dd').format(
                                            _controller.lastBackupDate.value!)
                                        : '--',
                                    Icons.calendar_today,
                                    Colors.green,
                                  )),
                            ],
                          ),
                        ],
                      ),
                    ),
                  );
                },
              ),

              const SizedBox(height: 24),

              // Ù…Ù„Ø§Ø­Ø¸Ø© Ø£Ù…Ù†ÙŠØ©
              Container(
                width: double.infinity,
                padding: const EdgeInsets.all(16),
                decoration: BoxDecoration(
                  color: Colors.orange[50],
                  borderRadius: BorderRadius.circular(12),
                  border: Border.all(color: Colors.orange[200]!),
                ),
                child: Row(
                  crossAxisAlignment: CrossAxisAlignment.start,
                  children: [
                    const Icon(Icons.security, color: Colors.orange, size: 24),
                    const SizedBox(width: 12),
                    Expanded(
                      child: Column(
                        crossAxisAlignment: CrossAxisAlignment.start,
                        children: [
                          Text(
                            'security_note'.tr, // âœ… Added new key
                            style: const TextStyle(
                              fontWeight: FontWeight.bold,
                              color: Colors.orange,
                            ),
                          ),
                          const SizedBox(height: 4),
                          Text(
                            'security_note_desc'.tr, // âœ… Added new key
                            style: TextStyle(
                              fontSize: 12,
                              color: Colors.grey[700],
                            ),
                          ),
                        ],
                      ),
                    ),
                  ],
                ),
              ),

              const SizedBox(height: 24),

              // Ø²Ø± Ø¥Ø¯Ø§Ø±Ø© Ù…ØªÙ‚Ø¯Ù…Ø©
              OutlinedButton.icon(
                onPressed: () {
                  _showAdvancedOptions();
                },
                icon: const Icon(Icons.settings),
                label: Text('advanced_options'.tr), // âœ… Added new key
                style: OutlinedButton.styleFrom(
                  minimumSize: const Size(double.infinity, 48),
                  shape: RoundedRectangleBorder(
                    borderRadius: BorderRadius.circular(12),
                  ),
                ),
              ),

              const SizedBox(height: 32),
            ],
          ),
        ),
      ),
    );
  }

  Widget _buildStatItem(
      String title, String value, IconData icon, Color color) {
    return Column(
      children: [
        Container(
          padding: const EdgeInsets.all(8),
          decoration: BoxDecoration(
            color: color.withOpacity(0.1),
            shape: BoxShape.circle,
          ),
          child: Icon(icon, color: color, size: 20),
        ),
        const SizedBox(height: 8),
        Text(
          title,
          style: const TextStyle(
            fontSize: 12,
            color: Colors.grey,
          ),
        ),
        Text(
          value,
          style: TextStyle(
            fontSize: 14,
            fontWeight: FontWeight.bold,
            color: color,
          ),
        ),
      ],
    );
  }

  void _showAdvancedOptions() {
    Get.bottomSheet(
      Container(
        padding: const EdgeInsets.all(20),
        decoration: BoxDecoration(
          color: Get.isDarkMode ? Colors.grey[900] : Colors.white,
          borderRadius: const BorderRadius.only(
            topLeft: Radius.circular(20),
            topRight: Radius.circular(20),
          ),
        ),
        child: Column(
          mainAxisSize: MainAxisSize.min,
          crossAxisAlignment: CrossAxisAlignment.start,
          children: [
            Center(
              child: Container(
                width: 40,
                height: 5,
                decoration: BoxDecoration(
                  color: Colors.grey[300],
                  borderRadius: BorderRadius.circular(3),
                ),
              ),
            ),
            const SizedBox(height: 20),
            Text(
              'advanced_options'.tr, // âœ… Added new key
              style: const TextStyle(
                fontSize: 18,
                fontWeight: FontWeight.bold,
              ),
            ),
            const SizedBox(height: 16),

            // Ø®ÙŠØ§Ø±Ø§Øª Ù…ØªÙ‚Ø¯Ù…Ø©
            ListTile(
              leading: const Icon(Icons.delete, color: Colors.red),
              title: Text('clear_backup_history'.tr), // âœ… Added new key
              subtitle: Text('clear_backup_history_desc'.tr), // âœ… Added new key
              onTap: () {
                Get.back();
                _controller.clearBackupData();
              },
            ),

            ListTile(
              leading: const Icon(Icons.info, color: Colors.blue),
              title: Text('system_info'.tr), // âœ… Added new key
              subtitle: Text('system_info_desc'.tr), // âœ… Added new key
              onTap: () {
                Get.back();
                _showSystemInfo();
              },
            ),

            const SizedBox(height: 20),
            SizedBox(
              width: double.infinity,
              child: ElevatedButton(
                onPressed: Get.back,
                child: Text('close'.tr),
              ),
            ),
          ],
        ),
      ),
    );
  }

  void _showSystemInfo() {
    Get.dialog(
      AlertDialog(
        title: Text('system_info'.tr), // âœ… Added new key
        content: SingleChildScrollView(
          child: Column(
            mainAxisSize: MainAxisSize.min,
            crossAxisAlignment: CrossAxisAlignment.start,
            children: [
              Text(
                'local_storage'.tr, // âœ… Added new key
                style: const TextStyle(fontWeight: FontWeight.bold),
              ),
              const SizedBox(height: 8),
              Text('â€¢ ${'storage_getstorage'.tr}'), // âœ… Added new key
              Text('â€¢ ${'storage_encryption'.tr}'), // âœ… Added new key
              Text('â€¢ ${'storage_temp_files'.tr}'), // âœ… Added new key
              const SizedBox(height: 16),
              Text(
                'compatibility'.tr, // âœ… Added new key
                style: const TextStyle(fontWeight: FontWeight.bold),
              ),
              const SizedBox(height: 8),
              Text('â€¢ ${'compat_android_ios'.tr}'), // âœ… Added new key
              Text('â€¢ ${'compat_restore_any'.tr}'), // âœ… Added new key
              Text('â€¢ ${'compat_data_format'.tr}'), // âœ… Added new key
            ],
          ),
        ),
        actions: [
          TextButton(
            onPressed: Get.back,
            child: Text('ok'.tr),
          ),
        ],
      ),
    );
  }
}

// ÙˆÙŠØ¯Ø¬Øª Ù„ØµÙÙˆÙ Ø§Ù„Ù†ØµØ§Ø¦Ø­
class TipsRow extends StatelessWidget {
  final IconData icon;
  final String text;

  const TipsRow({
    super.key,
    required this.icon,
    required this.text,
  });

  @override
  Widget build(BuildContext context) {
    return Row(
      crossAxisAlignment: CrossAxisAlignment.start,
      children: [
        Icon(icon, size: 20, color: Colors.blue),
        const SizedBox(width: 12),
        Expanded(
          child: Text(
            text,
            style: const TextStyle(fontSize: 14),
          ),
        ),
      ],
    );
  }
}
===================== 
FILE: E:\My Mob Projects\3 Flutter abo hamza\demos\finance_app\lib\features\expense\domain\entities\expense_entity.dart 
===================== 
// lib/features/expense/domain/entities/expense_entity.dart

import 'dart:convert'; // âœ… For UTF-8 encoding/decoding
import 'package:uuid/uuid.dart';
import '../../../../core/models/enums.dart';
import '../../../../core/utils/error_handler.dart';

class ExpenseEntity {
  final String id;
  final double amount;
  final ExpenseCategory category;
  final String description; // âœ… Arabic-safe string
  final DateTime date;
  final bool isIncome;
  final String? receiptImage;
  final PaymentMethod paymentMethod;

  ExpenseEntity({
    String? id,
    required this.amount,
    required this.category,
    required this.description,
    required this.date,
    required this.isIncome,
    this.receiptImage,
    required this.paymentMethod,
  })  : id = id ?? const Uuid().v4(),
        assert(amount > 0, 'Ø§Ù„Ù…Ø¨Ù„Øº ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ø£ÙƒØ¨Ø± Ù…Ù† ØµÙØ±');

  ExpenseEntity copyWith({
    String? id,
    double? amount,
    ExpenseCategory? category,
    String? description,
    DateTime? date,
    bool? isIncome,
    String? receiptImage,
    PaymentMethod? paymentMethod,
  }) {
    return ExpenseEntity(
      id: id ?? this.id,
      amount: amount ?? this.amount,
      category: category ?? this.category,
      description: description ?? this.description,
      date: date ?? this.date,
      isIncome: isIncome ?? this.isIncome,
      receiptImage: receiptImage ?? this.receiptImage,
      paymentMethod: paymentMethod ?? this.paymentMethod,
    );
  }

  Map<String, dynamic> toMap() {
    return {
      'id': id,
      'amount': amount,
      'category': category.arabicName,
      // âœ… Ensure Arabic text is UTF-8 safe
      'description': utf8.decode(utf8.encode(description.trim())),
      'date': date.toIso8601String(),
      'isIncome': isIncome,
      'receiptImage': receiptImage,
      'paymentMethod': paymentMethod.arabicName,
    };
  }

  factory ExpenseEntity.fromMap(Map<String, dynamic> map) {
    try {
      final categoryStr = map['category']?.toString() ?? 'Ø£Ø®Ø±Ù‰';
      final paymentMethodStr = map['paymentMethod']?.toString() ?? 'Ù†Ù‚Ø¯ÙŠ';
      final descriptionStr = map['description']?.toString().trim() ?? '';
      final amountValue = map['amount'];

      return ExpenseEntity(
        id: map['id']?.toString() ?? const Uuid().v4(),
        amount: _parseAmount(amountValue),
        category: ExpenseCategory.fromString(categoryStr),
        description: utf8.decode(utf8.encode(descriptionStr)), // âœ… Arabic-safe
        date: _parseDate(map['date']?.toString()),
        isIncome: _parseBoolean(map['isIncome']),
        receiptImage: map['receiptImage']?.toString(),
        paymentMethod: PaymentMethod.fromString(paymentMethodStr),
      );
    } catch (e, stackTrace) {
      print('âŒ Error in ExpenseEntity.fromMap: $e');
      print('Map data: $map');

      return ExpenseEntity(
        amount: 0.0,
        category: ExpenseCategory.other,
        description: 'Ù…Ø¹Ø§Ù…Ù„Ø© ØºÙŠØ± ØµØ§Ù„Ø­Ø©',
        date: DateTime.now(),
        isIncome: false,
        paymentMethod: PaymentMethod.cash,
      );
    }
  }

  static double _parseAmount(dynamic amountValue) {
    try {
      if (amountValue == null) return 0.0;
      if (amountValue is int) return amountValue.toDouble();
      if (amountValue is double) return amountValue;
      if (amountValue is String) return double.tryParse(amountValue) ?? 0.0;
      if (amountValue is num) return amountValue.toDouble();
      return 0.0;
    } catch (e) {
      print('Error parsing amount: $amountValue, error: $e');
      return 0.0;
    }
  }

  static DateTime _parseDate(String? dateString) {
    try {
      if (dateString == null || dateString.isEmpty) {
        return DateTime.now();
      }
      return DateTime.parse(dateString);
    } catch (e) {
      print('Error parsing date: $dateString, error: $e');
      return DateTime.now();
    }
  }

  static bool _parseBoolean(dynamic value) {
    try {
      if (value == null) return false;
      if (value is bool) return value;
      if (value is String) return value.toLowerCase() == 'true';
      if (value is int) return value > 0;
      return false;
    } catch (e) {
      print('Error parsing boolean: $value, error: $e');
      return false;
    }
  }

  @override
  String toString() {
    return 'ExpenseEntity(id: $id, amount: $amount, category: ${category.arabicName}, description: $description, date: $date, isIncome: $isIncome, paymentMethod: ${paymentMethod.arabicName})';
  }

  double get signedAmount => isIncome ? amount : -amount;

  bool isSimilarTo(ExpenseEntity other) {
    return amount == other.amount &&
        category == other.category &&
        description.trim() == other.description.trim() &&
        date.difference(other.date).inDays.abs() < 7;
  }

  @override
  bool operator ==(Object other) {
    if (identical(this, other)) return true;
    return other is ExpenseEntity && other.id == id;
  }

  @override
  int get hashCode => id.hashCode;
}
===================== 
FILE: E:\My Mob Projects\3 Flutter abo hamza\demos\finance_app\lib\features\expense\presentation\bindings\expense_binding.dart 
===================== 
// lib/features/expense/presentation/bindings/expense_binding.dart
import 'package:get/get.dart';

import '../controllers/expense_controller.dart';

class ExpenseBinding implements Bindings {
  @override
  void dependencies() {
    Get.lazyPut(() => ExpenseController());
  }
}
===================== 
FILE: E:\My Mob Projects\3 Flutter abo hamza\demos\finance_app\lib\features\expense\presentation\controllers\budget_controller.dart 
===================== 
import 'package:get/get.dart';
import 'package:get_storage/get_storage.dart';
import 'package:finance_app/features/expense/presentation/controllers/expense_controller.dart';
import 'package:finance_app/core/security/simple_encryption.dart';

class BudgetController extends GetxController {
  final _storage = GetStorage();

  // Monthly budget
  final monthlyBudget = 0.0.obs;

  //  Budgets according to  Categories
  final categoryBudgets = <String, double>{}.obs;

  // Bais Categories in Budget
  final List<String> defaultCategories = [
    'Ø·Ø¹Ø§Ù…',
    'Ù…ÙˆØ§ØµÙ„Ø§Øª',
    'ØªØ³ÙˆÙ‚',
    'ØªØ±ÙÙŠÙ‡',
    'ØµØ­Ø©',
    'ØªØ¹Ù„ÙŠÙ…',
    'Ø³ÙƒÙ†',
    'ÙÙˆØ§ØªÙŠØ±',
  ];

  @override
  void onInit() {
    super.onInit();
    loadBudgetData();
  }

  // loading main Budget Data
  Future<void> loadBudgetData() async {
    try {
      final storedMonthlyBudget = SimpleEncryption.read('monthlyBudget');
      monthlyBudget.value = (storedMonthlyBudget as num?)?.toDouble() ?? 0.0;

      final storedCategoryBudgets =
          SimpleEncryption.read('categoryBudgets') ?? {};
      categoryBudgets.value = Map<String, double>.from(storedCategoryBudgets);

      // Initilizing the Budgets Categories if it are empty
      if (categoryBudgets.isEmpty) {
        for (var category in defaultCategories) {
          categoryBudgets[category] = 0.0;
        }
      }

      print('âœ… Budget data loaded successfully');
    } catch (e) {
      print('Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ©: $e');
      _initializeDefaultBudgets();
    }
  }

  //  Initilizing Default Budgets
  void _initializeDefaultBudgets() {
    for (var category in defaultCategories) {
      categoryBudgets[category] = 0.0;
    }
    monthlyBudget.value = 0.0;
  }

  // Update  Monthly Budget
  Future<void> setMonthlyBudget(double amount) async {
    monthlyBudget.value = amount;

    await SimpleEncryption.write('monthlyBudget', amount);

    update();
    print('ğŸ’° Monthly budget updated: $amount');
  }

  //  Setting a budget with a certain cagerory
  Future<void> setCategoryBudget(String category, double amount) async {
    categoryBudgets[category] = amount;
    await _saveCategoryBudgets();
    update();
    print('ğŸ“Š Category budget updated: $category = $amount');
  }

  // Save a budget with a certain category
  Future<void> _saveCategoryBudgets() async {
    await SimpleEncryption.write('categoryBudgets', categoryBudgets);
  }

  double get totalCategoryBudgets {
    return categoryBudgets.values.fold(0.0, (sum, budget) => sum + budget);
  }

  // Checking for un exceed the Budget
  double get remainingBudget {
    final expenseController = Get.find<ExpenseController>();
    return monthlyBudget.value - expenseController.totalExpense.value;
  }

  // Calculating  expense percentage  of  Budget
  double get spendingPercentage {
    if (monthlyBudget.value <= 0) return 0;
    final expenseController = Get.find<ExpenseController>();
    return (expenseController.totalExpense.value / monthlyBudget.value) * 100;
  }

  // Getting remaining budget for each category
  Map<String, double> getRemainingCategoryBudgets() {
    final expenseController = Get.find<ExpenseController>();
    final categoryExpenses = expenseController.getExpensesByCategory(false);

    final Map<String, double> remaining = {};

    for (var category in categoryBudgets.keys) {
      final budget = categoryBudgets[category] ?? 0.0;
      final spent = categoryExpenses[category] ?? 0.0;
      remaining[category] = budget - spent;
    }

    return remaining;
  }

  // get Budget Alerts
  List<String> getBudgetAlerts() {
    final List<String> alerts = [];
    final expenseController = Get.find<ExpenseController>();

    // Budget Alert of high Expense
    if (spendingPercentage >= 80) {
      alerts.add(
          'âš ï¸ Ø£Ù†Øª Ø£Ù†ÙÙ‚Øª ${spendingPercentage.toStringAsFixed(0)}% Ù…Ù† Ù…ÙŠØ²Ø§Ù†ÙŠØªÙƒ');
    }

    if (spendingPercentage >= 100) {
      alerts.add('ğŸš¨ ØªØ¬Ø§ÙˆØ²Øª Ù…ÙŠØ²Ø§Ù†ÙŠØªÙƒ Ø§Ù„Ø´Ù‡Ø±ÙŠØ©!');
    }

    //  Category Alets
    final remainingBudgets = getRemainingCategoryBudgets();
    for (var entry in remainingBudgets.entries) {
      if (entry.value < 0) {
        alerts.add(
            'ğŸ“Œ ØªØ¬Ø§ÙˆØ²Øª Ù…ÙŠØ²Ø§Ù†ÙŠØ© "${entry.key}" Ø¨Ù…Ù‚Ø¯Ø§Ø± ${entry.value.abs().toStringAsFixed(2)} Ø¬.Ù…');
      }
    }

    return alerts;
  }

  // Reset Budget
  Future<void> resetBudget() async {
    try {
      monthlyBudget.value = 0.0;
      categoryBudgets.clear();
      _initializeDefaultBudgets();

      await SimpleEncryption.remove('monthlyBudget');
      await SimpleEncryption.remove('categoryBudgets');

      update();
      print('ğŸ”„ ØªÙ… Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ©');
    } catch (e) {
      print('âš ï¸ Ø®Ø·Ø£ ÙÙŠ Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ©: $e');
      // Fallback: Reset in memory even if storage fails
      monthlyBudget.value = 0.0;
      categoryBudgets.clear();
      _initializeDefaultBudgets();
      update();
    }
  }
}
===================== 
FILE: E:\My Mob Projects\3 Flutter abo hamza\demos\finance_app\lib\features\expense\presentation\controllers\expense_controller.dart 
===================== 
// lib/features/expense/presentation/controllers/expense_controller.dart

import 'package:finance_app/core/models/enums.dart';
import 'package:finance_app/features/alerts/presentation/controllers/alert_controller.dart';
import 'package:finance_app/features/expense/domain/entities/expense_entity.dart';
import 'package:finance_app/core/utils/error_handler.dart';
import 'package:finance_app/core/security/simple_encryption.dart';
import 'package:finance_app/features/expense/presentation/controllers/budget_controller.dart';
import 'package:get/get.dart';
import 'package:flutter/material.dart';

class ExpenseController extends GetxController {
  final expenses = <ExpenseEntity>[].obs;
  final isLoading = false.obs;
  final totalIncome = 0.0.obs;
  final totalExpense = 0.0.obs;
  final balance = 0.0.obs;
  final selectedExpense = Rx<ExpenseEntity?>(null);

  @override
  void onInit() {
    super.onInit();
    _initializeData();
  }

  Future<void> _initializeData() async {
    isLoading.value = true;

    try {
      await loadExpenses();

      if (expenses.isEmpty) {
        print('ğŸ“ No expenses found, considering test data...');
      }
    } catch (e, stackTrace) {
      print('âŒ Error initializing data: $e');
      print('Stack trace: $stackTrace');
      ErrorHandler.showError('initDataError'.trParams({'e': e.toString()}));
    } finally {
      isLoading.value = false;
    }
  }

  Future<void> loadExpenses() async {
    try {
      final storedData = SimpleEncryption.read('expenses');

      if (storedData == null) {
        expenses.value = [];
        calculateRealTotals();
        print('ğŸ“­ No stored expenses found');
        return;
      }

      if (storedData is List) {
        final loadedExpenses = <ExpenseEntity>[];
        int errorCount = 0;
        int successCount = 0;

        for (var i = 0; i < storedData.length; i++) {
          try {
            final item = storedData[i];

            if (item is Map<String, dynamic>) {
              final expense = ExpenseEntity.fromMap(item);

              if (expense.amount > 0 && expense.id.isNotEmpty) {
                loadedExpenses.add(expense);
                successCount++;
              } else {
                errorCount++;
              }
            } else {
              errorCount++;
            }
          } catch (e) {
            errorCount++;
          }
        }

        expenses.value = loadedExpenses;
        calculateRealTotals();

        print('ğŸ“Š Loaded $successCount expenses with $errorCount errors');

        if (errorCount > 0) {
          ErrorHandler.showWarning(
            'loadedWithErrors'.trParams({
              'successCount': successCount.toString(),
              'errorCount': errorCount.toString()
            }),
            title: 'note'.tr,
          );
        }
      } else {
        print('âš ï¸ Stored expenses is not a List: ${storedData.runtimeType}');
        expenses.value = [];
        calculateRealTotals();

        await SimpleEncryption.remove('expenses');
        ErrorHandler.showWarning(
          'corruptedDataCleared'.tr,
          title: 'alert'.tr,
        );
      }
    } catch (e, stackTrace) {
      print('âŒ Critical error loading expenses: $e');
      print('Stack trace: $stackTrace');

      expenses.value = [];
      calculateRealTotals();

      ErrorHandler.showError(
        'loadDataFailedRestart'.tr,
        title: 'criticalError'.tr,
      );
    }
  }

  @visibleForTesting
  Future<void> addTestData() async {
    return;
  }

  void calculateRealTotals() {
    double income = 0;
    double expense = 0;

    for (var entity in expenses) {
      if (entity.isIncome) {
        income += entity.amount;
      } else {
        expense += entity.amount;
      }
    }

    totalIncome.value = income;
    totalExpense.value = expense;
    balance.value = income - expense;

    print(
        'ğŸ’° Totals calculated - Income: $income, Expense: $expense, Balance: ${balance.value}');
  }

  Future<void> addExpense(ExpenseEntity expense) async {
    try {
      if (expense.amount <= 0) {
        throw Exception('invalidAmount'.tr);
      }

      if (expense.category == ExpenseCategory.other &&
          expense.description.isEmpty) {
        throw Exception('otherCategoryDescription'.tr);
      }

      if (_isDuplicateExpense(expense)) {
        final shouldProceed = await ErrorHandler.showConfirmationDialog(
          title: 'similarTransaction'.tr,
          message: 'duplicateExpenseQuestion'.tr,
          confirmText: 'proceedAnyway'.tr,
          cancelText: 'cancel'.tr,
          confirmColor: Colors.blue,
        );

        if (!shouldProceed) {
          return;
        }
      }

      expenses.add(expense);
      await _saveToStorage();
      calculateRealTotals();

      ErrorHandler.showSuccess('saveSuccess'.tr);

      final alertController = Get.find<AlertController>();

      if (!expense.isIncome) {
        alertController.checkExpenseAlerts(
            expense.amount, expense.category.arabicName, expense.isIncome);
      }

      if (Get.isRegistered<BudgetController>()) {
        final budgetController = Get.find<BudgetController>();
        alertController.checkBudgetAlerts(
          budgetController.spendingPercentage,
          budgetController.remainingBudget,
        );
      }
    } catch (e, stackTrace) {
      print('âŒ Error adding expense: $e');
      print('Stack trace: $stackTrace');

      ErrorHandler.showError('addExpenseFailed'.trParams({'e': e.toString()}));
      rethrow;
    }
  }

  bool _isDuplicateExpense(ExpenseEntity newExpense) {
    final recentExpenses = this.recentExpenses.take(5).toList();

    for (var existingExpense in recentExpenses) {
      if (existingExpense.isSimilarTo(newExpense)) {
        return true;
      }
    }

    return false;
  }

  Future<void> updateExpense(int index, ExpenseEntity expense) async {
    try {
      if (index < 0 || index >= expenses.length) {
        throw Exception('invalidIndex'.tr);
      }

      if (expense.amount <= 0) {
        throw Exception('invalidAmount'.tr);
      }

      expenses[index] = expense;
      await _saveToStorage();
      calculateRealTotals();

      ErrorHandler.showSuccess('updateSuccess'.tr);
    } catch (e, stackTrace) {
      print('âŒ Error updating expense at index $index: $e');
      print('Stack trace: $stackTrace');

      ErrorHandler.showError(
          'updateExpenseFailed'.trParams({'e': e.toString()}));
    }
  }

  Future<void> deleteExpense(int index) async {
    try {
      if (index < 0 || index >= expenses.length) {
        throw Exception('invalidIndex'.tr);
      }

      final expenseToDelete = expenses[index];

      expenses.removeAt(index);
      await _saveToStorage();
      calculateRealTotals();

      ErrorHandler.showSuccess('deleteSuccess'.tr);

      print(
          'ğŸ—‘ï¸ Deleted expense: ${expenseToDelete.category.arabicName} - ${expenseToDelete.amount}');
    } catch (e, stackTrace) {
      print('âŒ Error deleting expense at index $index: $e');
      print('Stack trace: $stackTrace');

      ErrorHandler.showError(
          'deleteExpenseFailed'.trParams({'e': e.toString()}));
    }
  }

  Future<void> clearAllData() async {
    try {
      final confirmed = await ErrorHandler.showConfirmationDialog(
        title: 'clearAllDataTitle'.tr,
        message: 'clearAllDataMessage'.tr,
        confirmText: 'confirmClearAll'.tr,
        cancelText: 'cancel'.tr,
        confirmColor: Colors.red,
      );

      if (!confirmed) {
        print('âš ï¸ User cancelled clear all data');
        return;
      }

      expenses.clear();
      await SimpleEncryption.remove('expenses');

      await SimpleEncryption.remove('monthlyBudget');
      await SimpleEncryption.remove('categoryBudgets');

      calculateRealTotals();

      ErrorHandler.showSuccess('clearAllSuccess'.tr);

      print('ğŸ§¹ All data cleared by user');
    } catch (e, stackTrace) {
      print('âŒ Error clearing all data: $e');
      print('Stack trace: $stackTrace');

      ErrorHandler.showError('clearDataFailed'.trParams({'e': e.toString()}));
    }
  }

  Future<void> _saveToStorage() async {
    try {
      final data = expenses.map((e) => e.toMap()).toList();
      await SimpleEncryption.write('expenses', data);

      print('ğŸ’¾ Saved ${expenses.length} expenses to storage');
    } catch (e, stackTrace) {
      print('âŒ Error saving expenses to storage: $e');
      print('Stack trace: $stackTrace');

      ErrorHandler.showError('saveDataError'.trParams({'e': e.toString()}));
      rethrow;
    }
  }

  Map<String, dynamic> getMonthlyStats() {
    final now = DateTime.now();
    final monthlyExpenses = expenses.where((expense) {
      return expense.date.month == now.month && expense.date.year == now.year;
    }).toList();

    double monthlyIncome = 0;
    double monthlyExpense = 0;

    for (var expense in monthlyExpenses) {
      if (expense.isIncome) {
        monthlyIncome += expense.amount;
      } else {
        monthlyExpense += expense.amount;
      }
    }

    return {
      'income': monthlyIncome,
      'expense': monthlyExpense,
      'balance': monthlyIncome - monthlyExpense,
      'count': monthlyExpenses.length,
      'averageExpense': monthlyExpenses.isNotEmpty
          ? monthlyExpense / monthlyExpenses.length
          : 0,
    };
  }

  Map<String, double> getExpensesByCategory(bool isIncome) {
    final Map<String, double> categoryTotals = {};

    final filteredExpenses =
        expenses.where((expense) => expense.isIncome == isIncome);

    for (var expense in filteredExpenses) {
      final categoryName = expense.category.arabicName;
      categoryTotals.update(
        categoryName,
        (value) => value + expense.amount,
        ifAbsent: () => expense.amount,
      );
    }

    return categoryTotals;
  }

  int get expenseCount => expenses.length;

  List<ExpenseEntity> get recentExpenses {
    final sorted = List<ExpenseEntity>.from(expenses);
    sorted.sort((a, b) => b.date.compareTo(a.date));
    return sorted;
  }

  List<ExpenseEntity> getExpensesByDateRange(DateTime start, DateTime end) {
    return expenses.where((expense) {
      return expense.date.isAfter(start.subtract(const Duration(days: 1))) &&
          expense.date.isBefore(end.add(const Duration(days: 1)));
    }).toList();
  }

  ExpenseEntity? getExpenseById(String id) {
    try {
      return expenses.firstWhere((expense) => expense.id == id);
    } catch (e) {
      return null;
    }
  }

  List<Map<String, dynamic>> get expensesAsMap {
    return expenses.map((e) => e.toMap()).toList();
  }

  List<ExpenseEntity> get currentMonthExpenses {
    final now = DateTime.now();
    return expenses.where((expense) {
      return expense.date.month == now.month && expense.date.year == now.year;
    }).toList();
  }

  String? get mostExpensiveCategory {
    if (expenses.isEmpty) return null;

    final categoryTotals = getExpensesByCategory(false);
    if (categoryTotals.isEmpty) return null;

    final sortedEntries = categoryTotals.entries.toList()
      ..sort((a, b) => b.value.compareTo(a.value));

    return sortedEntries.first.key;
  }
}
===================== 
FILE: E:\My Mob Projects\3 Flutter abo hamza\demos\finance_app\lib\features\expense\presentation\pages\add_expense_page.dart 
===================== 
// finance_app\lib\features\expense\presentation\pages\add_expense_page.dart

import 'dart:ui' as ui;
import 'package:flutter/material.dart';
import 'package:get/get.dart';
import 'package:intl/intl.dart';

import '../../../../core/models/enums.dart';
import '../../domain/entities/expense_entity.dart';
import '../controllers/expense_controller.dart';

class AddExpensePage extends StatefulWidget {
  const AddExpensePage({super.key});

  @override
  State<AddExpensePage> createState() => _AddExpensePageState();
}

class _AddExpensePageState extends State<AddExpensePage> {
  final ExpenseController _controller = Get.find();
  final _formKey = GlobalKey<FormState>();

  double _amount = 0.0;
  String _category = 'food'.tr;
  String _description = '';
  DateTime _date = DateTime.now();
  bool _isIncome = false;
  String _paymentMethod = 'cash'.tr;

  final _amountController = TextEditingController();
  final _descriptionController = TextEditingController();

  final List<String> _categories = [
    "food".tr,
    "transportation".tr,
    "marketing".tr,
    "entertainment".tr,
    "health".tr,
    "learn".tr,
    "living".tr,
    "bills".tr,
    "salary".tr,
    "investment".tr,
    "gifts".tr,
    "others".tr,
  ];

  final List<String> _paymentMethods = [
    "cash".tr,
    "credit_card".tr,
    "bank_transfer".tr,
    "e_wallet".tr,
    "cheque".tr
  ];

  @override
  void dispose() {
    _amountController.dispose();
    _descriptionController.dispose();
    super.dispose();
  }

  String _formatDate(DateTime date) {
    try {
      return DateFormat('yyyy/MM/dd', Get.locale?.languageCode ?? 'en')
          .format(date);
    } catch (_) {
      return DateFormat('yyyy/MM/dd').format(date);
    }
  }

  Future<DateTime?> _selectDate(BuildContext context) async {
    final DateTime? picked = await showDatePicker(
      context: context,
      initialDate: _date,
      firstDate: DateTime(2000),
      lastDate: DateTime(2100),
      locale: Get.locale,
    );
    return picked;
  }

  @override
  Widget build(BuildContext context) {
    return Directionality(
      textDirection: ui.TextDirection.rtl,
      child: Scaffold(
        appBar: AppBar(
          title: Text(_isIncome ? 'add_new_income'.tr : 'add_new_expense'.tr),
          centerTitle: true,
        ),
        body: Form(
          key: _formKey,
          child: SingleChildScrollView(
            padding: const EdgeInsets.all(20),
            child: Column(
              children: [
                SwitchListTile(
                  title: Text(_isIncome ? 'income'.tr : 'expense'.tr),
                  value: _isIncome,
                  onChanged: (v) => setState(() => _isIncome = v),
                ),
                const SizedBox(height: 16),
                TextFormField(
                  controller: _amountController,
                  keyboardType: TextInputType.number,
                  decoration: InputDecoration(
                    labelText: 'amount'.tr,
                    border: const OutlineInputBorder(),
                  ),
                  validator: (v) => v == null || double.tryParse(v) == null
                      ? 'enter_valid_number'.tr
                      : null,
                  onSaved: (v) => _amount = double.parse(v!),
                ),
                const SizedBox(height: 16),
                DropdownButtonFormField(
                  value: _category,
                  decoration: InputDecoration(
                    labelText: 'category'.tr,
                    border: const OutlineInputBorder(),
                  ),
                  items: _categories
                      .map((e) => DropdownMenuItem(value: e, child: Text(e)))
                      .toList(),
                  onChanged: (v) => setState(() => _category = v!),
                ),
                const SizedBox(height: 16),
                GestureDetector(
                  onTap: () async {
                    final picked = await _selectDate(context);
                    if (picked != null) {
                      setState(() => _date = picked);
                    }
                  },
                  child: Container(
                    width: double.infinity,
                    padding: const EdgeInsets.all(16),
                    decoration: BoxDecoration(
                      border: Border.all(color: Colors.grey),
                      borderRadius: BorderRadius.circular(4),
                    ),
                    child: Row(
                      mainAxisAlignment: MainAxisAlignment.spaceBetween,
                      children: [
                        Text('date'.tr,
                            style: TextStyle(
                                color: Colors.grey[600], fontSize: 16)),
                        Row(
                          children: [
                            Text(_formatDate(_date),
                                style: const TextStyle(fontSize: 16)),
                            const SizedBox(width: 8),
                            const Icon(Icons.calendar_today,
                                color: Colors.blue),
                          ],
                        ),
                      ],
                    ),
                  ),
                ),
                const SizedBox(height: 16),
                DropdownButtonFormField(
                  value: _paymentMethod,
                  decoration: InputDecoration(
                    labelText: 'payment_method'.tr,
                    border: const OutlineInputBorder(),
                  ),
                  items: _paymentMethods
                      .map((e) => DropdownMenuItem(value: e, child: Text(e)))
                      .toList(),
                  onChanged: (v) => setState(() => _paymentMethod = v!),
                ),
                const SizedBox(height: 16),
                TextFormField(
                  controller: _descriptionController,
                  maxLines: 3,
                  decoration: InputDecoration(
                    labelText: 'description'.tr,
                    border: const OutlineInputBorder(),
                  ),
                  textDirection: ui.TextDirection.rtl,
                  textAlign: TextAlign.right,
                  onSaved: (v) => _description = v ?? '',
                ),
                const SizedBox(height: 24),
                ElevatedButton(
                  onPressed: _saveExpense,
                  style: ElevatedButton.styleFrom(
                    minimumSize: const Size(double.infinity, 50),
                  ),
                  child: Text('save_transaction'.tr),
                ),
              ],
            ),
          ),
        ),
      ),
    );
  }

  void _saveExpense() {
    if (!_formKey.currentState!.validate()) return;
    _formKey.currentState!.save();

    final expense = ExpenseEntity(
      amount: _amount,
      category: ExpenseCategory.fromString(_category),
      description: _description,
      date: _date,
      isIncome: _isIncome,
      paymentMethod: PaymentMethod.fromString(_paymentMethod),
    );

    _controller.addExpense(expense);
    Get.back();
  }
}
===================== 
FILE: E:\My Mob Projects\3 Flutter abo hamza\demos\finance_app\lib\features\expense\presentation\pages\budget_page.dart 
===================== 
// lib/features/expense/presentation/pages/budget_page.dart

import 'package:flutter/material.dart';
import 'package:get/get.dart';
import 'package:get_storage/get_storage.dart';
import '../controllers/budget_controller.dart';
import '../controllers/expense_controller.dart';

class BudgetPage extends StatefulWidget {
  const BudgetPage({super.key});

  @override
  State<BudgetPage> createState() => _BudgetPageState();
}

class _BudgetPageState extends State<BudgetPage> {
  final BudgetController _controller = Get.find<BudgetController>();

  final ExpenseController _expenseController = Get.find<ExpenseController>();

  final TextEditingController _budgetController = TextEditingController();
  final Map<String, TextEditingController> _categoryControllers = {};

  @override
  void initState() {
    super.initState();
    _budgetController.text = _controller.monthlyBudget.value.toStringAsFixed(2);

    // Initialize category controllers
    for (var category in _controller.defaultCategories) {
      _categoryControllers[category] = TextEditingController(
        text:
            _controller.categoryBudgets[category]?.toStringAsFixed(2) ?? '0.00',
      );
    }
  }

  @override
  void dispose() {
    _budgetController.dispose();
    for (var controller in _categoryControllers.values) {
      controller.dispose();
    }
    super.dispose();
  }

  void _saveMonthlyBudget() {
    final value = double.tryParse(_budgetController.text) ?? 0.0;
    _controller.setMonthlyBudget(value);
    Get.snackbar('saved'.tr, 'monthly_budget_updated'.tr);
  }

  void _saveCategoryBudget(String category) {
    final controller = _categoryControllers[category];
    final value = double.tryParse(controller?.text ?? '0') ?? 0.0;
    _controller.setCategoryBudget(category, value);
    Get.snackbar('saved'.tr, 'category_budget_updated'.tr);
  }

  void _showBudgetSummary() {
    final alerts = _controller.getBudgetAlerts();

    Get.defaultDialog(
      title: 'budget_summary'.tr,
      content: SizedBox(
        width: double.maxFinite,
        child: Column(
          mainAxisSize: MainAxisSize.min,
          children: [
            // Monthly Budget
            _buildSummaryItem(
              'monthly_budget'.tr,
              '${_controller.monthlyBudget.value} ${'currency_suffix'.tr}',
              Icons.account_balance_wallet,
              Colors.blue,
            ),

            _buildSummaryItem(
              'spent'.tr,
              '${_expenseController.totalExpense.value} ${'currency_suffix'.tr}',
              Icons.arrow_upward,
              Colors.red,
            ),

            _buildSummaryItem(
              'remaining'.tr,
              '${_controller.remainingBudget.toStringAsFixed(2)} ${'currency_suffix'.tr}',
              Icons.savings,
              _controller.remainingBudget >= 0 ? Colors.green : Colors.red,
            ),

            const Divider(),

            // Alerts
            if (alerts.isNotEmpty) ...[
              Padding(
                padding: const EdgeInsets.only(bottom: 8),
                child: Text(
                  'alerts'.tr,
                  style: const TextStyle(fontWeight: FontWeight.bold),
                ),
              ),
              ...alerts
                  .map((alert) => Padding(
                        padding: const EdgeInsets.symmetric(vertical: 4),
                        child: Text('â€¢ $alert'),
                      ))
                  .toList(),
            ],
          ],
        ),
      ),
      textConfirm: 'ok'.tr,
      onConfirm: Get.back,
    );
  }

  Widget _buildSummaryItem(
      String title, String value, IconData icon, Color color) {
    return Padding(
        padding: const EdgeInsets.symmetric(vertical: 8),
        child: Row(
          children: [
            Icon(icon, color: color, size: 24),
            const SizedBox(width: 12),
            Expanded(child: Text(title)),
            Text(
              value,
              style: TextStyle(
                fontWeight: FontWeight.bold,
                color: color,
              ),
            ),
          ],
        ));
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text('budget'.tr),
        centerTitle: true,
        actions: [
          IconButton(
            icon: const Icon(Icons.assessment),
            onPressed: _showBudgetSummary,
            tooltip: 'budget_summary'.tr,
          ),
        ],
      ),
      body: SingleChildScrollView(
        padding: const EdgeInsets.all(20),
        child: Column(
          crossAxisAlignment: CrossAxisAlignment.start,
          children: [
            // Monthly Budget Card
            Card(
              child: Padding(
                padding: const EdgeInsets.all(16),
                child: Column(
                  crossAxisAlignment: CrossAxisAlignment.start,
                  children: [
                    Text(
                      'monthly_budget'.tr,
                      style: const TextStyle(
                        fontSize: 16,
                        fontWeight: FontWeight.bold,
                      ),
                    ),
                    const SizedBox(height: 8),
                    TextField(
                      controller: _budgetController,
                      decoration: InputDecoration(
                        labelText: 'amount_with_currency'.tr,
                        prefixIcon: const Icon(Icons.attach_money),
                        suffixIcon: IconButton(
                          icon: const Icon(Icons.save),
                          onPressed: _saveMonthlyBudget,
                        ),
                      ),
                      keyboardType: TextInputType.number,
                    ),
                    const SizedBox(height: 16),
                    Obx(() {
                      final percentage = _controller.spendingPercentage;
                      return Column(
                        children: [
                          LinearProgressIndicator(
                            value: percentage / 100,
                            backgroundColor: Colors.grey[300],
                            valueColor: AlwaysStoppedAnimation<Color>(
                              percentage >= 100
                                  ? Colors.red
                                  : percentage >= 80
                                      ? Colors.orange
                                      : Colors.green,
                            ),
                            minHeight: 10,
                          ),
                          const SizedBox(height: 8),
                          Text(
                            percentage >= 100
                                ? 'budget_exceeded'.tr
                                : '${percentage.toStringAsFixed(1)}% ${'spent'.tr.toLowerCase()}',
                            style: TextStyle(
                              color: percentage >= 100
                                  ? Colors.red
                                  : percentage >= 80
                                      ? Colors.orange
                                      : Colors.green,
                            ),
                          ),
                        ],
                      );
                    }),
                  ],
                ),
              ),
            ),

            const SizedBox(height: 24),

            // Category Budgets Card
            Card(
              child: Padding(
                padding: const EdgeInsets.all(16),
                child: Column(
                  crossAxisAlignment: CrossAxisAlignment.start,
                  children: [
                    Text(
                      'category_budget'.tr,
                      style: const TextStyle(
                        fontSize: 16,
                        fontWeight: FontWeight.bold,
                      ),
                    ),
                    const SizedBox(height: 8),
                    Text(
                      'set_category_budget'.tr,
                      style: const TextStyle(color: Colors.grey),
                    ),
                    const SizedBox(height: 16),

                    // Categories List
                    ..._controller.defaultCategories.map((category) {
                      return Padding(
                        padding: const EdgeInsets.symmetric(vertical: 8),
                        child: Row(
                          children: [
                            Expanded(
                              child: Text(category),
                            ),
                            SizedBox(
                              width: 120,
                              child: TextField(
                                controller: _categoryControllers[category],
                                decoration: InputDecoration(
                                  hintText: '0.00',
                                  suffixText: 'currency_suffix'.tr,
                                  contentPadding: const EdgeInsets.symmetric(
                                    horizontal: 12,
                                    vertical: 8,
                                  ),
                                ),
                                keyboardType: TextInputType.number,
                                onSubmitted: (_) =>
                                    _saveCategoryBudget(category),
                              ),
                            ),
                            IconButton(
                              icon: const Icon(Icons.save, size: 20),
                              onPressed: () => _saveCategoryBudget(category),
                            ),
                          ],
                        ),
                      );
                    }).toList(),
                  ],
                ),
              ),
            ),

            const SizedBox(height: 24),

            // Notes Card
            Card(
              child: Padding(
                padding: const EdgeInsets.all(16),
                child: Column(
                  crossAxisAlignment: CrossAxisAlignment.start,
                  children: [
                    Text(
                      'notes'.tr,
                      style: const TextStyle(
                        fontSize: 16,
                        fontWeight: FontWeight.bold,
                      ),
                    ),
                    const SizedBox(height: 8),
                    Text(
                      'note_budget_control'.tr,
                      style: const TextStyle(color: Colors.grey),
                    ),
                    Text(
                      'note_budget_alert'.tr,
                      style: const TextStyle(color: Colors.grey),
                    ),
                    Text(
                      'note_budget_edit'.tr,
                      style: const TextStyle(color: Colors.grey),
                    ),
                  ],
                ),
              ),
            ),

            const SizedBox(height: 32),

            // Control Buttons
            Row(
              children: [
                Expanded(
                  child: ElevatedButton.icon(
                    onPressed: _showBudgetSummary,
                    icon: const Icon(Icons.assessment),
                    label: Text('show_summary'.tr),
                    style: ElevatedButton.styleFrom(
                      backgroundColor: Colors.blue,
                      foregroundColor: Colors.white,
                    ),
                  ),
                ),
                const SizedBox(width: 12),
                Expanded(
                  child: OutlinedButton.icon(
                    onPressed: () {
                      _controller.resetBudget();
                      setState(() {
                        _budgetController.text = '0.00';
                        for (var controller in _categoryControllers.values) {
                          controller.text = '0.00';
                        }
                      });
                    },
                    icon: const Icon(Icons.restart_alt),
                    label: Text('reset'.tr),
                  ),
                ),
              ],
            ),
          ],
        ),
      ),
    );
  }
}
===================== 
FILE: E:\My Mob Projects\3 Flutter abo hamza\demos\finance_app\lib\features\expense\presentation\pages\edit_expense_page.dart 
===================== 
// lib/features/expense/presentation/pages/edit_expense_page.dart

import 'package:finance_app/features/expense/domain/entities/expense_entity.dart';
import 'package:flutter/material.dart';
import 'package:get/get.dart';
import 'package:intl/intl.dart';

import '../../../../core/models/enums.dart';
import '../controllers/expense_controller.dart';

class EditExpensePage extends StatefulWidget {
  final int expenseIndex;
  final Map<String, dynamic> expenseData;

  const EditExpensePage({
    super.key,
    required this.expenseIndex,
    required this.expenseData,
  });

  @override
  State<EditExpensePage> createState() => _EditExpensePageState();
}

class _EditExpensePageState extends State<EditExpensePage> {
  final ExpenseController _controller = Get.find();
  final _formKey = GlobalKey<FormState>();

  late double _amount;
  late String _category;
  late String _description;
  late DateTime _date;
  late bool _isIncome;
  late String _paymentMethod;

  final _amountController = TextEditingController();
  final _descriptionController = TextEditingController();

  @override
  void initState() {
    super.initState();

    _amount = (widget.expenseData['amount'] as num).toDouble();
    // Store the category as is (Arabic from database)
    _category = widget.expenseData['category']?.toString() ?? "Ø£Ø®Ø±Ù‰";
    _description = widget.expenseData['description']?.toString() ?? '';
    _date = DateTime.parse(
        widget.expenseData['date']?.toString() ?? DateTime.now().toString());
    _isIncome = widget.expenseData['isIncome'] == true;
    _paymentMethod = widget.expenseData['paymentMethod']?.toString() ?? "Ù†Ù‚Ø¯ÙŠ";

    _amountController.text = _amount.toString();
    _descriptionController.text = _description;
  }

  @override
  void dispose() {
    _amountController.dispose();
    _descriptionController.dispose();
    super.dispose();
  }

  String _formatDate(DateTime date) {
    return DateFormat('yyyy/MM/dd').format(date);
  }

  // Convert Arabic category to current language
  String _getTranslatedCategory(String arabicCategory) {
    // Map Arabic categories to translation keys
    final categoryMap = {
      'Ø·Ø¹Ø§Ù…': 'food',
      'Ù…ÙˆØ§ØµÙ„Ø§Øª': 'transportation',
      'ØªØ³ÙˆÙ‚': 'marketing',
      'ØªØ±ÙÙŠÙ‡': 'entertainment',
      'ØµØ­Ø©': 'health',
      'ØªØ¹Ù„ÙŠÙ…': 'learn',
      'Ø³ÙƒÙ†': 'living',
      'ÙÙˆØ§ØªÙŠØ±': 'bills',
      'Ù…Ø±ØªØ¨': 'salary',
      'Ø§Ø³ØªØ«Ù…Ø§Ø±': 'investment',
      'Ù‡Ø¯Ø§ÙŠØ§': 'gifts',
      'Ø£Ø®Ø±Ù‰': 'others',
    };

    final key = categoryMap[arabicCategory] ?? 'others';
    return key.tr;
  }

  // Convert current language back to Arabic for saving
  String _getArabicCategory(String translatedCategory) {
    // Map translation back to Arabic
    final reverseMap = {
      'food': 'Ø·Ø¹Ø§Ù…',
      'transportation': 'Ù…ÙˆØ§ØµÙ„Ø§Øª',
      'marketing': 'ØªØ³ÙˆÙ‚',
      'entertainment': 'ØªØ±ÙÙŠÙ‡',
      'health': 'ØµØ­Ø©',
      'learn': 'ØªØ¹Ù„ÙŠÙ…',
      'living': 'Ø³ÙƒÙ†',
      'bills': 'ÙÙˆØ§ØªÙŠØ±',
      'salary': 'Ù…Ø±ØªØ¨',
      'investment': 'Ø§Ø³ØªØ«Ù…Ø§Ø±',
      'gifts': 'Ù‡Ø¯Ø§ÙŠØ§',
      'others': 'Ø£Ø®Ø±Ù‰',
    };

    // Find the Arabic equivalent
    for (var entry in reverseMap.entries) {
      if (entry.key.tr == translatedCategory) {
        return entry.value;
      }
    }

    // Fallback: check if it's already Arabic
    if (reverseMap.containsValue(translatedCategory)) {
      return translatedCategory;
    }

    return 'Ø£Ø®Ø±Ù‰';
  }

  // Same for payment methods
  String _getTranslatedPaymentMethod(String arabicMethod) {
    final paymentMap = {
      'Ù†Ù‚Ø¯ÙŠ': 'cash',
      'Ø¨Ø·Ø§Ù‚Ø© Ø§Ø¦ØªÙ…Ø§Ù†': 'credit_card',
      'ØªØ­ÙˆÙŠÙ„ Ø¨Ù†ÙƒÙŠ': 'bank_transfer',
      'Ù…Ø­ÙØ¸Ø© Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©': 'e_wallet',
      'Ø´ÙŠÙƒ': 'cheque',
    };

    final key = paymentMap[arabicMethod] ?? 'cash';
    return key.tr;
  }

  String _getArabicPaymentMethod(String translatedMethod) {
    final reverseMap = {
      'cash': 'Ù†Ù‚Ø¯ÙŠ',
      'credit_card': 'Ø¨Ø·Ø§Ù‚Ø© Ø§Ø¦ØªÙ…Ø§Ù†',
      'bank_transfer': 'ØªØ­ÙˆÙŠÙ„ Ø¨Ù†ÙƒÙŠ',
      'e_wallet': 'Ù…Ø­ÙØ¸Ø© Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©',
      'cheque': 'Ø´ÙŠÙƒ',
    };

    for (var entry in reverseMap.entries) {
      if (entry.key.tr == translatedMethod) {
        return entry.value;
      }
    }

    if (reverseMap.containsValue(translatedMethod)) {
      return translatedMethod;
    }

    return 'Ù†Ù‚Ø¯ÙŠ';
  }

  @override
  Widget build(BuildContext context) {
    // Get translated values for dropdowns
    var translatedCategory = _getTranslatedCategory(_category);
    var translatedPaymentMethod = _getTranslatedPaymentMethod(_paymentMethod);

    return Scaffold(
      appBar: AppBar(
        title: Text(_isIncome ? 'edit_income'.tr : 'edit_expense'.tr),
        centerTitle: true,
        actions: [
          IconButton(
            icon: const Icon(Icons.save),
            onPressed: _saveExpense,
            tooltip: 'save_changes'.tr,
          ),
        ],
      ),
      body: Form(
        key: _formKey,
        child: SingleChildScrollView(
          padding: const EdgeInsets.all(20),
          child: Column(
            children: [
              SwitchListTile(
                title: Text(_isIncome ? 'income'.tr : 'expense'.tr),
                value: _isIncome,
                onChanged: (v) => setState(() => _isIncome = v),
              ),
              const SizedBox(height: 16),
              TextFormField(
                controller: _amountController,
                keyboardType: TextInputType.number,
                decoration: InputDecoration(
                  labelText: 'amount'.tr,
                  border: const OutlineInputBorder(),
                ),
                validator: (v) => v == null || double.tryParse(v) == null
                    ? 'enter_valid_number'.tr
                    : null,
                onSaved: (v) => _amount = double.parse(v!),
              ),
              const SizedBox(height: 16),
              DropdownButtonFormField(
                value: translatedCategory, // Use translated value
                decoration: InputDecoration(
                  labelText: 'category'.tr,
                  border: const OutlineInputBorder(),
                ),
                items: [
                  "food".tr,
                  "transportation".tr,
                  "marketing".tr,
                  "entertainment".tr,
                  "health".tr,
                  "learn".tr,
                  "living".tr,
                  "bills".tr,
                  "salary".tr,
                  "investment".tr,
                  "gifts".tr,
                  "others".tr,
                ]
                    .map((e) => DropdownMenuItem(value: e, child: Text(e)))
                    .toList(),
                onChanged: (v) {
                  setState(() {
                    // Store the translated value, will convert back to Arabic when saving
                    translatedCategory = v!;
                    _category = _getArabicCategory(v);
                  });
                },
              ),
              const SizedBox(height: 16),
              ListTile(
                title: Text('date'.tr),
                subtitle: Text(_formatDate(_date)),
                trailing: const Icon(Icons.calendar_today),
                onTap: () async {
                  final picked = await showDatePicker(
                    context: context,
                    initialDate: _date,
                    firstDate: DateTime(2000),
                    lastDate: DateTime(2100),
                  );
                  if (picked != null) {
                    setState(() => _date = picked);
                  }
                },
              ),
              const SizedBox(height: 16),
              DropdownButtonFormField(
                value: translatedPaymentMethod,
                decoration: InputDecoration(
                  labelText: 'payment_method'.tr,
                  border: const OutlineInputBorder(),
                ),
                items: [
                  "cash".tr,
                  "credit_card".tr,
                  "bank_transfer".tr,
                  "e_wallet".tr,
                  "cheque".tr,
                ]
                    .map((e) => DropdownMenuItem(value: e, child: Text(e)))
                    .toList(),
                onChanged: (v) {
                  setState(() {
                    translatedPaymentMethod = v!;
                    _paymentMethod = _getArabicPaymentMethod(v);
                  });
                },
              ),
              const SizedBox(height: 16),
              TextFormField(
                controller: _descriptionController,
                maxLines: 3,
                decoration: InputDecoration(
                  labelText: 'description'.tr,
                  border: const OutlineInputBorder(),
                ),
                onSaved: (v) => _description = v ?? '',
              ),
              const SizedBox(height: 24),
              Row(
                children: [
                  Expanded(
                    child: ElevatedButton(
                      onPressed: _saveExpense,
                      child: Text('save_changes'.tr),
                    ),
                  ),
                  const SizedBox(width: 12),
                  Expanded(
                    child: OutlinedButton(
                      onPressed: () => Get.back(),
                      child: Text('cancel'.tr),
                    ),
                  ),
                ],
              ),
              const SizedBox(height: 16),
              ElevatedButton(
                onPressed: _deleteExpense,
                style: ElevatedButton.styleFrom(
                  backgroundColor: Colors.red,
                  foregroundColor: Colors.white,
                ),
                child: Text('delete_transaction'.tr),
              ),
            ],
          ),
        ),
      ),
    );
  }

  void _saveExpense() {
    if (!_formKey.currentState!.validate()) return;
    _formKey.currentState!.save();

    final expense = ExpenseEntity(
      id: widget.expenseData['id']?.toString(),
      amount: _amount,
      category: ExpenseCategory.fromString(_category),
      description: _description,
      date: _date,
      isIncome: _isIncome,
      paymentMethod: PaymentMethod.fromString(_paymentMethod),
    );

    _controller.updateExpense(widget.expenseIndex, expense);
    Get.back();
  }

  void _deleteExpense() {
    Get.defaultDialog(
      title: 'confirm_delete'.tr,
      middleText: 'delete_transaction_question'.tr,
      textConfirm: 'delete'.tr,
      textCancel: 'cancel'.tr,
      confirmTextColor: Colors.white,
      onConfirm: () {
        _controller.deleteExpense(widget.expenseIndex);
        Get.back();
        Get.back();
      },
    );
  }
}
===================== 
FILE: E:\My Mob Projects\3 Flutter abo hamza\demos\finance_app\lib\features\expense\presentation\pages\home_page.dart 
===================== 
// finance_app\lib\features\expense\presentation\pages\home_page.dart

import 'dart:ui' as ui;
import 'package:get/get.dart';
import 'package:flutter/material.dart';
import 'package:finance_app/core/models/enums.dart';
import 'package:finance_app/features/alerts/presentation/pages/alerts_settings_page.dart';
import 'package:finance_app/features/backup/presentation/pages/backup_page.dart';
import 'package:finance_app/features/expense/domain/entities/expense_entity.dart';
import 'package:finance_app/features/expense/presentation/pages/budget_page.dart';
import 'package:finance_app/features/expense/presentation/pages/edit_expense_page.dart';
import 'package:finance_app/features/expense/presentation/pages/reports_page.dart';
import 'package:finance_app/features/goals/presentation/pages/goals_list_page.dart';
import 'package:finance_app/features/search/presentation/controllers/expense_search_controller.dart';
import 'package:finance_app/features/search/presentation/pages/filter_page.dart';
import 'package:intl/intl.dart';

import '../controllers/expense_controller.dart';
import 'add_expense_page.dart';

class HomePage extends StatelessWidget {
  HomePage({super.key});

  final ExpenseController controller = Get.find();
  final ExpenseSearchController searchController =
      Get.find<ExpenseSearchController>(tag: ExpenseSearchController.TAG);

  void _handleMoreOptions(String value) {
    switch (value) {
      case 'goals':
        Get.to(() => GoalsListPage());
        break;

      case 'budget':
        Get.to(() => BudgetPage());
        break;

      case 'alerts':
        Get.to(() => AlertsSettingsPage());
        break;

      case 'backup':
        Get.to(() => BackupPage());
        break;

      case 'clear_data':
        Get.defaultDialog(
          title: 'clear_all_data'.tr,
          middleText: 'confirm_clear_all'.tr,
          textConfirm: 'yes'.tr,
          textCancel: 'no'.tr,
          confirmTextColor: Colors.white,
          onConfirm: () {
            controller.clearAllData();
            searchController.resetFilters();
            Get.back();
          },
        );
        break;

      case 'theme': // theme Switching
        Get.changeThemeMode(
          Get.isDarkMode ? ThemeMode.light : ThemeMode.dark,
        );
        Get.snackbar(
          Get.isDarkMode ? 'light_mode'.tr : 'dark_mode'.tr,
          'theme_changed'.tr,
          snackPosition: SnackPosition.BOTTOM,
          duration: const Duration(seconds: 2),
        );
        break;

      case 'language': // language Switching
        final isArabic = Get.locale?.languageCode == 'ar';
        Get.updateLocale(isArabic ? const Locale('en') : const Locale('ar'));
        Get.snackbar(
          isArabic ? 'English' : 'Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©',
          'language_changed'.tr,
          snackPosition: SnackPosition.BOTTOM,
          duration: const Duration(seconds: 2),
        );
        break;
    }
  }

  @override
  Widget build(BuildContext context) {
    return Directionality(
      textDirection: ui.TextDirection.rtl,
      child: Scaffold(
        appBar: AppBar(
          title: Text('app_title'.tr),
          centerTitle: true,
          actions: [
            IconButton(
              icon: const Icon(Icons.bar_chart, size: 22),
              onPressed: () {
                Get.to(() => ReportsPage());
              },
              tooltip: 'reports'.tr,
              padding: const EdgeInsets.all(4),
            ),
            PopupMenuButton<String>(
              icon: const Icon(Icons.more_vert, size: 22),
              tooltip: 'more_options'.tr,
              padding: const EdgeInsets.all(4),
              onSelected: (value) {
                _handleMoreOptions(value);
              },
              itemBuilder: (context) => [
                PopupMenuItem(
                  value: 'goals',
                  child: Row(
                    children: [
                      const Icon(Icons.flag, color: Colors.green, size: 20),
                      const SizedBox(width: 8),
                      Text('financial_goals'.tr),
                    ],
                  ),
                ),
                const PopupMenuDivider(),
                PopupMenuItem(
                  value: 'budget',
                  child: Row(
                    children: [
                      const Icon(Icons.account_balance_wallet,
                          color: Colors.blue, size: 20),
                      const SizedBox(width: 8),
                      Text('budget'.tr),
                    ],
                  ),
                ),
                PopupMenuItem(
                  value: 'alerts',
                  child: Row(
                    children: [
                      const Icon(Icons.notifications,
                          color: Colors.orange, size: 20),
                      const SizedBox(width: 8),
                      Text('alerts'.tr),
                    ],
                  ),
                ),
                PopupMenuItem(
                  value: 'backup',
                  child: Row(
                    children: [
                      const Icon(Icons.backup, color: Colors.green, size: 20),
                      const SizedBox(width: 8),
                      Text('backup'.tr),
                    ],
                  ),
                ),
                const PopupMenuDivider(),
                PopupMenuItem(
                  value: 'clear_data',
                  child: Row(
                    children: [
                      const Icon(Icons.delete_outline,
                          color: Colors.red, size: 20),
                      const SizedBox(width: 8),
                      Text('clear_all_data'.tr),
                    ],
                  ),
                ),
                const PopupMenuDivider(),
                PopupMenuItem(
                  value: 'theme',
                  child: Row(
                    children: [
                      Icon(
                        Get.isDarkMode ? Icons.light_mode : Icons.dark_mode,
                        color: Get.isDarkMode ? Colors.yellow : Colors.grey,
                        size: 20,
                      ),
                      const SizedBox(width: 8),
                      Text(Get.isDarkMode ? 'light_mode'.tr : 'dark_mode'.tr),
                    ],
                  ),
                ),
                PopupMenuItem(
                  value: 'language',
                  child: Row(
                    children: [
                      const Icon(Icons.language,
                          color: Colors.purple, size: 20),
                      const SizedBox(width: 8),
                      Text('language'.tr),
                    ],
                  ),
                ),
              ],
            ),
          ],
        ),
        body: Obx(() {
          if (controller.isLoading.value) {
            return const Center(child: CircularProgressIndicator());
          }

          return Column(
            children: [
              _buildSearchBar(),
              Expanded(
                child: Padding(
                  padding: const EdgeInsets.all(16.0),
                  child: Column(
                    crossAxisAlignment: CrossAxisAlignment.start,
                    children: [
                      // Summery card
                      Card(
                        elevation: 4,
                        shape: RoundedRectangleBorder(
                          borderRadius: BorderRadius.circular(16),
                        ),
                        child: Padding(
                          padding: const EdgeInsets.all(20.0),
                          child: Column(
                            children: [
                              Text(
                                'balance'.tr,
                                style: const TextStyle(
                                  fontSize: 14,
                                  color: Colors.grey,
                                ),
                              ),
                              const SizedBox(height: 8),
                              Text(
                                '${controller.balance.value.toStringAsFixed(2)} ${'currency_suffix'.tr}',
                                style: TextStyle(
                                  fontSize: 36,
                                  fontWeight: FontWeight.bold,
                                  color: controller.balance.value >= 0
                                      ? Colors.green
                                      : Colors.red,
                                ),
                              ),
                              const SizedBox(height: 16),
                              Row(
                                mainAxisAlignment:
                                    MainAxisAlignment.spaceAround,
                                children: [
                                  Column(
                                    children: [
                                      const Icon(Icons.arrow_downward,
                                          color: Colors.green),
                                      const SizedBox(height: 4),
                                      Text(
                                        'income'.tr,
                                        style:
                                            const TextStyle(color: Colors.grey),
                                      ),
                                      const SizedBox(height: 4),
                                      Text(
                                        controller.totalIncome.value
                                            .toStringAsFixed(2),
                                        style: const TextStyle(
                                          fontWeight: FontWeight.bold,
                                          color: Colors.green,
                                        ),
                                      ),
                                    ],
                                  ),
                                  Column(
                                    children: [
                                      const Icon(Icons.arrow_upward,
                                          color: Colors.red),
                                      const SizedBox(height: 4),
                                      Text(
                                        'expense'.tr,
                                        style:
                                            const TextStyle(color: Colors.grey),
                                      ),
                                      const SizedBox(height: 4),
                                      Text(
                                        controller.totalExpense.value
                                            .toStringAsFixed(2),
                                        style: const TextStyle(
                                          fontWeight: FontWeight.bold,
                                          color: Colors.red,
                                        ),
                                      ),
                                    ],
                                  ),
                                ],
                              ),
                            ],
                          ),
                        ),
                      ),

                      const SizedBox(height: 24),

                      // Transactions Section Title +  results count
                      Row(
                        mainAxisAlignment: MainAxisAlignment.spaceBetween,
                        children: [
                          Obx(() {
                            final filteredExpenses =
                                searchController.filteredExpenses;

                            final totalExpenses = controller.expenses.length;

                            if (searchController.searchQuery.value.isNotEmpty ||
                                searchController.selectedCategory.value !=
                                    'all'.tr ||
                                searchController.selectedType.value !=
                                    'all'.tr) {
                              return Column(
                                crossAxisAlignment: CrossAxisAlignment.start,
                                children: [
                                  Text(
                                    'search_results'.tr,
                                    style: const TextStyle(
                                      fontSize: 18,
                                      fontWeight: FontWeight.bold,
                                    ),
                                  ),
                                  Text(
                                    '${filteredExpenses.length} ${'of'.tr} ${totalExpenses} ${'transactions'.tr}',
                                    style: const TextStyle(
                                      fontSize: 12,
                                      color: Colors.grey,
                                    ),
                                  ),
                                ],
                              );
                            }

                            return Text(
                              'recent_transactions'.tr,
                              style: const TextStyle(
                                fontSize: 18,
                                fontWeight: FontWeight.bold,
                              ),
                            );
                          }),
                          Row(
                            children: [
                              if (searchController
                                      .searchQuery.value.isNotEmpty ||
                                  searchController.selectedCategory.value !=
                                      'all'.tr ||
                                  searchController.selectedType.value !=
                                      'all'.tr)
                                IconButton(
                                  icon: const Icon(Icons.clear, size: 20),
                                  onPressed: () {
                                    searchController.resetFilters();
                                  },
                                  tooltip: 'clear_filters'.tr,
                                ),
                              TextButton(
                                onPressed: () {
                                  Get.to(() => FilterPage());
                                },
                                child: Text('filter'.tr),
                              ),
                            ],
                          ),
                        ],
                      ),

                      //   Virtual Scrolling + Pull-to-Refresh
                      Expanded(
                        child: Obx(() {
                          final filteredExpenses =
                              searchController.filteredExpenses;

                          if (filteredExpenses.isEmpty) {
                            if (controller.expenses.isEmpty) {
                              return _buildEmptyState();
                            } else if (searchController
                                    .searchQuery.value.isNotEmpty ||
                                searchController.selectedCategory.value !=
                                    'all'.tr ||
                                searchController.selectedType.value !=
                                    'all'.tr) {
                              return _buildNoResultsState();
                            }
                            return _buildEmptyState();
                          }

                          // ğŸ”¥ Virtual Scrolling: display 100 items max
                          final displayExpenses =
                              filteredExpenses.take(100).toList();
                          final hasMoreTransactions =
                              filteredExpenses.length > 100;

                          return RefreshIndicator(
                            onRefresh: () async {
                              // ğŸ”„ Pull-to-Refresh:  Reload  date
                              await controller.loadExpenses();
                              searchController.invalidateCache();

                              // Success a light message
                              Get.snackbar(
                                'refreshed'.tr,
                                'data_refreshed_success'.tr,
                                snackPosition: SnackPosition.BOTTOM,
                                duration: const Duration(seconds: 2),
                                backgroundColor: Colors.green[100],
                                colorText: Colors.green[900],
                              );
                            },
                            child: ListView.builder(
                              itemCount: displayExpenses.length +
                                  (hasMoreTransactions ? 1 : 0),
                              itemBuilder: (context, index) {
                                // display more button [ if there are more]
                                if (hasMoreTransactions &&
                                    index == displayExpenses.length) {
                                  return _buildShowAllButton(
                                      filteredExpenses.length);
                                }

                                final expense = displayExpenses[index];

                                // search for the index  using id
                                final originalIndex = controller.expenses
                                    .indexWhere((e) => e.id == expense['id']);

                                //  adding dissmisable for swap item  remvoving
                                return _buildExpenseItemWithSwipe(
                                    expense, originalIndex);
                              },
                            ),
                          );
                        }),
                      ),
                    ],
                  ),
                ),
              ),
            ],
          );
        }),

        // Add new button
        floatingActionButton: FloatingActionButton.extended(
          onPressed: () {
            Get.to(() => const AddExpensePage());
          },
          icon: const Icon(Icons.add),
          label: Text('add_new'.tr),
          backgroundColor: Colors.blue,
          foregroundColor: Colors.white,
          elevation: 4,
          shape: RoundedRectangleBorder(
            borderRadius: BorderRadius.circular(16),
          ),
        ),
      ),
    );
  }

  Widget _buildSearchBar() {
    return Container(
      padding: const EdgeInsets.all(12),
      color: Get.isDarkMode ? Colors.grey[900] : Colors.grey[50],
      child: Row(
        children: [
          Expanded(
            child: TextField(
              controller: TextEditingController(
                text: searchController.searchQuery.value,
              ),
              decoration: InputDecoration(
                hintText: 'search_transactions'.tr,
                prefixIcon: const Icon(Icons.search),
                suffixIcon: searchController.searchQuery.value.isNotEmpty
                    ? IconButton(
                        icon: const Icon(Icons.clear, size: 20),
                        onPressed: () {
                          searchController.searchQuery.value = '';
                        },
                      )
                    : null,
                border: OutlineInputBorder(
                  borderRadius: BorderRadius.circular(12),
                ),
                filled: true,
                fillColor: Get.isDarkMode ? Colors.grey[800] : Colors.white,
                contentPadding: const EdgeInsets.symmetric(
                  horizontal: 16,
                  vertical: 12,
                ),
                hintStyle: TextStyle(
                  color: Get.isDarkMode ? Colors.grey[400] : Colors.grey[600],
                ),
              ),
              style: TextStyle(
                color: Get.isDarkMode ? Colors.white : Colors.black,
              ),
              onChanged: (value) {
                searchController.searchQuery.value = value;
              },
            ),
          ),
          const SizedBox(width: 8),
          IconButton(
            icon: const Icon(Icons.filter_list),
            onPressed: () {
              Get.to(() => FilterPage());
            },
            tooltip: 'advanced_filter'.tr,
            style: IconButton.styleFrom(
              backgroundColor: Colors.blue,
              foregroundColor: Colors.white,
              shape: RoundedRectangleBorder(
                borderRadius: BorderRadius.circular(12),
              ),
            ),
          ),
        ],
      ),
    );
  }

  Widget _buildEmptyState() {
    return Center(
        child: Column(
      mainAxisAlignment: MainAxisAlignment.center,
      children: [
        Icon(Icons.receipt_long, size: 64, color: Colors.grey[400]),
        const SizedBox(height: 16),
        Text(
          'no_transactions'.tr,
          style: const TextStyle(fontSize: 16, color: Colors.grey),
        ),
        const SizedBox(height: 8),
        Text(
          'start_first_transaction'.tr,
          style: const TextStyle(fontSize: 14, color: Colors.grey),
        ),
      ],
    ));
  }

  Widget _buildNoResultsState() {
    return Center(
      child: Column(
        mainAxisAlignment: MainAxisAlignment.center,
        children: [
          Icon(Icons.search_off, size: 64, color: Colors.grey[400]),
          const SizedBox(height: 16),
          Text(
            'no_search_results'.tr,
            style: const TextStyle(fontSize: 16, color: Colors.grey),
          ),
          const SizedBox(height: 8),
          Text(
            searchController.searchQuery.value.isNotEmpty
                ? '${'search'.tr}: "${searchController.searchQuery.value}"'
                : 'applied_filters'.tr,
            style: const TextStyle(fontSize: 14, color: Colors.grey),
          ),
          const SizedBox(height: 16),
          ElevatedButton(
            onPressed: () {
              searchController.resetFilters();
            },
            child: Text('clear_all_filters'.tr),
          ),
        ],
      ),
    );
  }

  // Show all button  for addion transacions
  Widget _buildShowAllButton(int totalTransactions) {
    return Container(
      margin: const EdgeInsets.symmetric(vertical: 12, horizontal: 16),
      child: OutlinedButton.icon(
        onPressed: () {
          // Ø¹Ø±Ø¶ ÙƒÙ„ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª ÙÙŠ ØµÙØ­Ø© Ù…Ù†ÙØµÙ„Ø© Ø£Ùˆ ØªÙˆØ³ÙŠØ¹ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©
          Get.defaultDialog(
            title: 'all_transactions'.tr,
            content: SizedBox(
              width: double.maxFinite,
              child: Text(
                '${'showing'.tr} 100 ${'of'.tr} $totalTransactions ${'transactions'.tr}\n${'consider_search_filter'.tr}',
                textAlign: TextAlign.center,
              ),
            ),
            textConfirm: 'ok'.tr,
            onConfirm: Get.back,
          );
        },
        icon: const Icon(Icons.unfold_more, size: 18),
        label: Text(
          '${'show_all'.tr} ($totalTransactions)',
          style: const TextStyle(fontSize: 14),
        ),
        style: OutlinedButton.styleFrom(
          minimumSize: const Size(double.infinity, 44),
          shape: RoundedRectangleBorder(
            borderRadius: BorderRadius.circular(12),
          ),
        ),
      ),
    );
  }

  //  Handling  Swipe to Delete process
  Widget _buildExpenseItemWithSwipe(dynamic expense, int index) {
    return Dismissible(
      key: Key(expense['id'] ?? UniqueKey().toString()),
      direction: DismissDirection.endToStart,
      background: _buildDismissibleBackground(),
      secondaryBackground: _buildDismissibleBackground(),
      confirmDismiss: (direction) async {
        return await _confirmDelete(index);
      },
      onDismissed: (direction) {
        if (index >= 0 && index < controller.expenses.length) {
          controller.deleteExpense(index);
          searchController.resetFilters();
          Get.snackbar(
            'deleted'.tr,
            'transaction_deleted_success'.tr,
            snackPosition: SnackPosition.BOTTOM,
            backgroundColor: Colors.green[100],
            colorText: Colors.green[900],
          );
        }
      },
      child: _buildExpenseItem(expense,
          index), // Calling the basic build function after swap  removing
    );
  }

  //  Building Swipe removing background
  Widget _buildDismissibleBackground() {
    return Container(
      decoration: BoxDecoration(
        color: Colors.red,
        borderRadius: BorderRadius.circular(12),
      ),
      alignment: Alignment.centerRight,
      padding: const EdgeInsets.symmetric(horizontal: 20),
      child: Row(
        mainAxisAlignment: MainAxisAlignment.end,
        children: [
          Icon(Icons.delete, color: Colors.white, size: 24),
          SizedBox(width: 8),
          Text(
            'delete'.tr,
            style: TextStyle(
              color: Colors.white,
              fontWeight: FontWeight.bold,
              fontSize: 16,
            ),
          ),
          SizedBox(width: 16),
        ],
      ),
    );
  }

  //  Delte confirmation  function
  Future<bool> _confirmDelete(int index) async {
    final result = await Get.defaultDialog<bool>(
      title: 'confirm_delete'.tr,
      middleText: 'delete_transaction_question'.tr,
      textConfirm: 'delete'.tr,
      textCancel: 'cancel'.tr,
      confirmTextColor: Colors.white,
      onConfirm: () => Get.back(result: true),
      onCancel: () => Get.back(result: false),
    );
    return result ?? false;
  }

  //  Basic funcion of  building  for transaction item
  Widget _buildExpenseItem(dynamic expense, int index) {
    return Card(
      margin: const EdgeInsets.only(bottom: 8),
      elevation: 2,
      shape: RoundedRectangleBorder(borderRadius: BorderRadius.circular(12)),
      child: Directionality(
        textDirection: ui.TextDirection.rtl,
        child: ListTile(
          leading: CircleAvatar(
            backgroundColor: expense['isIncome']
                ? Colors.green.withOpacity(0.1)
                : Colors.red.withOpacity(0.1),
            child: Icon(
              expense['isIncome'] ? Icons.download : Icons.upload,
              color: expense['isIncome'] ? Colors.green : Colors.red,
            ),
          ),
          title: Text(
            expense['category'],
            style: const TextStyle(fontWeight: FontWeight.w600, fontSize: 16),
          ),
          subtitle: Column(
            crossAxisAlignment: CrossAxisAlignment.start,
            children: [
              if (expense['description'].toString().isNotEmpty)
                Text(expense['description'].toString(),
                    style: const TextStyle(fontSize: 13)),
              const SizedBox(height: 2),
              Text(
                _formatDate(expense['date']),
                style: TextStyle(fontSize: 12, color: Colors.grey[600]),
              ),
            ],
          ),
          trailing: Row(
            mainAxisSize: MainAxisSize.min,
            children: [
              Text(
                '${expense['amount']} ${'currency_suffix'.tr}',
                style: TextStyle(
                  fontWeight: FontWeight.bold,
                  color: expense['isIncome'] ? Colors.green : Colors.red,
                  fontSize: 14,
                ),
              ),
              const SizedBox(width: 8),
              PopupMenuButton<String>(
                icon: const Icon(Icons.more_vert, size: 20),
                itemBuilder: (context) => [
                  PopupMenuItem(
                    value: 'edit',
                    child: Row(
                      children: [
                        const Icon(Icons.edit, size: 18, color: Colors.blue),
                        const SizedBox(width: 8),
                        Text('edit'.tr),
                      ],
                    ),
                  ),
                  PopupMenuItem(
                    value: 'delete',
                    child: Row(
                      children: [
                        const Icon(Icons.delete, size: 18, color: Colors.red),
                        const SizedBox(width: 8),
                        Text('delete'.tr),
                      ],
                    ),
                  ),
                  PopupMenuItem(
                    value: 'duplicate',
                    child: Row(
                      children: [
                        const Icon(Icons.content_copy,
                            size: 18, color: Colors.purple),
                        const SizedBox(width: 8),
                        Text('duplicate'.tr),
                      ],
                    ),
                  ),
                ],
                onSelected: (value) {
                  _handleExpenseAction(value, index, expense);
                },
              ),
            ],
          ),
          onTap: () {
            _showExpenseDetails(expense, index);
          },
        ),
      ),
    );
  }

  String _formatDate(String dateString) {
    try {
      final date = DateTime.parse(dateString);
      return DateFormat('yyyy/MM/dd', Get.locale?.languageCode ?? 'en')
          .format(date);
    } catch (e) {
      return dateString;
    }
  }

  void _showExpenseDetails(dynamic expense, int index) {
    Get.bottomSheet(
      Container(
        padding: const EdgeInsets.all(20),
        decoration: BoxDecoration(
          color: Get.isDarkMode ? Colors.grey[900] : Colors.white,
          borderRadius: const BorderRadius.only(
            topLeft: Radius.circular(20),
            topRight: Radius.circular(20),
          ),
        ),
        child: Column(
          mainAxisSize: MainAxisSize.min,
          crossAxisAlignment: CrossAxisAlignment.start,
          children: [
            Center(
              child: Container(
                width: 40,
                height: 5,
                decoration: BoxDecoration(
                  color: Colors.grey[300],
                  borderRadius: BorderRadius.circular(3),
                ),
              ),
            ),
            const SizedBox(height: 20),
            Text(
              'transaction_details'.tr,
              style: TextStyle(
                fontSize: 18,
                fontWeight: FontWeight.bold,
                color: Colors.blue[800],
              ),
            ),
            const SizedBox(height: 16),
            _buildDetailRow('${'amount'.tr}:',
                '${expense['amount']} ${'currency_suffix'.tr}'),
            _buildDetailRow('${'type'.tr}:',
                expense['isIncome'] ? 'income'.tr : 'expense'.tr),
            _buildDetailRow('${'category'.tr}:', expense['category']),
            if (expense['description'].toString().isNotEmpty)
              _buildDetailRow(
                  '${'description'.tr}:', expense['description'].toString()),
            _buildDetailRow('${'date'.tr}:', _formatDate(expense['date'])),
            _buildDetailRow('${'payment_method'.tr}:',
                expense['paymentMethod'] ?? 'cash'.tr),
            const SizedBox(height: 20),
            Row(
              children: [
                Expanded(
                  child: OutlinedButton(
                    onPressed: () => Get.back(),
                    child: Text('close'.tr),
                  ),
                ),
                const SizedBox(width: 10),
                Expanded(
                  child: ElevatedButton(
                    onPressed: () {
                      Get.back();
                      Get.defaultDialog(
                        title: 'confirm_delete'.tr,
                        middleText: 'delete_transaction_question'.tr,
                        textConfirm: 'delete'.tr,
                        textCancel: 'cancel'.tr,
                        confirmTextColor: Colors.white,
                        onConfirm: () {
                          if (index >= 0 &&
                              index < controller.expenses.length) {
                            controller.deleteExpense(index);
                            searchController.resetFilters();
                            Get.back();
                          } else {
                            Get.snackbar(
                              'error'.tr,
                              'transaction_not_found'.tr,
                              snackPosition: SnackPosition.BOTTOM,
                            );
                          }
                        },
                      );
                    },
                    style: ElevatedButton.styleFrom(
                      backgroundColor: Colors.red,
                    ),
                    child: Text('delete'.tr),
                  ),
                ),
              ],
            ),
          ],
        ),
      ),
    );
  }

  void _handleExpenseAction(String action, int index, dynamic expense) {
    switch (action) {
      case 'edit':
        _editExpense(index, expense);
        break;
      case 'delete':
        _deleteExpense(index);
        break;
      case 'duplicate':
        _duplicateExpense(expense);
        break;
    }
  }

  void _editExpense(int index, dynamic expense) {
    Get.to(() => EditExpensePage(
          expenseIndex: index,
          expenseData: expense,
        ));
  }

  void _deleteExpense(int index) {
    Get.defaultDialog(
      title: 'confirm_delete'.tr,
      middleText: 'delete_transaction_question'.tr,
      textConfirm: 'delete'.tr,
      textCancel: 'cancel'.tr,
      confirmTextColor: Colors.white,
      onConfirm: () {
        if (index >= 0 && index < controller.expenses.length) {
          controller.deleteExpense(index);
          searchController.resetFilters();
          Get.back();
          Get.snackbar(
            'deleted'.tr,
            'transaction_deleted_success'.tr,
            snackPosition: SnackPosition.BOTTOM,
            backgroundColor: Colors.green[100],
            colorText: Colors.green[900],
          );
        }
      },
    );
  }

  void _duplicateExpense(dynamic expense) {
    try {
      final newExpense = ExpenseEntity(
        amount: (expense['amount'] as num).toDouble(),
        category: ExpenseCategory.fromString(expense['category']),
        description: expense['description']?.toString() ?? '',
        date: DateTime.now(),
        isIncome: expense['isIncome'] == true,
        paymentMethod: PaymentMethod.fromString(
          expense['paymentMethod']?.toString() ?? 'cash'.tr,
        ),
      );

      controller.addExpense(newExpense);

      Get.snackbar(
        'duplicated'.tr,
        'transaction_duplicated_success'.tr,
        snackPosition: SnackPosition.BOTTOM,
        backgroundColor: Colors.blue[100],
        colorText: Colors.blue[900],
      );
    } catch (e) {
      Get.snackbar(
        'error'.tr,
        'duplicate_failed'.tr,
        snackPosition: SnackPosition.BOTTOM,
      );
    }
  }

  Widget _buildDetailRow(String label, String value) {
    return Padding(
        padding: const EdgeInsets.symmetric(vertical: 6),
        child: Row(
          crossAxisAlignment: CrossAxisAlignment.start,
          children: [
            SizedBox(
              width: 100,
              child: Text(
                label,
                style: const TextStyle(
                  fontWeight: FontWeight.bold,
                  color: Colors.grey,
                ),
              ),
            ),
            const SizedBox(width: 10),
            Expanded(
              child: Text(
                value,
                style: TextStyle(
                  color: Get.isDarkMode ? Colors.white : Colors.black87,
                ),
              ),
            ),
          ],
        ));
  }
}
===================== 
FILE: E:\My Mob Projects\3 Flutter abo hamza\demos\finance_app\lib\features\expense\presentation\pages\monthly_analysis_page.dart 
===================== 
// lib/features/expense/presentation/pages/monthly_analysis_page.dart

import 'package:flutter/material.dart';
import 'package:get/get.dart';
import 'package:fl_chart/fl_chart.dart';
import '../controllers/expense_controller.dart';

class MonthlyAnalysisPage extends StatelessWidget {
  MonthlyAnalysisPage({super.key});
  final ExpenseController controller = Get.find();

  @override
  Widget build(BuildContext context) {
    final monthlyData = _getMonthlyData();

    return Scaffold(
      appBar: AppBar(
        title: Text('monthly_analysis_comparison'.tr),
        centerTitle: true,
      ),
      body: monthlyData.isEmpty
          ? _buildEmptyState()
          : SingleChildScrollView(
              padding: const EdgeInsets.all(16),
              child: Column(
                children: [
                  // 1. Statistics flow charts
                  Card(
                    elevation: 4,
                    shape: RoundedRectangleBorder(
                      borderRadius: BorderRadius.circular(16),
                    ),
                    child: Padding(
                      padding: const EdgeInsets.all(16),
                      child: Column(
                        children: [
                          Text(
                            'monthly_comparison'.tr,
                            style: TextStyle(
                              fontSize: 16,
                              fontWeight: FontWeight.bold,
                            ),
                          ),
                          const SizedBox(height: 16),
                          SizedBox(
                            height: 300,
                            child: _buildMonthlyChart(monthlyData),
                          ),
                          const SizedBox(height: 16),
                          _buildChartLegend(),
                        ],
                      ),
                    ),
                  ),

                  const SizedBox(height: 24),

                  // 2. Statistics  Tables
                  Card(
                    elevation: 4,
                    shape: RoundedRectangleBorder(
                      borderRadius: BorderRadius.circular(16),
                    ),
                    child: Padding(
                      padding: const EdgeInsets.all(16),
                      child: Column(
                        crossAxisAlignment: CrossAxisAlignment.start,
                        children: [
                          Text(
                            'detailed_comparison'.tr,
                            style: TextStyle(
                              fontSize: 16,
                              fontWeight: FontWeight.bold,
                            ),
                          ),
                          const SizedBox(height: 16),
                          _buildComparisonTable(monthlyData),
                        ],
                      ),
                    ),
                  ),

                  const SizedBox(height: 24),

                  // 3. Addition Statistics
                  _buildAdditionalStats(monthlyData),
                ],
              ),
            ),
    );
  }

  // ============ Assisting fuctions   ============

  List<Map<String, dynamic>> _getMonthlyData() {
    final List<Map<String, dynamic>> data = [];
    final now = DateTime.now();

    for (int i = 5; i >= 0; i--) {
      final month = DateTime(now.year, now.month - i, 1);
      final monthName = _getMonthName(month.month);

      final monthlyExpenses = controller.expenses.where((expense) {
        return expense.date.month == month.month &&
            expense.date.year == month.year;
      }).toList();

      double income = 0;
      double expense = 0;

      for (var exp in monthlyExpenses) {
        if (exp.isIncome) {
          income += exp.amount;
        } else {
          expense += exp.amount;
        }
      }

      data.add({
        'month': monthName,
        'monthShort': _getMonthShortName(month.month),
        'year': month.year,
        'income': income,
        'expense': expense,
        'balance': income - expense,
        'transactionCount': monthlyExpenses.length,
      });
    }

    return data;
  }

  Widget _buildMonthlyChart(List<Map<String, dynamic>> data) {
    return BarChart(
      BarChartData(
        alignment: BarChartAlignment.spaceAround,
        maxY: _getMaxAmount(data) * 1.2,
        minY: 0,
        barTouchData: BarTouchData(
          enabled: true,
          touchTooltipData: BarTouchTooltipData(
            tooltipBgColor: Colors.white,
            tooltipPadding: const EdgeInsets.all(8),
            getTooltipItem: (group, groupIndex, rod, rodIndex) {
              final month = data[groupIndex]['monthShort'];
              final value = rod.toY.toStringAsFixed(2);
              final type = rodIndex == 0 ? 'Ø§Ù„Ø¯Ø®Ù„' : 'Ø§Ù„Ù…ØµØ±ÙˆÙ';
              return BarTooltipItem(
                '$month\n$type: $value Ø¬.Ù…',
                const TextStyle(
                  color: Colors.black,
                  fontWeight: FontWeight.bold,
                ),
              );
            },
          ),
        ),
        titlesData: FlTitlesData(
          show: true,
          bottomTitles: AxisTitles(
            sideTitles: SideTitles(
              showTitles: true,
              getTitlesWidget: (value, meta) {
                final index = value.toInt();
                if (index >= 0 && index < data.length) {
                  return Padding(
                    padding: const EdgeInsets.only(top: 8),
                    child: Text(
                      data[index]['monthShort'],
                      style: const TextStyle(
                        fontSize: 12,
                        color: Colors.grey,
                      ),
                    ),
                  );
                }
                return const Text('');
              },
              reservedSize: 32,
            ),
          ),
          leftTitles: AxisTitles(
            sideTitles: SideTitles(
              showTitles: true,
              interval: _getChartInterval(data),
              getTitlesWidget: (value, meta) {
                return Text(
                  '${value.toInt()}',
                  style: const TextStyle(
                    fontSize: 10,
                    color: Colors.grey,
                  ),
                );
              },
              reservedSize: 40,
            ),
          ),
          topTitles: AxisTitles(sideTitles: SideTitles(showTitles: false)),
          rightTitles: AxisTitles(sideTitles: SideTitles(showTitles: false)),
        ),
        gridData: FlGridData(
          show: true,
          drawVerticalLine: false,
          horizontalInterval: _getChartInterval(data),
        ),
        borderData: FlBorderData(
          show: true,
          border: const Border(
            bottom: BorderSide(color: Colors.grey, width: 1),
            left: BorderSide(color: Colors.grey, width: 1),
          ),
        ),
        barGroups: List.generate(data.length, (index) {
          return BarChartGroupData(
            x: index,
            groupVertically: true,
            barRods: [
              BarChartRodData(
                toY: data[index]['income'],
                color: Colors.green,
                width: 16,
                borderRadius: BorderRadius.circular(4),
              ),
              BarChartRodData(
                toY: data[index]['expense'],
                color: Colors.red,
                width: 16,
                borderRadius: BorderRadius.circular(4),
              ),
            ],
          );
        }),
      ),
    );
  }

  Widget _buildChartLegend() {
    return Row(
      mainAxisAlignment: MainAxisAlignment.center,
      children: [
        _buildLegendItem('Ø§Ù„Ø¯Ø®Ù„', Colors.green),
        const SizedBox(width: 24),
        _buildLegendItem('Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª', Colors.red),
      ],
    );
  }

  Widget _buildLegendItem(String text, Color color) {
    return Row(
      children: [
        Container(
          width: 16,
          height: 16,
          decoration: BoxDecoration(
            color: color,
            borderRadius: BorderRadius.circular(4),
          ),
        ),
        const SizedBox(width: 8),
        Text(
          text,
          style: const TextStyle(fontSize: 14),
        ),
      ],
    );
  }

  Widget _buildComparisonTable(List<Map<String, dynamic>> data) {
    return SingleChildScrollView(
      scrollDirection: Axis.horizontal,
      child: DataTable(
        columnSpacing: 24,
        dataRowMinHeight: 40,
        columns: [
          DataColumn(label: Text('month'.tr)),
          DataColumn(
              label: Text('income_header'.tr, textAlign: TextAlign.center)),
          DataColumn(
              label: Text('expense_header'.tr, textAlign: TextAlign.center)),
          DataColumn(
              label: Text('balance_header'.tr, textAlign: TextAlign.center)),
          DataColumn(
              label:
                  Text('transactions_header'.tr, textAlign: TextAlign.center)),
        ],
        rows: data.map((monthData) {
          return DataRow(cells: [
            DataCell(Text('${monthData['month']}')),
            DataCell(Text(
              '${monthData['income'].toStringAsFixed(2)}',
              style: TextStyle(color: Colors.green[700]),
              textAlign: TextAlign.center,
            )),
            DataCell(Text(
              '${monthData['expense'].toStringAsFixed(2)}',
              style: TextStyle(color: Colors.red[700]),
              textAlign: TextAlign.center,
            )),
            DataCell(Text(
              '${monthData['balance'].toStringAsFixed(2)}',
              style: TextStyle(
                color: monthData['balance'] >= 0 ? Colors.green : Colors.red,
                fontWeight: FontWeight.bold,
              ),
              textAlign: TextAlign.center,
            )),
            DataCell(Text(
              monthData['transactionCount'].toString(),
              textAlign: TextAlign.center,
            )),
          ]);
        }).toList(),
      ),
    );
  }

  Widget _buildAdditionalStats(List<Map<String, dynamic>> data) {
    final totalTransactions =
        data.fold(0, (sum, month) => sum + (month['transactionCount'] as int));

    final totalBalance =
        data.fold(0.0, (sum, month) => sum + (month['balance'] as double));

    return Row(
      children: [
        Expanded(
          child: Card(
            child: Padding(
              padding: const EdgeInsets.all(16),
              child: Column(
                children: [
                  const Icon(Icons.receipt_long, color: Colors.blue, size: 32),
                  const SizedBox(height: 8),
                  Text(
                    totalTransactions.toString(),
                    style: const TextStyle(
                      fontSize: 24,
                      fontWeight: FontWeight.bold,
                      color: Colors.blue,
                    ),
                  ),
                  Text('total_transactions_stat'.tr,
                      style: TextStyle(fontSize: 12)),
                ],
              ),
            ),
          ),
        ),
        const SizedBox(width: 16),
        Expanded(
          child: Card(
            child: Padding(
              padding: const EdgeInsets.all(16),
              child: Column(
                children: [
                  Icon(
                    totalBalance >= 0 ? Icons.trending_up : Icons.trending_down,
                    color: totalBalance >= 0 ? Colors.green : Colors.red,
                    size: 32,
                  ),
                  const SizedBox(height: 8),
                  Text(
                    totalBalance.toStringAsFixed(2),
                    style: TextStyle(
                      fontSize: 24,
                      fontWeight: FontWeight.bold,
                      color: totalBalance >= 0 ? Colors.green : Colors.red,
                    ),
                  ),
                  Text('net_period'.tr, style: TextStyle(fontSize: 12)),
                ],
              ),
            ),
          ),
        ),
      ],
    );
  }

  Widget _buildEmptyState() {
    return Center(
      child: Column(
        mainAxisAlignment: MainAxisAlignment.center,
        children: [
          Icon(
            Icons.bar_chart,
            size: 64,
            color: Colors.grey[400],
          ),
          const SizedBox(height: 16),
          Text(
            'no_analysis_data'.tr,
            style: TextStyle(
              fontSize: 16,
              color: Colors.grey,
            ),
          ),
          const SizedBox(height: 8),
          Text(
            'add_transactions_for_analysis'.tr,
            style: TextStyle(
              fontSize: 14,
              color: Colors.grey,
            ),
          ),
        ],
      ),
    );
  }

  double _getMaxAmount(List<Map<String, dynamic>> data) {
    double max = 0;
    for (var item in data) {
      if ((item['income'] as double) > max) max = item['income'] as double;
      if ((item['expense'] as double) > max) max = item['expense'] as double;
    }
    return max == 0 ? 1000 : max;
  }

  double _getChartInterval(List<Map<String, dynamic>> data) {
    final maxAmount = _getMaxAmount(data);
    if (maxAmount < 1000) return 200;
    if (maxAmount < 5000) return 1000;
    if (maxAmount < 20000) return 5000;
    return 10000;
  }

  String _getMonthName(int month) {
    final months = [
      'ÙŠÙ†Ø§ÙŠØ±',
      'ÙØ¨Ø±Ø§ÙŠØ±',
      'Ù…Ø§Ø±Ø³',
      'Ø£Ø¨Ø±ÙŠÙ„',
      'Ù…Ø§ÙŠÙˆ',
      'ÙŠÙˆÙ†ÙŠÙˆ',
      'ÙŠÙˆÙ„ÙŠÙˆ',
      'Ø£ØºØ³Ø·Ø³',
      'Ø³Ø¨ØªÙ…Ø¨Ø±',
      'Ø£ÙƒØªÙˆØ¨Ø±',
      'Ù†ÙˆÙÙ…Ø¨Ø±',
      'Ø¯ÙŠØ³Ù…Ø¨Ø±'
    ];
    return months[month - 1];
  }

  String _getMonthShortName(int month) {
    final months = [
      'ÙŠÙ†Ø§',
      'ÙØ¨Ø±',
      'Ù…Ø§Ø±',
      'Ø£Ø¨Ø±',
      'Ù…Ø§ÙŠ',
      'ÙŠÙˆÙ†',
      'ÙŠÙˆÙ„',
      'Ø£ØºØ³',
      'Ø³Ø¨Øª',
      'Ø£ÙƒØª',
      'Ù†ÙˆÙ',
      'Ø¯ÙŠØ³'
    ];
    return months[month - 1];
  }
}
===================== 
FILE: E:\My Mob Projects\3 Flutter abo hamza\demos\finance_app\lib\features\expense\presentation\pages\reports_page.dart 
===================== 
// lib/features/expense/presentation/pages/reports_page.dart

import 'package:finance_app/features/expense/presentation/controllers/expense_controller.dart';
import 'package:flutter/material.dart';
import 'package:get/get.dart';
import 'package:intl/intl.dart';
import '../controllers/expense_controller.dart';
import 'monthly_analysis_page.dart';
import 'package:finance_app/features/export/presentation/export_service.dart';

class ReportsPage extends StatelessWidget {
  ReportsPage({super.key});
  final ExpenseController controller = Get.find();

  @override
  Widget build(BuildContext context) {
    final monthlyStats = controller.getMonthlyStats();
    final incomeCategories = controller.getExpensesByCategory(true);
    final expenseCategories = controller.getExpensesByCategory(false);

    return Scaffold(
      appBar: AppBar(
        title: Text('reports'.tr),
        centerTitle: true,
      ),
      body: SingleChildScrollView(
        padding: const EdgeInsets.all(16),
        child: Column(
          crossAxisAlignment: CrossAxisAlignment.start,
          children: [
            // Monthly Summmery Card  :
            Card(
              elevation: 4,
              shape: RoundedRectangleBorder(
                borderRadius: BorderRadius.circular(16),
              ),
              child: Padding(
                padding: const EdgeInsets.all(20),
                child: Column(
                  children: [
                    Row(
                      mainAxisAlignment: MainAxisAlignment.center,
                      children: [
                        const Icon(Icons.calendar_today, color: Colors.blue),
                        const SizedBox(width: 8),
                        Text(
                          '${'statistics'.tr} ${_getCurrentMonth()}',
                          style: const TextStyle(
                            fontSize: 18,
                            fontWeight: FontWeight.bold,
                            color: Colors.blue,
                          ),
                        ),
                      ],
                    ),
                    const SizedBox(height: 20),

                    // Quick Statics :
                    Row(
                      mainAxisAlignment: MainAxisAlignment.spaceAround,
                      children: [
                        _buildStatItem(
                          'transactions'.tr,
                          '${monthlyStats['count']}',
                          Icons.receipt,
                          Colors.blue,
                        ),
                        _buildStatItem(
                          'income'.tr,
                          '${(monthlyStats['income'] as double).toStringAsFixed(2)} ${'currency_suffix'.tr}',
                          Icons.arrow_downward,
                          Colors.green,
                        ),
                        _buildStatItem(
                          'expense'.tr,
                          '${(monthlyStats['expense'] as double).toStringAsFixed(2)} ${'currency_suffix'.tr}',
                          Icons.arrow_upward,
                          Colors.red,
                        ),
                      ],
                    ),

                    const SizedBox(height: 20),

                    // Month Balance :
                    Container(
                      padding: const EdgeInsets.all(12),
                      decoration: BoxDecoration(
                        color: (monthlyStats['balance'] as double) >= 0
                            ? Colors.green.withOpacity(0.1)
                            : Colors.red.withOpacity(0.1),
                        borderRadius: BorderRadius.circular(12),
                      ),
                      child: Row(
                        mainAxisAlignment: MainAxisAlignment.center,
                        children: [
                          Icon(
                            (monthlyStats['balance'] as double) >= 0
                                ? Icons.trending_up
                                : Icons.trending_down,
                            color: (monthlyStats['balance'] as double) >= 0
                                ? Colors.green
                                : Colors.red,
                          ),
                          const SizedBox(width: 10),
                          Text(
                            '${'monthly_balance'.tr}: ${(monthlyStats['balance'] as double).toStringAsFixed(2)} ${'currency_suffix'.tr}',
                            style: TextStyle(
                              fontSize: 16,
                              fontWeight: FontWeight.bold,
                              color: (monthlyStats['balance'] as double) >= 0
                                  ? Colors.green
                                  : Colors.red,
                            ),
                          ),
                        ],
                      ),
                    ),
                  ],
                ),
              ),
            ),

            const SizedBox(height: 24),

            // Distributing  Income according to  Categories
            _buildCategorySection(
              'income_distribution'.tr,
              incomeCategories,
              Colors.green,
              Icons.arrow_downward,
            ),

            const SizedBox(height: 24),

            //  Distributing Exense  according to  Categories
            _buildCategorySection(
              'expense_distribution'.tr,
              expenseCategories,
              Colors.red,
              Icons.arrow_upward,
            ),

            const SizedBox(height: 24),

            // Addition Statics
            _buildAdditionalStats(),

            const SizedBox(height: 24),

            //  Quick procedures
            Card(
              elevation: 4,
              shape: RoundedRectangleBorder(
                borderRadius: BorderRadius.circular(16),
              ),
              child: Column(
                children: [
                  ListTile(
                    leading: const Icon(Icons.download, color: Colors.blue),
                    title: Text('export_data'.tr),
                    subtitle: Text('save_copy'.tr),
                    trailing: const Icon(Icons.chevron_right),
                    onTap: _exportData,
                  ),
                  const Divider(height: 0),
                  ListTile(
                    leading: const Icon(Icons.insights, color: Colors.purple),
                    title: Text('monthly_analysis'.tr),
                    subtitle: Text('compare_previous_months'.tr),
                    trailing: const Icon(Icons.chevron_right),
                    onTap: () {
                      Get.to(() => MonthlyAnalysisPage());
                    },
                  ),
                ],
              ),
            ),

            const SizedBox(height: 32),
          ],
        ),
      ),
    );
  }

  Widget _buildStatItem(
      String title, String value, IconData icon, Color color) {
    return Column(
      children: [
        Container(
          padding: const EdgeInsets.all(12),
          decoration: BoxDecoration(
            color: color.withOpacity(0.1),
            shape: BoxShape.circle,
          ),
          child: Icon(icon, color: color, size: 24),
        ),
        const SizedBox(height: 8),
        Text(
          title,
          style: const TextStyle(
            fontSize: 12,
            color: Colors.grey,
          ),
        ),
        const SizedBox(height: 4),
        Text(
          value,
          style: TextStyle(
            fontSize: 14,
            fontWeight: FontWeight.bold,
            color: color,
          ),
        ),
      ],
    );
  }

  Widget _buildCategorySection(
    String title,
    Map<String, double> categories,
    Color color,
    IconData icon,
  ) {
    final total = categories.values.fold(0.0, (sum, value) => sum + value);

    return Card(
      elevation: 4,
      shape: RoundedRectangleBorder(
        borderRadius: BorderRadius.circular(16),
      ),
      child: Padding(
        padding: const EdgeInsets.all(16),
        child: Column(
          crossAxisAlignment: CrossAxisAlignment.start,
          children: [
            Row(
              children: [
                Icon(icon, color: color),
                const SizedBox(width: 8),
                Text(
                  title,
                  style: const TextStyle(
                    fontSize: 16,
                    fontWeight: FontWeight.bold,
                  ),
                ),
                const Spacer(),
                Text(
                  '${total.toStringAsFixed(2)} ${'currency_suffix'.tr}',
                  style: TextStyle(
                    fontWeight: FontWeight.bold,
                    color: color,
                  ),
                ),
              ],
            ),
            const SizedBox(height: 12),
            if (categories.isEmpty)
              Center(
                child: Padding(
                  padding: const EdgeInsets.all(16),
                  child: Text(
                    'no_data'.tr,
                    style: const TextStyle(color: Colors.grey),
                  ),
                ),
              )
            else
              ...categories.entries.map((entry) {
                final percentage = total > 0 ? (entry.value / total * 100) : 0;

                return Padding(
                  padding: const EdgeInsets.symmetric(vertical: 8),
                  child: Column(
                    children: [
                      Row(
                        children: [
                          Expanded(
                            child: Text(
                              entry.key,
                              style: const TextStyle(fontSize: 14),
                            ),
                          ),
                          Text(
                            '${entry.value.toStringAsFixed(2)} ${'currency_suffix'.tr}',
                            style: const TextStyle(
                              fontSize: 14,
                              fontWeight: FontWeight.w600,
                            ),
                          ),
                        ],
                      ),
                      const SizedBox(height: 4),
                      Row(
                        children: [
                          Expanded(
                            flex: 8,
                            child: LinearProgressIndicator(
                              value: percentage / 100,
                              backgroundColor: color.withOpacity(0.2),
                              valueColor: AlwaysStoppedAnimation<Color>(color),
                              minHeight: 6,
                              borderRadius: BorderRadius.circular(3),
                            ),
                          ),
                          const SizedBox(width: 8),
                          Expanded(
                            flex: 2,
                            child: Text(
                              '${percentage.toStringAsFixed(1)}%',
                              style: TextStyle(
                                fontSize: 12,
                                color: Colors.grey[600],
                              ),
                            ),
                          ),
                        ],
                      ),
                    ],
                  ),
                );
              }).toList(),
          ],
        ),
      ),
    );
  }

  Widget _buildAdditionalStats() {
    final recentExpenses = controller.recentExpenses;
    final totalExpenses = controller.expenseCount;

    return Card(
      elevation: 4,
      shape: RoundedRectangleBorder(
        borderRadius: BorderRadius.circular(16),
      ),
      child: Padding(
        padding: const EdgeInsets.all(16),
        child: Column(
          crossAxisAlignment: CrossAxisAlignment.start,
          children: [
            Text(
              'additional_stats'.tr,
              style: const TextStyle(
                fontSize: 16,
                fontWeight: FontWeight.bold,
              ),
            ),
            const SizedBox(height: 12),
            Row(
              children: [
                Expanded(
                  child: Column(
                    children: [
                      const Icon(Icons.receipt_long,
                          color: Colors.blue, size: 24),
                      const SizedBox(height: 8),
                      Text(
                        totalExpenses.toString(),
                        style: const TextStyle(
                          fontSize: 18,
                          fontWeight: FontWeight.bold,
                        ),
                      ),
                      Text(
                        'total_transactions'.tr,
                        style:
                            const TextStyle(fontSize: 12, color: Colors.grey),
                      ),
                    ],
                  ),
                ),
                Expanded(
                  child: Column(
                    children: [
                      const Icon(Icons.access_time,
                          color: Colors.orange, size: 24),
                      const SizedBox(height: 8),
                      Text(
                        recentExpenses.length.toString(),
                        style: const TextStyle(
                          fontSize: 18,
                          fontWeight: FontWeight.bold,
                        ),
                      ),
                      Text(
                        'recent_transactions'.tr,
                        style:
                            const TextStyle(fontSize: 12, color: Colors.grey),
                      ),
                    ],
                  ),
                ),
                Expanded(
                  child: Column(
                    children: [
                      Icon(
                        controller.balance.value >= 0
                            ? Icons.trending_up
                            : Icons.trending_down,
                        color: controller.balance.value >= 0
                            ? Colors.green
                            : Colors.red,
                        size: 24,
                      ),
                      const SizedBox(height: 8),
                      Text(
                        controller.balance.value.toStringAsFixed(2),
                        style: TextStyle(
                          fontSize: 18,
                          fontWeight: FontWeight.bold,
                          color: controller.balance.value >= 0
                              ? Colors.green
                              : Colors.red,
                        ),
                      ),
                      Text(
                        'current_balance'.tr,
                        style:
                            const TextStyle(fontSize: 12, color: Colors.grey),
                      ),
                    ],
                  ),
                ),
              ],
            ),
          ],
        ),
      ),
    );
  }

  String _getCurrentMonth() {
    final now = DateTime.now();
    final months = [
      'january'.tr,
      'february'.tr,
      'march'.tr,
      'april'.tr,
      'may'.tr,
      'june'.tr,
      'july'.tr,
      'august'.tr,
      'september'.tr,
      'october'.tr,
      'november'.tr,
      'december'.tr,
    ];
    return '${months[now.month - 1]} ${now.year}';
  }

  void _exportData() async {
    try {
      if (controller.expenses.isEmpty) {
        Get.snackbar(
          'no_transactions_to_export'.tr,
          'no_transactions_to_export'.tr,
          snackPosition: SnackPosition.BOTTOM,
          backgroundColor: Colors.orange[100],
          colorText: Colors.orange[900],
        );
        return;
      }

      final result = await ExportService.exportData(controller.expensesAsMap);

      if (result == true) {
        Get.snackbar(
          'export_success'.tr,
          'export_file_saved'.tr,
          snackPosition: SnackPosition.BOTTOM,
          duration: const Duration(seconds: 3),
          backgroundColor: Colors.green[100],
          colorText: Colors.green[900],
        );
      }
    } catch (e) {
      Get.snackbar(
        'export_error'.tr,
        'export_failed'.trParams({'e': e.toString()}),
        snackPosition: SnackPosition.BOTTOM,
        backgroundColor: Colors.red[100],
        colorText: Colors.red[900],
      );
    }
  }
}
===================== 
FILE: E:\My Mob Projects\3 Flutter abo hamza\demos\finance_app\lib\features\expense\presentation\widgets\simple_card.dart 
===================== 
// lib/features/expense/presentation/widgets/simple_card.dart

import 'package:flutter/material.dart';

class SimpleCard extends StatelessWidget {
  final Widget child;
  final EdgeInsets padding;

  const SimpleCard({
    super.key,
    required this.child,
    this.padding = const EdgeInsets.all(16),
  });

  @override
  Widget build(BuildContext context) {
    return Card(
      elevation: 2,
      shape: RoundedRectangleBorder(
        borderRadius: BorderRadius.circular(12),
      ),
      child: Padding(
        padding: padding,
        child: child,
      ),
    );
  }
}
===================== 
FILE: E:\My Mob Projects\3 Flutter abo hamza\demos\finance_app\lib\features\export\presentation\export_service.dart 
===================== 
// lib/features/export/presentation/export_service.dart

import 'dart:convert';
import 'dart:io';
import 'package:finance_app/features/expense/presentation/controllers/expense_controller.dart';
import 'package:flutter/material.dart';
import 'package:get/get.dart';
import 'package:intl/intl.dart';
import 'package:path_provider/path_provider.dart';
import 'package:share_plus/share_plus.dart';
import 'package:csv/csv.dart';

class ExportService {
  // âœ… Ø¯Ø§Ù„Ø© Ø§Ù„ØªØµØ¯ÙŠØ± Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© Ø§Ù„ØªÙŠ ØªØ³ØªØ¯Ø¹ÙŠÙ‡Ø§ reports_page
  static Future<bool> exportData(List<Map<String, dynamic>> expenses) async {
    try {
      // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø¨ÙŠØ§Ù†Ø§Øª
      if (expenses.isEmpty) {
        Get.snackbar(
          'âš ï¸ Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª',
          'Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ù„ØªØµØ¯ÙŠØ±Ù‡Ø§',
          snackPosition: SnackPosition.BOTTOM,
          backgroundColor: Colors.orange[100],
          colorText: Colors.orange[900],
        );
        return false;
      }

      final exportFormat = await _showExportFormatDialog();
      if (exportFormat == null) return false;

      switch (exportFormat) {
        case 'csv':
          await _exportToCSV(expenses);
          break;
        case 'json':
          await _exportToJSON(expenses);
          break;
        default:
          return false;
      }

      return true;
    } catch (e) {
      print('âŒ Export error: $e');
      Get.snackbar(
        'âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØµØ¯ÙŠØ±',
        'Ø­Ø¯Ø« Ø®Ø·Ø£ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹',
        snackPosition: SnackPosition.BOTTOM,
        backgroundColor: Colors.red[100],
        colorText: Colors.red[900],
      );
      return false;
    }
  }

  // âœ… Ø¯Ø§Ù„Ø© Ø¨Ø¯ÙŠÙ„Ø© ØªØ³ØªØ¯Ø¹ÙŠÙ‡Ø§ reports_page Ù…Ø¨Ø§Ø´Ø±Ø© (Ø­Ø³Ø¨ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø³Ø§Ø¨Ù‚)
  static Future<bool> exportSummary() async {
    try {
      // Ø¬Ù„Ø¨ Ø§Ù„Ù…ØªØ­ÙƒÙ…
      final expenseController = Get.find<ExpenseController>();
      final expenses = expenseController.expensesAsMap;

      return await exportData(expenses);
    } catch (e) {
      print('âŒ Export summary error: $e');
      Get.snackbar(
        'âŒ Ø®Ø·Ø£',
        'ØªØ¹Ø°Ø± Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª',
        snackPosition: SnackPosition.BOTTOM,
      );
      return false;
    }
  }

  // âœ… Ø¹Ø±Ø¶ Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„ØªØµØ¯ÙŠØ±
  static Future<String?> _showExportFormatDialog() async {
    return await Get.dialog<String>(
      AlertDialog(
        title: const Text('ğŸ“¤ Ø§Ø®ØªØ± ØµÙŠØºØ© Ø§Ù„ØªØµØ¯ÙŠØ±'),
        content: Column(
          mainAxisSize: MainAxisSize.min,
          children: [
            ListTile(
              leading: const Icon(Icons.table_chart, color: Colors.blue),
              title: const Text('CSV (Excel)'),
              subtitle: const Text('Ù…Ù„Ù Ø¬Ø¯ÙˆÙ„ ÙŠÙ…ÙƒÙ† ÙØªØ­Ù‡ ÙÙŠ Excel'),
              onTap: () => Get.back(result: 'csv'),
            ),
            const Divider(height: 1),
            ListTile(
              leading: const Icon(Icons.code, color: Colors.green),
              title: const Text('JSON'),
              subtitle: const Text('Ù…Ù„Ù Ø¨ÙŠØ§Ù†Ø§Øª Ù‚Ø§Ø¨Ù„ Ù„Ù„Ù‚Ø±Ø§Ø¡Ø©'),
              onTap: () => Get.back(result: 'json'),
            ),
          ],
        ),
        actions: [
          TextButton(
            onPressed: () => Get.back(),
            child: const Text('Ø¥Ù„ØºØ§Ø¡'),
          ),
        ],
      ),
      barrierDismissible: true,
    );
  }

  // âœ… ØªØµØ¯ÙŠØ± Ø¥Ù„Ù‰ CSV
  static Future<void> _exportToCSV(List<Map<String, dynamic>> expenses) async {
    try {
      final List<List<dynamic>> csvData = [];

      // Ø±Ø£Ø³ Ø§Ù„Ù…Ù„Ù
      csvData.add([
        'Ø§Ù„ØªØ§Ø±ÙŠØ®',
        'Ø§Ù„Ù†ÙˆØ¹',
        'Ø§Ù„ÙØ¦Ø©',
        'Ø§Ù„Ù…Ø¨Ù„Øº (Ø¬.Ù…)',
        'Ø§Ù„ÙˆØµÙ',
        'Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹',
      ]);

      // Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
      for (var expense in expenses) {
        final date = expense['date']?.toString() ?? '';
        final isIncome = expense['isIncome'] == true;
        final category = expense['category']?.toString() ?? 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ';
        final amount = expense['amount']?.toString() ?? '0.00';
        final description = expense['description']?.toString() ?? '';
        final paymentMethod = expense['paymentMethod']?.toString() ?? 'Ù†Ù‚Ø¯ÙŠ';

        csvData.add([
          date,
          isIncome ? 'Ø¯Ø®Ù„' : 'Ù…ØµØ±ÙˆÙ',
          category,
          amount,
          description,
          paymentMethod,
        ]);
      }

      // ØªØ­ÙˆÙŠÙ„ Ø¥Ù„Ù‰ Ù†Øµ CSV
      final csvString = const ListToCsvConverter().convert(csvData);

      // Ø­ÙØ¸ Ø§Ù„Ù…Ù„Ù Ù…Ø¤Ù‚ØªØ§Ù‹
      final directory = await getTemporaryDirectory();
      final timestamp = DateTime.now().millisecondsSinceEpoch;
      final fileName = 'Ù…Ø§Ù„ÙŠ_ØªØµØ¯ÙŠØ±_$timestamp.csv';
      final file = File('${directory.path}/$fileName');
      await file.writeAsString(csvString, flush: true);

      // Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ù…Ù„Ù
      await Share.shareXFiles(
        [XFile(file.path)],
        subject: 'ØªØµØ¯ÙŠØ± Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù…Ø§Ù„ÙŠ',
        text:
            'ØªÙ… ØªØµØ¯ÙŠØ± ${expenses.length} Ù…Ø¹Ø§Ù…Ù„Ø© Ø¨ØªØ§Ø±ÙŠØ® ${_formatDate(DateTime.now())}',
      );

      print('âœ… CSV export successful: ${file.path}');
    } catch (e) {
      print('âŒ CSV export error: $e');
      rethrow;
    }
  }

  // âœ… ØªØµØ¯ÙŠØ± Ø¥Ù„Ù‰ JSON
  static Future<void> _exportToJSON(List<Map<String, dynamic>> expenses) async {
    try {
      // Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
      double totalIncome = 0;
      double totalExpense = 0;

      for (var expense in expenses) {
        if (expense['isIncome'] == true) {
          totalIncome += (expense['amount'] as num).toDouble();
        } else {
          totalExpense += (expense['amount'] as num).toDouble();
        }
      }

      // Ø¥Ù†Ø´Ø§Ø¡ Ø¨ÙŠØ§Ù†Ø§Øª JSON Ù…Ù†Ø¸Ù…Ø©
      final exportData = {
        'appName': 'ØªØ·Ø¨ÙŠÙ‚ Ù…Ø§Ù„ÙŠ',
        'exportDate': DateTime.now().toIso8601String(),
        'exportDateFormatted': _formatDate(DateTime.now()),
        'statistics': {
          'totalTransactions': expenses.length,
          'totalIncome': totalIncome,
          'totalExpense': totalExpense,
          'balance': totalIncome - totalExpense,
        },
        'transactions': expenses,
      };

      // ØªØ­ÙˆÙŠÙ„ Ø¥Ù„Ù‰ JSON
      final jsonString = jsonEncode(exportData);
      final prettyJson = JsonEncoder.withIndent('  ').convert(exportData);

      // Ø­ÙØ¸ Ø§Ù„Ù…Ù„Ù
      final directory = await getTemporaryDirectory();
      final timestamp = DateTime.now().millisecondsSinceEpoch;
      final fileName = 'Ù…Ø§Ù„ÙŠ_ØªØµØ¯ÙŠØ±_$timestamp.json';
      final file = File('${directory.path}/$fileName');
      await file.writeAsString(prettyJson, flush: true);

      // Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ù…Ù„Ù
      await Share.shareXFiles(
        [XFile(file.path)],
        subject: 'ØªØµØ¯ÙŠØ± Ø¨ÙŠØ§Ù†Ø§Øª JSON',
        text: 'Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù…Ø§Ù„ÙŠ Ø¨ØµÙŠØºØ© JSON',
      );

      print('âœ… JSON export successful: ${file.path}');
    } catch (e) {
      print('âŒ JSON export error: $e');
      rethrow;
    }
  }

  // âœ… Ø¯Ø§Ù„Ø© Ù…Ø³Ø§Ø¹Ø¯Ø© Ù„ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„ØªØ§Ø±ÙŠØ®
  static String _formatDate(DateTime date) {
    return DateFormat('yyyy/MM/dd HH:mm', 'ar').format(date);
  }

  // âœ… Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¹Ù† Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…ØµØ¯Ø±Ø©
  static Future<List<FileSystemEntity>> getExportFiles() async {
    try {
      final directory = await getTemporaryDirectory();
      final files = Directory(directory.path)
          .listSync()
          .where((entity) =>
              entity.path.contains('Ù…Ø§Ù„ÙŠ_ØªØµØ¯ÙŠØ±_') &&
              (entity.path.endsWith('.csv') || entity.path.endsWith('.json')))
          .toList();

      // ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø§Ù„ØªØ§Ø±ÙŠØ® (Ø§Ù„Ø£Ø­Ø¯Ø« Ø£ÙˆÙ„Ø§Ù‹)
      files.sort(
          (a, b) => b.statSync().modified.compareTo(a.statSync().modified));

      return files;
    } catch (e) {
      print('Error getting export files: $e');
      return [];
    }
  }

  // âœ… Ù…Ø³Ø­ Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…ØµØ¯Ø±Ø© Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©
  static Future<void> cleanOldExports({int keepLastDays = 7}) async {
    try {
      final files = await getExportFiles();
      final cutoffDate = DateTime.now().subtract(Duration(days: keepLastDays));

      for (var file in files) {
        final stat = file.statSync();
        if (stat.modified.isBefore(cutoffDate)) {
          await file.delete();
          print('ğŸ—‘ï¸ Deleted old export: ${file.path}');
        }
      }
    } catch (e) {
      print('Error cleaning old exports: $e');
    }
  }
}
===================== 
FILE: E:\My Mob Projects\3 Flutter abo hamza\demos\finance_app\lib\features\goals\presentation\controllers\goal_controller.dart 
===================== 
// FILE: lib/features/goals/presentation/controllers/goal_controller.dart
import 'package:get/get.dart';
import 'package:finance_app/core/models/goal_entity.dart';
import 'package:finance_app/core/security/simple_encryption.dart';
import 'package:finance_app/core/utils/error_handler.dart';

class GoalController extends GetxController {
  final goals = <FinancialGoal>[].obs;
  final isLoading = false.obs;
  final selectedGoal = Rx<FinancialGoal?>(null);

  @override
  void onInit() {
    super.onInit();
    loadGoals();
  }

  // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ù‡Ø¯Ø§Ù Ù…Ù† Ø§Ù„ØªØ®Ø²ÙŠÙ†
  Future<void> loadGoals() async {
    isLoading.value = true;
    try {
      final storedData = SimpleEncryption.read('financial_goals');

      if (storedData == null || storedData is! List) {
        goals.value = [];
        return;
      }

      final loadedGoals = <FinancialGoal>[];

      for (var item in storedData) {
        try {
          if (item is Map<String, dynamic>) {
            final goal = FinancialGoal.fromMap(item);
            loadedGoals.add(goal);
          }
        } catch (e) {
          print('âš ï¸ Error parsing goal: $e');
        }
      }

      goals.value = loadedGoals;
      print('âœ… Loaded ${goals.length} goals');
    } catch (e) {
      ErrorHandler.showError('Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ù‡Ø¯Ø§Ù: ${e.toString()}');
      goals.value = [];
    } finally {
      isLoading.value = false;
    }
  }

  // Ø­ÙØ¸ Ø§Ù„Ø£Ù‡Ø¯Ø§Ù Ù„Ù„ØªØ®Ø²ÙŠÙ†
  Future<void> _saveGoals() async {
    try {
      final data = goals.map((goal) => goal.toMap()).toList();
      await SimpleEncryption.write('financial_goals', data);
      print('ğŸ’¾ Saved ${goals.length} goals');
    } catch (e) {
      ErrorHandler.showError('Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ø£Ù‡Ø¯Ø§Ù: ${e.toString()}');
      rethrow;
    }
  }

  // Ø¥Ø¶Ø§ÙØ© Ù‡Ø¯Ù Ø¬Ø¯ÙŠØ¯
  Future<void> addGoal(FinancialGoal goal) async {
    try {
      if (goal.targetAmount <= 0) {
        throw Exception('Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø³ØªÙ‡Ø¯Ù ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ø£ÙƒØ¨Ø± Ù…Ù† ØµÙØ±');
      }

      if (goal.targetDate.isBefore(DateTime.now())) {
        throw Exception('ØªØ§Ø±ÙŠØ® Ø§Ù„Ù‡Ø¯Ù ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† ÙÙŠ Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„');
      }

      goals.add(goal);
      await _saveGoals();

      ErrorHandler.showSuccess('goal_saved_success'.tr);
      print('ğŸ¯ Goal added: ${goal.title}');
    } catch (e) {
      ErrorHandler.showError('ÙØ´Ù„ ÙÙŠ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù‡Ø¯Ù: ${e.toString()}');
      rethrow;
    }
  }

  // ØªØ­Ø¯ÙŠØ« Ù‡Ø¯Ù Ù…ÙˆØ¬ÙˆØ¯
  Future<void> updateGoal(String goalId, FinancialGoal updatedGoal) async {
    try {
      final index = goals.indexWhere((goal) => goal.id == goalId);
      if (index == -1) {
        throw Exception('Ø§Ù„Ù‡Ø¯Ù ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯');
      }

      goals[index] = updatedGoal;
      await _saveGoals();

      ErrorHandler.showSuccess('goal_updated_success'.tr);
      print('ğŸ”„ Goal updated: ${updatedGoal.title}');
    } catch (e) {
      ErrorHandler.showError('ÙØ´Ù„ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù‡Ø¯Ù: ${e.toString()}');
      rethrow;
    }
  }

  // Ø­Ø°Ù Ù‡Ø¯Ù
  Future<void> deleteGoal(String goalId) async {
    try {
      final index = goals.indexWhere((goal) => goal.id == goalId);
      if (index == -1) {
        throw Exception('Ø§Ù„Ù‡Ø¯Ù ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯');
      }

      final deletedGoal = goals[index];
      goals.removeAt(index);
      await _saveGoals();

      ErrorHandler.showSuccess('goal_deleted_success'.tr);
      print('ğŸ—‘ï¸ Goal deleted: ${deletedGoal.title}');
    } catch (e) {
      ErrorHandler.showError('ÙØ´Ù„ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù‡Ø¯Ù: ${e.toString()}');
      rethrow;
    }
  }

  // Ø¥Ø¶Ø§ÙØ© Ù…Ø³Ø§Ù‡Ù…Ø© Ù„Ù‡Ø¯Ù
  Future<void> addContribution(
      String goalId, double amount, String note) async {
    try {
      final index = goals.indexWhere((goal) => goal.id == goalId);
      if (index == -1) {
        throw Exception('Ø§Ù„Ù‡Ø¯Ù ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯');
      }

      if (amount <= 0) {
        throw Exception('Ø§Ù„Ù…Ø¨Ù„Øº ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ø£ÙƒØ¨Ø± Ù…Ù† ØµÙØ±');
      }

      final goal = goals[index];
      goal.addContribution(amount, note, DateTime.now());

      // Ø§Ù„ØªØ­Ù‚Ù‚ Ø¥Ø°Ø§ Ø§ÙƒØªÙ…Ù„ Ø§Ù„Ù‡Ø¯Ù
      if (goal.currentAmount >= goal.targetAmount && !goal.isCompleted) {
        goals[index] = goal.copyWith(isCompleted: true);
        ErrorHandler.showSuccess('ğŸ‰ Ù…Ø¨Ø±ÙˆÙƒ! Ù„Ù‚Ø¯ Ø­Ù‚Ù‚Øª Ù‡Ø¯ÙÙƒ: ${goal.title}');
      } else {
        goals[index] = goal;
      }

      await _saveGoals();

      ErrorHandler.showSuccess('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø³Ø§Ù‡Ù…Ø© Ø¨Ù†Ø¬Ø§Ø­');
      print('ğŸ’° Contribution added: $amount to ${goal.title}');
    } catch (e) {
      ErrorHandler.showError('ÙØ´Ù„ ÙÙŠ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø³Ø§Ù‡Ù…Ø©: ${e.toString()}');
      rethrow;
    }
  }

  // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù‡Ø¯Ù Ø¨ÙˆØ§Ø³Ø·Ø© ID
  FinancialGoal? getGoalById(String goalId) {
    try {
      return goals.firstWhere((goal) => goal.id == goalId);
    } catch (e) {
      return null;
    }
  }

  // Ø§Ù„Ø£Ù‡Ø¯Ø§Ù Ø§Ù„Ù†Ø´Ø·Ø© (ØºÙŠØ± Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø©)
  List<FinancialGoal> get activeGoals {
    return goals.where((goal) => !goal.isCompleted).toList();
  }

  // Ø§Ù„Ø£Ù‡Ø¯Ø§Ù Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø©
  List<FinancialGoal> get completedGoals {
    return goals.where((goal) => goal.isCompleted).toList();
  }

  // Ø§Ù„Ø£Ù‡Ø¯Ø§Ù Ø§Ù„ØªÙŠ Ø¹Ù„Ù‰ ÙˆØ´Ùƒ Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡ (Ø£Ù‚Ù„ Ù…Ù† 7 Ø£ÙŠØ§Ù…)
  List<FinancialGoal> get upcomingDeadlines {
    return activeGoals.where((goal) => goal.daysRemaining <= 7).toList();
  }

  // Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø£Ù‡Ø¯Ø§Ù Ø§Ù„Ù†Ø´Ø·Ø©
  double get totalTargetAmount {
    return activeGoals.fold(0.0, (sum, goal) => sum + goal.targetAmount);
  }

  // Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¯Ø®Ø±Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©
  double get totalCurrentAmount {
    return activeGoals.fold(0.0, (sum, goal) => sum + goal.currentAmount);
  }

  // Ù†Ø³Ø¨Ø© Ø§Ù„Ø¥Ù†Ø¬Ø§Ø² Ø§Ù„ÙƒÙ„ÙŠØ©
  double get overallProgress {
    if (totalTargetAmount == 0) return 0.0;
    return (totalCurrentAmount / totalTargetAmount * 100).clamp(0.0, 100.0);
  }

  // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‡Ø¯Ø§Ù Ø­Ø³Ø¨ Ø§Ù„ÙØ¦Ø©
  Map<String, List<FinancialGoal>> getGoalsByCategory() {
    final Map<String, List<FinancialGoal>> categoryMap = {};

    for (var goal in goals) {
      categoryMap.putIfAbsent(goal.category, () => []);
      categoryMap[goal.category]!.add(goal);
    }

    return categoryMap;
  }

// Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‡Ø¯Ø§Ù Ø­Ø³Ø¨ Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©
  Map<GoalPriority, List<FinancialGoal>> getGoalsByPriority() {
    final Map<GoalPriority, List<FinancialGoal>> priorityMap = {};

    for (var goal in goals) {
      priorityMap.putIfAbsent(goal.priority, () => []);
      priorityMap[goal.priority]!.add(goal);
    }

    return priorityMap;
  }

  // Ø¥Ø¹Ø§Ø¯Ø© ØªØ±ØªÙŠØ¨ Ø§Ù„Ø£Ù‡Ø¯Ø§Ù Ø­Ø³Ø¨ Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©
  void sortGoalsByPriority() {
    final priorityOrder = {
      GoalPriority.critical: 0,
      GoalPriority.high: 1,
      GoalPriority.medium: 2,
      GoalPriority.low: 3,
    };

    goals.sort((a, b) {
      final priorityA = priorityOrder[a.priority] ?? 3;
      final priorityB = priorityOrder[b.priority] ?? 3;

      if (priorityA != priorityB) {
        return priorityA.compareTo(priorityB);
      }

      // Ø¥Ø°Ø§ Ù†ÙØ³ Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©ØŒ ÙØ±Ù‘ Ø­Ø³Ø¨ Ø§Ù„ØªØ§Ø±ÙŠØ®
      return a.targetDate.compareTo(b.targetDate);
    });
  }

  // ØªØªØ¨Ø¹ Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø§Øª Ø§Ù„Ù…Ù†ØªØ¸Ù…Ø© (Ù„Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ù…ØªÙƒØ±Ø±Ø© Ù„Ø§Ø­Ù‚Ø§Ù‹)
  Future<void> simulateRegularPayment(
      String goalId, double monthlyAmount) async {
    // Ù‡Ø°Ù‡ Ø¯Ø§Ù„Ø© Ø³ØªØ³ØªØ®Ø¯Ù… Ù„Ø§Ø­Ù‚Ø§Ù‹ Ù…Ø¹ Recurring Bills
    await addContribution(goalId, monthlyAmount,
        'Ù…Ø¯ÙÙˆØ¹ Ø´Ù‡Ø±ÙŠ - ${DateTime.now().month}/${DateTime.now().year}');
  }
}
===================== 
FILE: E:\My Mob Projects\3 Flutter abo hamza\demos\finance_app\lib\features\goals\presentation\pages\add_edit_goal_page.dart 
===================== 
// FILE: lib/features/goals/presentation/pages/add_edit_goal_page.dart
import 'dart:ui' as ui;
import 'package:flutter/material.dart';
import 'package:get/get.dart';
import 'package:intl/intl.dart';
import '../controllers/goal_controller.dart';
import '../../../../core/models/goal_entity.dart';
import '../../../../core/utils/error_handler.dart';

class AddEditGoalPage extends StatefulWidget {
  final FinancialGoal? existingGoal;

  const AddEditGoalPage({super.key, this.existingGoal});

  @override
  State<AddEditGoalPage> createState() => _AddEditGoalPageState();
}

class _AddEditGoalPageState extends State<AddEditGoalPage> {
  final GoalController _controller = Get.find<GoalController>();
  final _formKey = GlobalKey<FormState>();
  final _titleController = TextEditingController();
  final _descriptionController = TextEditingController();
  final _targetAmountController = TextEditingController();
  final _currentAmountController = TextEditingController();

  String _selectedCategory = GoalCategories.commonCategories.first;
  GoalPriority _selectedPriority = GoalPriority.medium;
  String _selectedColor = GoalColors.availableColors.first;
  DateTime _startDate = DateTime.now();
  DateTime _targetDate = DateTime.now().add(const Duration(days: 30));

  bool get _isEditing => widget.existingGoal != null;

  @override
  void initState() {
    super.initState();

    if (_isEditing) {
      _loadExistingGoalData();
    } else {
      _currentAmountController.text = '0';
    }
  }

  void _loadExistingGoalData() {
    final goal = widget.existingGoal!;
    _titleController.text = goal.title;
    _descriptionController.text = goal.description;
    _targetAmountController.text = goal.targetAmount.toStringAsFixed(2);
    _currentAmountController.text = goal.currentAmount.toStringAsFixed(2);
    _selectedCategory = goal.category;
    _selectedPriority = goal.priority;
    _selectedColor = goal.colorHex;
    _startDate = goal.startDate;
    _targetDate = goal.targetDate;
  }

  @override
  void dispose() {
    _titleController.dispose();
    _descriptionController.dispose();
    _targetAmountController.dispose();
    _currentAmountController.dispose();
    super.dispose();
  }

  String _formatDate(DateTime date) {
    return DateFormat('yyyy/MM/dd').format(date);
  }

  Future<void> _selectDate(BuildContext context, bool isStartDate) async {
    final DateTime? picked = await showDatePicker(
      context: context,
      initialDate: isStartDate ? _startDate : _targetDate,
      firstDate: DateTime(2000),
      lastDate: DateTime(2100),
      locale: Get.locale,
    );

    if (picked != null) {
      setState(() {
        if (isStartDate) {
          _startDate = picked;
          // Ø¥Ø°Ø§ ÙƒØ§Ù† ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨Ø¯Ø¡ Ø¨Ø¹Ø¯ ØªØ§Ø±ÙŠØ® Ø§Ù„Ù‡Ø¯ÙØŒ Ù†Ø­Ø¯Ù‘Ø« ØªØ§Ø±ÙŠØ® Ø§Ù„Ù‡Ø¯Ù
          if (_targetDate.isBefore(_startDate)) {
            _targetDate = _startDate.add(const Duration(days: 30));
          }
        } else {
          _targetDate = picked;
          // Ø¥Ø°Ø§ ÙƒØ§Ù† ØªØ§Ø±ÙŠØ® Ø§Ù„Ù‡Ø¯Ù Ù‚Ø¨Ù„ ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨Ø¯Ø¡ØŒ Ù†Ø­Ø¯Ù‘Ø« ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨Ø¯Ø¡
          if (_targetDate.isBefore(_startDate)) {
            _startDate = _targetDate.subtract(const Duration(days: 30));
          }
        }
      });
    }
  }

  void _saveGoal() {
    if (!_formKey.currentState!.validate()) return;

    try {
      final targetAmount = double.parse(_targetAmountController.text);
      final currentAmount = double.parse(_currentAmountController.text);

      if (targetAmount <= 0) {
        throw Exception('Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø³ØªÙ‡Ø¯Ù ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ø£ÙƒØ¨Ø± Ù…Ù† ØµÙØ±');
      }

      if (currentAmount < 0) {
        throw Exception('Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ø­Ø§Ù„ÙŠ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø£Ù† ÙŠÙƒÙˆÙ† Ø³Ø§Ù„Ø¨Ø§Ù‹');
      }

      if (currentAmount > targetAmount) {
        throw Exception(
            'Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ø­Ø§Ù„ÙŠ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø£Ù† ÙŠÙƒÙˆÙ† Ø£ÙƒØ¨Ø± Ù…Ù† Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø³ØªÙ‡Ø¯Ù');
      }

      if (_targetDate.isBefore(_startDate)) {
        throw Exception('ØªØ§Ø±ÙŠØ® Ø§Ù„Ù‡Ø¯Ù Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø£Ù† ÙŠÙƒÙˆÙ† Ù‚Ø¨Ù„ ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨Ø¯Ø¡');
      }

      final goal = FinancialGoal(
        id: widget.existingGoal?.id,
        title: _titleController.text.trim(),
        description: _descriptionController.text.trim(),
        targetAmount: targetAmount,
        currentAmount: currentAmount,
        startDate: _startDate,
        targetDate: _targetDate,
        category: _selectedCategory,
        priority: _selectedPriority,
        colorHex: _selectedColor,
      );

      if (_isEditing) {
        _controller.updateGoal(goal.id, goal);
      } else {
        _controller.addGoal(goal);
      }

      Get.back();
    } catch (e) {
      ErrorHandler.showError('Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ù‡Ø¯Ù: ${e.toString()}');
    }
  }

  void _showDeleteConfirmation() {
    if (!_isEditing) return;

    Get.defaultDialog(
      title: 'confirm_delete_goal'.tr,
      middleText: 'delete_goal_question'.tr,
      textConfirm: 'delete'.tr,
      textCancel: 'cancel'.tr,
      confirmTextColor: Colors.white,
      onConfirm: () {
        _controller.deleteGoal(widget.existingGoal!.id);
        Get.back();
        Get.back();
      },
    );
  }

  @override
  Widget build(BuildContext context) {
    return Directionality(
      textDirection: ui.TextDirection.rtl,
      child: Scaffold(
        appBar: AppBar(
          title: Text(_isEditing ? 'edit_goal'.tr : 'add_new_goal'.tr),
          centerTitle: true,
          actions: _isEditing
              ? [
                  IconButton(
                    icon: const Icon(Icons.delete, color: Colors.red),
                    onPressed: _showDeleteConfirmation,
                    tooltip: 'delete_goal'.tr,
                  ),
                ]
              : null,
        ),
        body: Form(
          key: _formKey,
          child: SingleChildScrollView(
            padding: const EdgeInsets.all(20),
            child: Column(
              children: [
                // Ø§Ù„Ø¹Ù†ÙˆØ§Ù†
                TextFormField(
                  controller: _titleController,
                  decoration: InputDecoration(
                    labelText: 'goal_title'.tr,
                    prefixIcon: const Icon(Icons.flag),
                    border: const OutlineInputBorder(),
                  ),
                  validator: (value) {
                    if (value == null || value.trim().isEmpty) {
                      return 'enter_goal_title'.tr;
                    }
                    return null;
                  },
                  textInputAction: TextInputAction.next,
                ),
                const SizedBox(height: 16),

                // Ø§Ù„ÙˆØµÙ
                TextFormField(
                  controller: _descriptionController,
                  maxLines: 3,
                  decoration: InputDecoration(
                    labelText: 'goal_description'.tr,
                    border: const OutlineInputBorder(),
                  ),
                  textInputAction: TextInputAction.next,
                ),
                const SizedBox(height: 16),

                // Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø³ØªÙ‡Ø¯Ù
                TextFormField(
                  controller: _targetAmountController,
                  keyboardType: TextInputType.number,
                  decoration: InputDecoration(
                    labelText: 'target_amount'.tr,
                    prefixIcon: const Icon(Icons.attach_money),
                    suffixText: 'currency_suffix'.tr,
                    border: const OutlineInputBorder(),
                  ),
                  validator: (value) {
                    if (value == null || value.isEmpty) {
                      return 'enter_target_amount'.tr;
                    }
                    final amount = double.tryParse(value);
                    if (amount == null || amount <= 0) {
                      return 'enter_valid_amount'.tr;
                    }
                    return null;
                  },
                ),
                const SizedBox(height: 16),

                // Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ø­Ø§Ù„ÙŠ
                TextFormField(
                  controller: _currentAmountController,
                  keyboardType: TextInputType.number,
                  decoration: InputDecoration(
                    labelText: 'current_amount'.tr,
                    prefixIcon: const Icon(Icons.savings),
                    suffixText: 'currency_suffix'.tr,
                    border: const OutlineInputBorder(),
                  ),
                  validator: (value) {
                    if (value == null || value.isEmpty) {
                      return 'enter_current_amount'.tr;
                    }
                    final amount = double.tryParse(value);
                    if (amount == null || amount < 0) {
                      return 'enter_valid_amount'.tr;
                    }

                    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø£Ù† Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ø­Ø§Ù„ÙŠ Ù„Ø§ ÙŠØªØ¬Ø§ÙˆØ² Ø§Ù„Ù…Ø³ØªÙ‡Ø¯Ù
                    final target =
                        double.tryParse(_targetAmountController.text);
                    if (target != null && amount > target) {
                      return 'current_cannot_exceed_target'.tr;
                    }

                    return null;
                  },
                ),
                const SizedBox(height: 16),

                // ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨Ø¯Ø¡
                _buildDatePicker(
                  label: 'start_date'.tr,
                  date: _startDate,
                  onTap: () => _selectDate(context, true),
                ),
                const SizedBox(height: 16),

                // ØªØ§Ø±ÙŠØ® Ø§Ù„Ù‡Ø¯Ù
                _buildDatePicker(
                  label: 'target_date'.tr,
                  date: _targetDate,
                  onTap: () => _selectDate(context, false),
                ),
                const SizedBox(height: 16),

                // Ø§Ù„ÙØ¦Ø©
                _buildDropdown<String>(
                  label: 'select_category'.tr,
                  value: _selectedCategory,
                  items: GoalCategories.commonCategories,
                  onChanged: (value) {
                    setState(() => _selectedCategory = value!);
                  },
                  icon: Icons.category,
                ),
                const SizedBox(height: 16),

                // Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©
                _buildDropdown<GoalPriority>(
                  label: 'priority'.tr,
                  value: _selectedPriority,
                  items: GoalPriority.values,
                  onChanged: (value) {
                    setState(() => _selectedPriority = value!);
                  },
                  icon: Icons.priority_high,
                  displayText: (priority) {
                    switch (priority) {
                      case GoalPriority.low:
                        return 'low'.tr;
                      case GoalPriority.medium:
                        return 'medium'.tr;
                      case GoalPriority.high:
                        return 'high'.tr;
                      case GoalPriority.critical:
                        return 'critical'.tr;
                    }
                  },
                ),
                const SizedBox(height: 16),

                // Ø§Ù„Ù„ÙˆÙ†
                _buildColorSelector(),
                const SizedBox(height: 24),

                // Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø­ÙØ¸/Ø§Ù„Ø¥Ù„ØºØ§Ø¡
                Row(
                  children: [
                    Expanded(
                      child: ElevatedButton(
                        onPressed: _saveGoal,
                        style: ElevatedButton.styleFrom(
                          backgroundColor: Colors.green,
                          foregroundColor: Colors.white,
                          padding: const EdgeInsets.symmetric(vertical: 16),
                        ),
                        child: Text(
                            _isEditing ? 'update_goal'.tr : 'save_goal'.tr),
                      ),
                    ),
                    const SizedBox(width: 12),
                    Expanded(
                      child: OutlinedButton(
                        onPressed: () => Get.back(),
                        style: OutlinedButton.styleFrom(
                          padding: const EdgeInsets.symmetric(vertical: 16),
                        ),
                        child: Text('cancel'.tr),
                      ),
                    ),
                  ],
                ),
              ],
            ),
          ),
        ),
      ),
    );
  }

  Widget _buildDatePicker({
    required String label,
    required DateTime date,
    required VoidCallback onTap,
  }) {
    return InkWell(
      onTap: onTap,
      child: Container(
        padding: const EdgeInsets.all(16),
        decoration: BoxDecoration(
          border: Border.all(color: Colors.grey),
          borderRadius: BorderRadius.circular(4),
        ),
        child: Row(
          mainAxisAlignment: MainAxisAlignment.spaceBetween,
          children: [
            Text(
              label,
              style: TextStyle(
                color: Colors.grey[600],
                fontSize: 16,
              ),
            ),
            Row(
              children: [
                Text(
                  _formatDate(date),
                  style: const TextStyle(fontSize: 16),
                ),
                const SizedBox(width: 8),
                const Icon(Icons.calendar_today, color: Colors.blue),
              ],
            ),
          ],
        ),
      ),
    );
  }

  Widget _buildDropdown<T>({
    required String label,
    required T value,
    required List<T> items,
    required ValueChanged<T?> onChanged,
    required IconData icon,
    String Function(T)? displayText,
  }) {
    return DropdownButtonFormField<T>(
      value: value,
      decoration: InputDecoration(
        labelText: label,
        prefixIcon: Icon(icon),
        border: const OutlineInputBorder(),
      ),
      items: items.map((item) {
        return DropdownMenuItem<T>(
          value: item,
          child: Text(
            displayText != null ? displayText(item) : item.toString(),
          ),
        );
      }).toList(),
      onChanged: onChanged,
    );
  }

  Widget _buildColorSelector() {
    return Column(
      crossAxisAlignment: CrossAxisAlignment.start,
      children: [
        Text(
          'select_color'.tr,
          style: const TextStyle(
            fontSize: 16,
            fontWeight: FontWeight.w600,
            color: Colors.grey,
          ),
        ),
        const SizedBox(height: 8),
        Wrap(
          spacing: 8,
          runSpacing: 8,
          children: GoalColors.availableColors.map((colorHex) {
            final isSelected = _selectedColor == colorHex;
            final color = GoalColors.hexToColor(colorHex);

            return GestureDetector(
              onTap: () {
                setState(() => _selectedColor = colorHex);
              },
              child: Container(
                width: 40,
                height: 40,
                decoration: BoxDecoration(
                  color: color,
                  shape: BoxShape.circle,
                  border: isSelected
                      ? Border.all(color: Colors.black, width: 3)
                      : Border.all(color: Colors.grey[300]!, width: 1),
                  boxShadow: [
                    if (isSelected)
                      BoxShadow(
                        color: color.withOpacity(0.5),
                        blurRadius: 8,
                        spreadRadius: 2,
                      ),
                  ],
                ),
                child: isSelected
                    ? const Icon(Icons.check, color: Colors.white, size: 20)
                    : null,
              ),
            );
          }).toList(),
        ),
      ],
    );
  }
}
===================== 
FILE: E:\My Mob Projects\3 Flutter abo hamza\demos\finance_app\lib\features\goals\presentation\pages\goals_list_page.dart 
===================== 
// FILE: lib/features/goals/presentation/pages/goals_list_page.dart
import 'dart:ui' as ui;
import 'package:finance_app/features/goals/presentation/pages/add_edit_goal_page.dart';
import 'package:finance_app/features/goals/presentation/pages/goal_details_page.dart';
import 'package:finance_app/features/goals/presentation/pages/goal_stats_page.dart';
import 'package:flutter/material.dart';
import 'package:get/get.dart';
import 'package:intl/intl.dart';
import '../controllers/goal_controller.dart';
import '../../../../core/models/goal_entity.dart';

class GoalsListPage extends StatelessWidget {
  GoalsListPage({super.key});
  final GoalController _controller = Get.find<GoalController>();

  @override
  Widget build(BuildContext context) {
    return Directionality(
      textDirection: ui.TextDirection.rtl,
      child: Scaffold(
        appBar: AppBar(
          title: Text('financial_goals'.tr),
          centerTitle: true,
          actions: [
            IconButton(
              icon: const Icon(Icons.add),
              onPressed: () {
                Get.to(() => AddEditGoalPage());
              },
              tooltip: 'add_goal'.tr,
            ),
            IconButton(
              icon: const Icon(Icons.analytics),
              onPressed: () {
                Get.to(() => GoalStatsPage());
              },
              tooltip: 'goal_stats'.tr,
            ),
          ],
        ),
        body: Obx(() {
          if (_controller.isLoading.value) {
            return const Center(child: CircularProgressIndicator());
          }

          if (_controller.goals.isEmpty) {
            return _buildEmptyState();
          }

          return Column(
            children: [
              // Ø´Ø±ÙŠØ· Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø³Ø±ÙŠØ¹Ø©
              _buildQuickStats(),

              Expanded(
                child: ListView(
                  padding: const EdgeInsets.all(16),
                  children: [
                    // Ø§Ù„Ø£Ù‡Ø¯Ø§Ù Ø§Ù„Ù†Ø´Ø·Ø©
                    if (_controller.activeGoals.isNotEmpty) ...[
                      _buildSectionTitle('active_goals'.tr),
                      ..._controller.activeGoals
                          .map((goal) => _buildGoalCard(goal))
                          .toList(),
                      const SizedBox(height: 24),
                    ],

                    // Ø§Ù„Ø£Ù‡Ø¯Ø§Ù Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø©
                    if (_controller.completedGoals.isNotEmpty) ...[
                      _buildSectionTitle('completed_goals'.tr),
                      ..._controller.completedGoals
                          .map(
                              (goal) => _buildGoalCard(goal, isCompleted: true))
                          .toList(),
                    ],
                  ],
                ),
              ),
            ],
          );
        }),
        floatingActionButton: FloatingActionButton.extended(
          onPressed: () {
            Get.to(() => AddEditGoalPage());
          },
          icon: const Icon(Icons.add),
          label: Text('add_new_goal'.tr),
          backgroundColor: Colors.green,
          foregroundColor: Colors.white,
        ),
      ),
    );
  }

  Widget _buildEmptyState() {
    return Center(
      child: Column(
        mainAxisAlignment: MainAxisAlignment.center,
        children: [
          Icon(Icons.flag, size: 80, color: Colors.grey[400]),
          const SizedBox(height: 20),
          Text(
            'no_goals_yet'.tr,
            style: const TextStyle(fontSize: 18, color: Colors.grey),
          ),
          const SizedBox(height: 10),
          Text(
            'start_by_adding_your_first_goal'.tr,
            style: const TextStyle(fontSize: 14, color: Colors.grey),
          ),
          const SizedBox(height: 30),
          ElevatedButton.icon(
            onPressed: () {
              Get.to(() => AddEditGoalPage());
            },
            icon: const Icon(Icons.add),
            label: Text('create_first_goal'.tr),
          ),
        ],
      ),
    );
  }

  Widget _buildQuickStats() {
    return Container(
      padding: const EdgeInsets.all(16),
      color: Colors.green[50],
      child: Row(
        mainAxisAlignment: MainAxisAlignment.spaceAround,
        children: [
          _buildStatItem(
            'total_goals'.tr,
            _controller.goals.length.toString(),
            Icons.flag,
            Colors.green,
          ),
          _buildStatItem(
            'total_saved'.tr,
            '${_controller.totalCurrentAmount.toStringAsFixed(0)} ${'currency_suffix'.tr}',
            Icons.savings,
            Colors.blue,
          ),
          _buildStatItem(
            'progress'.tr,
            '${_controller.overallProgress.toStringAsFixed(0)}%',
            Icons.trending_up,
            Colors.orange,
          ),
        ],
      ),
    );
  }

  Widget _buildStatItem(
      String label, String value, IconData icon, Color color) {
    return Column(
      children: [
        Icon(icon, color: color, size: 24),
        const SizedBox(height: 8),
        Text(
          value,
          style: TextStyle(
            fontSize: 16,
            fontWeight: FontWeight.bold,
            color: color,
          ),
        ),
        Text(
          label,
          style: const TextStyle(fontSize: 12, color: Colors.grey),
        ),
      ],
    );
  }

  Widget _buildSectionTitle(String title) {
    return Padding(
      padding: const EdgeInsets.only(bottom: 12, top: 8),
      child: Text(
        title,
        style: const TextStyle(
          fontSize: 18,
          fontWeight: FontWeight.bold,
          color: Colors.blue,
        ),
      ),
    );
  }

  Widget _buildGoalCard(FinancialGoal goal, {bool isCompleted = false}) {
    final icon = GoalCategories.getIconForCategory(goal.category);
    final color = GoalColors.hexToColor(goal.colorHex);

    return Card(
      margin: const EdgeInsets.only(bottom: 12),
      elevation: 2,
      shape: RoundedRectangleBorder(
        borderRadius: BorderRadius.circular(12),
        side: BorderSide(color: color.withOpacity(0.3), width: 1),
      ),
      child: InkWell(
        onTap: () {
          Get.to(() => GoalDetailsPage(goalId: goal.id));
        },
        child: Padding(
          padding: const EdgeInsets.all(16),
          child: Column(
            crossAxisAlignment: CrossAxisAlignment.start,
            children: [
              Row(
                children: [
                  CircleAvatar(
                    backgroundColor: color.withOpacity(0.2),
                    child: Text(icon, style: const TextStyle(fontSize: 18)),
                  ),
                  const SizedBox(width: 12),
                  Expanded(
                    child: Column(
                      crossAxisAlignment: CrossAxisAlignment.start,
                      children: [
                        Text(
                          goal.title,
                          style: const TextStyle(
                            fontSize: 16,
                            fontWeight: FontWeight.bold,
                          ),
                        ),
                        if (goal.description.isNotEmpty) ...[
                          const SizedBox(height: 4),
                          Text(
                            goal.description,
                            style: const TextStyle(
                              fontSize: 12,
                              color: Colors.grey,
                            ),
                            maxLines: 1,
                            overflow: TextOverflow.ellipsis,
                          ),
                        ],
                      ],
                    ),
                  ),
                  if (isCompleted)
                    const Icon(Icons.check_circle,
                        color: Colors.green, size: 24)
                  else
                    _buildPriorityBadge(goal.priority),
                ],
              ),

              const SizedBox(height: 16),

              // Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù…
              Column(
                children: [
                  Row(
                    mainAxisAlignment: MainAxisAlignment.spaceBetween,
                    children: [
                      Text(
                        'progress'.tr,
                        style:
                            const TextStyle(fontSize: 12, color: Colors.grey),
                      ),
                      Text(
                        '${goal.progressPercentage.toStringAsFixed(1)}%',
                        style: TextStyle(
                          fontSize: 14,
                          fontWeight: FontWeight.bold,
                          color: goal.progressPercentage >= 100
                              ? Colors.green
                              : Colors.blue,
                        ),
                      ),
                    ],
                  ),
                  const SizedBox(height: 8),
                  LinearProgressIndicator(
                    value: goal.progressPercentage / 100,
                    backgroundColor: Colors.grey[200],
                    valueColor: AlwaysStoppedAnimation<Color>(
                      goal.progressPercentage >= 100 ? Colors.green : color,
                    ),
                    minHeight: 8,
                    borderRadius: BorderRadius.circular(4),
                  ),
                  const SizedBox(height: 8),
                  Row(
                    mainAxisAlignment: MainAxisAlignment.spaceBetween,
                    children: [
                      Text(
                        '${goal.currentAmount.toStringAsFixed(0)}/${goal.targetAmount.toStringAsFixed(0)} ${'currency_suffix'.tr}',
                        style: const TextStyle(
                          fontSize: 12,
                          fontWeight: FontWeight.w600,
                        ),
                      ),
                      Text(
                        '${goal.daysRemaining} ${'days_left'.tr}',
                        style: TextStyle(
                          fontSize: 12,
                          color: goal.daysRemaining <= 7
                              ? Colors.red
                              : Colors.grey,
                        ),
                      ),
                    ],
                  ),
                ],
              ),

              const SizedBox(height: 12),

              // Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©
              Row(
                mainAxisAlignment: MainAxisAlignment.spaceBetween,
                children: [
                  Chip(
                    label: Text(goal.category),
                    backgroundColor: color.withOpacity(0.1),
                    labelStyle: TextStyle(color: color),
                    padding:
                        const EdgeInsets.symmetric(horizontal: 8, vertical: 2),
                  ),
                  Text(
                    DateFormat('yyyy/MM/dd').format(goal.targetDate),
                    style: const TextStyle(fontSize: 12, color: Colors.grey),
                  ),
                ],
              ),
            ],
          ),
        ),
      ),
    );
  }

  Widget _buildPriorityBadge(GoalPriority priority) {
    final Map<GoalPriority, Map<String, dynamic>> priorityInfo = {
      GoalPriority.low: {'label': 'low'.tr, 'color': Colors.green},
      GoalPriority.medium: {'label': 'medium'.tr, 'color': Colors.orange},
      GoalPriority.high: {'label': 'high'.tr, 'color': Colors.red},
      GoalPriority.critical: {'label': 'critical'.tr, 'color': Colors.purple},
    };

    final info = priorityInfo[priority] ?? priorityInfo[GoalPriority.medium]!;

    return Container(
      padding: const EdgeInsets.symmetric(horizontal: 8, vertical: 4),
      decoration: BoxDecoration(
        color: info['color'].withOpacity(0.1),
        borderRadius: BorderRadius.circular(12),
        border: Border.all(color: info['color'].withOpacity(0.3)),
      ),
      child: Text(
        info['label'],
        style: TextStyle(
          fontSize: 10,
          color: info['color'],
          fontWeight: FontWeight.bold,
        ),
      ),
    );
  }
}
===================== 
FILE: E:\My Mob Projects\3 Flutter abo hamza\demos\finance_app\lib\features\goals\presentation\pages\goal_details_page.dart 
===================== 
// FILE: lib/features/goals/presentation/pages/goal_details_page.dart
import 'dart:ui' as ui;
import 'package:finance_app/features/goals/presentation/pages/add_edit_goal_page.dart';
import 'package:flutter/material.dart';
import 'package:get/get.dart';
import 'package:intl/intl.dart';
import '../controllers/goal_controller.dart';
import '../../../../core/models/goal_entity.dart';
import '../../../../core/utils/error_handler.dart';

class GoalDetailsPage extends StatefulWidget {
  final String goalId;

  const GoalDetailsPage({super.key, required this.goalId});

  @override
  State<GoalDetailsPage> createState() => _GoalDetailsPageState();
}

class _GoalDetailsPageState extends State<GoalDetailsPage> {
  final GoalController _controller = Get.find<GoalController>();
  final _contributionAmountController = TextEditingController();
  final _contributionNoteController = TextEditingController();

  FinancialGoal? _goal;
  bool _isLoading = true;

  @override
  void initState() {
    super.initState();
    _loadGoal();
  }

  Future<void> _loadGoal() async {
    setState(() => _isLoading = true);
    await Future.delayed(const Duration(milliseconds: 300));

    final goal = _controller.getGoalById(widget.goalId);
    if (goal == null) {
      ErrorHandler.showError('goal_not_found'.tr);
      Get.back();
      return;
    }

    setState(() {
      _goal = goal;
      _isLoading = false;
    });
  }

  @override
  void dispose() {
    _contributionAmountController.dispose();
    _contributionNoteController.dispose();
    super.dispose();
  }

  void _showAddContributionDialog() {
    Get.bottomSheet(
      Container(
        padding: const EdgeInsets.all(20),
        decoration: BoxDecoration(
          color: Get.isDarkMode ? Colors.grey[900] : Colors.white,
          borderRadius: const BorderRadius.only(
            topLeft: Radius.circular(20),
            topRight: Radius.circular(20),
          ),
        ),
        child: SingleChildScrollView(
          child: Column(
            mainAxisSize: MainAxisSize.min,
            children: [
              Center(
                child: Container(
                  width: 40,
                  height: 5,
                  decoration: BoxDecoration(
                    color: Colors.grey[300],
                    borderRadius: BorderRadius.circular(3),
                  ),
                ),
              ),
              const SizedBox(height: 20),
              Text(
                'add_contribution'.tr,
                style: const TextStyle(
                  fontSize: 18,
                  fontWeight: FontWeight.bold,
                ),
              ),
              const SizedBox(height: 20),
              TextFormField(
                controller: _contributionAmountController,
                keyboardType: TextInputType.number,
                decoration: InputDecoration(
                  labelText: 'contribution_amount'.tr,
                  prefixIcon: const Icon(Icons.attach_money),
                  suffixText: 'currency_suffix'.tr,
                  border: const OutlineInputBorder(),
                ),
                validator: (value) {
                  if (value == null || value.isEmpty) {
                    return 'enter_amount'.tr;
                  }
                  final amount = double.tryParse(value);
                  if (amount == null || amount <= 0) {
                    return 'enter_valid_amount'.tr;
                  }
                  return null;
                },
              ),
              const SizedBox(height: 16),
              TextFormField(
                controller: _contributionNoteController,
                maxLines: 2,
                decoration: InputDecoration(
                  labelText: 'contribution_note'.tr,
                  border: const OutlineInputBorder(),
                ),
              ),
              const SizedBox(height: 24),
              Row(
                children: [
                  Expanded(
                    child: OutlinedButton(
                      onPressed: () => Get.back(),
                      child: Text('cancel'.tr),
                    ),
                  ),
                  const SizedBox(width: 12),
                  Expanded(
                    child: ElevatedButton(
                      onPressed: _addContribution,
                      style: ElevatedButton.styleFrom(
                        backgroundColor: Colors.green,
                      ),
                      child: Text('save_contribution'.tr),
                    ),
                  ),
                ],
              ),
            ],
          ),
        ),
      ),
    );
  }

  void _addContribution() {
    try {
      final amount = double.tryParse(_contributionAmountController.text);
      if (amount == null || amount <= 0) {
        throw Exception('enter_valid_amount'.tr);
      }

      if (_goal == null) return;

      _controller.addContribution(
        _goal!.id,
        amount,
        _contributionNoteController.text.trim(),
      );

      _contributionAmountController.clear();
      _contributionNoteController.clear();

      Get.back();
      _loadGoal(); // Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù‡Ø¯Ù Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
    } catch (e) {
      ErrorHandler.showError('Ø®Ø·Ø£ ÙÙŠ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø³Ø§Ù‡Ù…Ø©: ${e.toString()}');
    }
  }

  void _showEditGoal() {
    if (_goal == null) return;
    Get.to(() => AddEditGoalPage(existingGoal: _goal));
  }

  void _showDeleteConfirmation() {
    Get.defaultDialog(
      title: 'confirm_delete_goal'.tr,
      middleText: 'delete_goal_question'.tr,
      textConfirm: 'delete'.tr,
      textCancel: 'cancel'.tr,
      confirmTextColor: Colors.white,
      onConfirm: () {
        _controller.deleteGoal(widget.goalId);
        Get.back();
        Get.back();
      },
    );
  }

  void _showContributionDetails(Contribution contribution) {
    Get.defaultDialog(
      title: 'contribution_details'.tr,
      content: Column(
        mainAxisSize: MainAxisSize.min,
        crossAxisAlignment: CrossAxisAlignment.start,
        children: [
          _buildDetailRow(
              'amount'.tr, '${contribution.amount} ${'currency_suffix'.tr}'),
          _buildDetailRow('date'.tr, _formatDate(contribution.date)),
          if (contribution.note.isNotEmpty)
            _buildDetailRow('note'.tr, contribution.note),
        ],
      ),
      textConfirm: 'ok'.tr,
      onConfirm: Get.back,
    );
  }

  Widget _buildDetailRow(String label, String value) {
    return Padding(
      padding: const EdgeInsets.symmetric(vertical: 4),
      child: Row(
        crossAxisAlignment: CrossAxisAlignment.start,
        children: [
          SizedBox(
            width: 80,
            child: Text(
              '$label:',
              style: const TextStyle(fontWeight: FontWeight.bold),
            ),
          ),
          const SizedBox(width: 8),
          Expanded(child: Text(value)),
        ],
      ),
    );
  }

  String _formatDate(DateTime date) {
    return DateFormat('yyyy/MM/dd HH:mm').format(date);
  }

  @override
  Widget build(BuildContext context) {
    if (_isLoading || _goal == null) {
      return const Scaffold(
        body: Center(child: CircularProgressIndicator()),
      );
    }

    final goal = _goal!;
    final icon = GoalCategories.getIconForCategory(goal.category);
    final color = GoalColors.hexToColor(goal.colorHex);

    return Directionality(
      textDirection: ui.TextDirection.rtl,
      child: Scaffold(
        appBar: AppBar(
          title: Text('goal_details'.tr),
          centerTitle: true,
          actions: [
            IconButton(
              icon: const Icon(Icons.edit),
              onPressed: _showEditGoal,
              tooltip: 'edit_goal'.tr,
            ),
            IconButton(
              icon: const Icon(Icons.delete, color: Colors.red),
              onPressed: _showDeleteConfirmation,
              tooltip: 'delete_goal'.tr,
            ),
          ],
        ),
        body: SingleChildScrollView(
          padding: const EdgeInsets.all(16),
          child: Column(
            crossAxisAlignment: CrossAxisAlignment.start,
            children: [
              // Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ù‡Ø¯Ù Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
              Card(
                elevation: 4,
                shape: RoundedRectangleBorder(
                  borderRadius: BorderRadius.circular(16),
                ),
                child: Padding(
                  padding: const EdgeInsets.all(20),
                  child: Column(
                    children: [
                      Row(
                        children: [
                          CircleAvatar(
                            backgroundColor: color.withOpacity(0.2),
                            radius: 28,
                            child: Text(
                              icon,
                              style: const TextStyle(fontSize: 24),
                            ),
                          ),
                          const SizedBox(width: 16),
                          Expanded(
                            child: Column(
                              crossAxisAlignment: CrossAxisAlignment.start,
                              children: [
                                Text(
                                  goal.title,
                                  style: const TextStyle(
                                    fontSize: 20,
                                    fontWeight: FontWeight.bold,
                                  ),
                                ),
                                if (goal.description.isNotEmpty)
                                  Text(
                                    goal.description,
                                    style: const TextStyle(
                                      color: Colors.grey,
                                    ),
                                  ),
                              ],
                            ),
                          ),
                          _buildPriorityChip(goal.priority),
                        ],
                      ),

                      const SizedBox(height: 24),

                      // Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù…
                      _buildProgressSection(goal, color),

                      const SizedBox(height: 24),

                      // Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©
                      _buildGoalInfo(goal, color),
                    ],
                  ),
                ),
              ),

              const SizedBox(height: 24),

              // Ø²Ø± Ø¥Ø¶Ø§ÙØ© Ù…Ø³Ø§Ù‡Ù…Ø©
              SizedBox(
                width: double.infinity,
                child: ElevatedButton.icon(
                  onPressed: _showAddContributionDialog,
                  icon: const Icon(Icons.add),
                  label: Text('add_contribution'.tr),
                  style: ElevatedButton.styleFrom(
                    backgroundColor: color,
                    foregroundColor: Colors.white,
                    padding: const EdgeInsets.symmetric(vertical: 16),
                  ),
                ),
              ),

              const SizedBox(height: 24),

              // Ø³Ø¬Ù„ Ø§Ù„Ù…Ø³Ø§Ù‡Ù…Ø§Øª
              _buildContributionsList(goal),
            ],
          ),
        ),
      ),
    );
  }

  Widget _buildProgressSection(FinancialGoal goal, ui.Color color) {
    return Column(
      children: [
        Row(
          mainAxisAlignment: MainAxisAlignment.spaceBetween,
          children: [
            Text(
              'progress'.tr,
              style: const TextStyle(fontSize: 14, color: Colors.grey),
            ),
            Text(
              '${goal.progressPercentage.toStringAsFixed(1)}%',
              style: TextStyle(
                fontSize: 18,
                fontWeight: FontWeight.bold,
                color: goal.progressPercentage >= 100 ? Colors.green : color,
              ),
            ),
          ],
        ),
        const SizedBox(height: 8),
        LinearProgressIndicator(
          value: goal.progressPercentage / 100,
          backgroundColor: Colors.grey[200],
          valueColor: AlwaysStoppedAnimation<Color>(
            goal.progressPercentage >= 100 ? Colors.green : color,
          ),
          minHeight: 12,
          borderRadius: BorderRadius.circular(6),
        ),
        const SizedBox(height: 12),
        Row(
          mainAxisAlignment: MainAxisAlignment.spaceBetween,
          children: [
            Column(
              crossAxisAlignment: CrossAxisAlignment.start,
              children: [
                Text(
                  'saved'.tr,
                  style: const TextStyle(fontSize: 12, color: Colors.grey),
                ),
                Text(
                  '${goal.currentAmount.toStringAsFixed(0)} ${'currency_suffix'.tr}',
                  style: const TextStyle(
                    fontSize: 16,
                    fontWeight: FontWeight.bold,
                  ),
                ),
              ],
            ),
            Column(
              crossAxisAlignment: CrossAxisAlignment.center,
              children: [
                Text(
                  'target'.tr,
                  style: const TextStyle(fontSize: 12, color: Colors.grey),
                ),
                Text(
                  '${goal.targetAmount.toStringAsFixed(0)} ${'currency_suffix'.tr}',
                  style: const TextStyle(
                    fontSize: 16,
                    fontWeight: FontWeight.bold,
                  ),
                ),
              ],
            ),
            Column(
              crossAxisAlignment: CrossAxisAlignment.end,
              children: [
                Text(
                  'remaining'.tr,
                  style: const TextStyle(fontSize: 12, color: Colors.grey),
                ),
                Text(
                  '${goal.remainingAmount.toStringAsFixed(0)} ${'currency_suffix'.tr}',
                  style: const TextStyle(
                    fontSize: 16,
                    fontWeight: FontWeight.bold,
                    color: Colors.red,
                  ),
                ),
              ],
            ),
          ],
        ),
        if (!goal.isCompleted) ...[
          const SizedBox(height: 16),
          Container(
            padding: const EdgeInsets.all(12),
            decoration: BoxDecoration(
              color: Colors.blue[50],
              borderRadius: BorderRadius.circular(8),
            ),
            child: Row(
              children: [
                const Icon(Icons.access_time, color: Colors.blue, size: 20),
                const SizedBox(width: 8),
                Expanded(
                  child: Column(
                    crossAxisAlignment: CrossAxisAlignment.start,
                    children: [
                      Text(
                        'daily_saving_needed'.tr,
                        style: const TextStyle(
                          fontSize: 12,
                          color: Colors.grey,
                        ),
                      ),
                      Text(
                        '${goal.requiredDailySaving.toStringAsFixed(1)} ${'currency_suffix'.tr}',
                        style: const TextStyle(
                          fontSize: 14,
                          fontWeight: FontWeight.bold,
                          color: Colors.blue,
                        ),
                      ),
                    ],
                  ),
                ),
                Text(
                  '${goal.daysRemaining} ${'days_left'.tr}',
                  style: TextStyle(
                    fontSize: 14,
                    color: goal.daysRemaining <= 7 ? Colors.red : Colors.green,
                    fontWeight: FontWeight.bold,
                  ),
                ),
              ],
            ),
          ),
        ],
      ],
    );
  }

  Widget _buildGoalInfo(FinancialGoal goal, ui.Color color) {
    return Column(
      children: [
        _buildInfoRow(
          icon: Icons.category,
          label: 'category'.tr,
          value: goal.category,
          color: color,
        ),
        const SizedBox(height: 12),
        _buildInfoRow(
          icon: Icons.calendar_today,
          label: 'start_date'.tr,
          value: _formatDate(goal.startDate),
          color: Colors.blue,
        ),
        const SizedBox(height: 12),
        _buildInfoRow(
          icon: Icons.flag,
          label: 'target_date'.tr,
          value: _formatDate(goal.targetDate),
          color: Colors.green,
        ),
        const SizedBox(height: 12),
        _buildInfoRow(
          icon: Icons.timeline,
          label: 'duration'.tr,
          value:
              '${goal.targetDate.difference(goal.startDate).inDays} ${'days'.tr}',
          color: Colors.orange,
        ),
      ],
    );
  }

  Widget _buildInfoRow({
    required IconData icon,
    required String label,
    required String value,
    required ui.Color color,
  }) {
    return Row(
      children: [
        Icon(icon, color: color, size: 20),
        const SizedBox(width: 12),
        Expanded(
          child: Text(
            label,
            style: const TextStyle(
              fontSize: 14,
              color: Colors.grey,
            ),
          ),
        ),
        Text(
          value,
          style: const TextStyle(
            fontSize: 14,
            fontWeight: FontWeight.w600,
          ),
        ),
      ],
    );
  }

  Widget _buildPriorityChip(GoalPriority priority) {
    final Map<GoalPriority, Map<String, dynamic>> priorityInfo = {
      GoalPriority.low: {'label': 'low'.tr, 'color': Colors.green},
      GoalPriority.medium: {'label': 'medium'.tr, 'color': Colors.orange},
      GoalPriority.high: {'label': 'high'.tr, 'color': Colors.red},
      GoalPriority.critical: {'label': 'critical'.tr, 'color': Colors.purple},
    };

    final info = priorityInfo[priority] ?? priorityInfo[GoalPriority.medium]!;

    return Chip(
      label: Text(info['label']),
      backgroundColor: info['color'].withOpacity(0.1),
      labelStyle: TextStyle(
        color: info['color'],
        fontWeight: FontWeight.bold,
      ),
      avatar: Icon(Icons.priority_high, color: info['color'], size: 16),
    );
  }

  Widget _buildContributionsList(FinancialGoal goal) {
    if (goal.contributions.isEmpty) {
      return Container(
        padding: const EdgeInsets.all(32),
        child: Column(
          children: [
            Icon(Icons.history, size: 64, color: Colors.grey[400]),
            const SizedBox(height: 16),
            Text(
              'no_contributions'.tr,
              style: const TextStyle(
                fontSize: 16,
                color: Colors.grey,
              ),
            ),
            const SizedBox(height: 8),
            Text(
              'add_your_first_contribution'.tr,
              style: const TextStyle(
                fontSize: 14,
                color: Colors.grey,
              ),
              textAlign: TextAlign.center,
            ),
          ],
        ),
      );
    }

    return Column(
      crossAxisAlignment: CrossAxisAlignment.start,
      children: [
        Text(
          'contributions_history'.tr,
          style: const TextStyle(
            fontSize: 18,
            fontWeight: FontWeight.bold,
          ),
        ),
        const SizedBox(height: 12),

        // Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø³Ø§Ù‡Ù…Ø§Øª
        Card(
          color: Colors.green[50],
          child: Padding(
            padding: const EdgeInsets.all(12),
            child: Row(
              mainAxisAlignment: MainAxisAlignment.spaceBetween,
              children: [
                Text(
                  'total_contributions'.tr,
                  style: const TextStyle(
                    fontWeight: FontWeight.bold,
                  ),
                ),
                Text(
                  '${goal.contributions.length} ${'contributions'.tr}',
                  style: const TextStyle(
                    fontWeight: FontWeight.bold,
                    color: Colors.green,
                  ),
                ),
              ],
            ),
          ),
        ),

        const SizedBox(height: 16),

        // Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø³Ø§Ù‡Ù…Ø§Øª
        ...goal.contributions.reversed.map((contribution) {
          return Card(
            margin: const EdgeInsets.only(bottom: 8),
            child: ListTile(
              leading: CircleAvatar(
                backgroundColor: Colors.green.withOpacity(0.1),
                child: const Icon(Icons.attach_money, color: Colors.green),
              ),
              title: Text(
                '${contribution.amount} ${'currency_suffix'.tr}',
                style: const TextStyle(
                  fontSize: 16,
                  fontWeight: FontWeight.bold,
                ),
              ),
              subtitle: Column(
                crossAxisAlignment: CrossAxisAlignment.start,
                children: [
                  if (contribution.note.isNotEmpty) Text(contribution.note),
                  Text(
                    _formatDate(contribution.date),
                    style: const TextStyle(fontSize: 12, color: Colors.grey),
                  ),
                ],
              ),
              trailing: const Icon(Icons.chevron_left),
              onTap: () => _showContributionDetails(contribution),
            ),
          );
        }).toList(),
      ],
    );
  }
}
===================== 
FILE: E:\My Mob Projects\3 Flutter abo hamza\demos\finance_app\lib\features\goals\presentation\pages\goal_stats_page.dart 
===================== 
// FILE: lib/features/goals/presentation/pages/goal_stats_page.dart
import 'dart:ui' as ui;
import 'package:flutter/material.dart';
import 'package:get/get.dart';
import 'package:fl_chart/fl_chart.dart';
import 'package:intl/intl.dart';
import '../controllers/goal_controller.dart';
import '../../../../core/models/goal_entity.dart';

class GoalStatsPage extends StatelessWidget {
  GoalStatsPage({super.key});
  final GoalController _controller = Get.find<GoalController>();

  @override
  Widget build(BuildContext context) {
    return Directionality(
      textDirection: ui.TextDirection.rtl,
      child: Scaffold(
        appBar: AppBar(
          title: Text('goal_statistics'.tr),
          centerTitle: true,
        ),
        body: Obx(() {
          if (_controller.isLoading.value) {
            return const Center(child: CircularProgressIndicator());
          }

          if (_controller.goals.isEmpty) {
            return _buildEmptyState();
          }

          return SingleChildScrollView(
            padding: const EdgeInsets.all(16),
            child: Column(
              crossAxisAlignment: CrossAxisAlignment.start,
              children: [
                // Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
                _buildMainStatsCard(),
                const SizedBox(height: 24),

                // Ù…Ø®Ø·Ø· ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ø£Ù‡Ø¯Ø§Ù Ø­Ø³Ø¨ Ø§Ù„ÙØ¦Ø©
                if (_controller.goals.isNotEmpty)
                  _buildCategoryDistributionChart(),
                const SizedBox(height: 24),

                // Ù…Ø®Ø·Ø· ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ø£Ù‡Ø¯Ø§Ù Ø­Ø³Ø¨ Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©
                if (_controller.goals.isNotEmpty)
                  _buildPriorityDistributionChart(),
                const SizedBox(height: 24),

                // Ø¬Ø¯ÙˆÙ„ ØªØ­Ù„ÙŠÙ„ Ø§Ù„ØªÙ‚Ø¯Ù…
                if (_controller.activeGoals.isNotEmpty)
                  _buildProgressAnalysisTable(),
                const SizedBox(height: 24),

                // Ù†ØµØ§Ø¦Ø­ ÙˆØ¥Ø±Ø´Ø§Ø¯Ø§Øª
                _buildTipsSection(),
                const SizedBox(height: 32),
              ],
            ),
          );
        }),
      ),
    );
  }

  Widget _buildEmptyState() {
    return Center(
      child: Column(
        mainAxisAlignment: MainAxisAlignment.center,
        children: [
          Icon(Icons.analytics, size: 80, color: Colors.grey[400]),
          const SizedBox(height: 20),
          Text(
            'no_goals_for_stats'.tr,
            style: const TextStyle(fontSize: 18, color: Colors.grey),
          ),
          const SizedBox(height: 10),
          Text(
            'add_goals_to_see_statistics'.tr,
            style: const TextStyle(fontSize: 14, color: Colors.grey),
          ),
          const SizedBox(height: 30),
          ElevatedButton.icon(
            onPressed: () {
              Get.back();
            },
            icon: const Icon(Icons.arrow_back),
            label: Text('back_to_goals'.tr),
          ),
        ],
      ),
    );
  }

  Widget _buildMainStatsCard() {
    final activeGoals = _controller.activeGoals;
    final completedGoals = _controller.completedGoals;
    final upcomingDeadlines = _controller.upcomingDeadlines;

    return Card(
      elevation: 4,
      shape: RoundedRectangleBorder(
        borderRadius: BorderRadius.circular(16),
      ),
      child: Padding(
        padding: const EdgeInsets.all(20),
        child: Column(
          children: [
            Text(
              'overall_statistics'.tr,
              style: const TextStyle(
                fontSize: 18,
                fontWeight: FontWeight.bold,
                color: Colors.blue,
              ),
            ),
            const SizedBox(height: 20),
            Row(
              mainAxisAlignment: MainAxisAlignment.spaceAround,
              children: [
                _buildStatItem(
                  'total_goals'.tr,
                  _controller.goals.length.toString(),
                  Icons.flag,
                  Colors.blue,
                ),
                _buildStatItem(
                  'active_goals'.tr,
                  activeGoals.length.toString(),
                  Icons.timeline,
                  Colors.green,
                ),
                _buildStatItem(
                  'completed'.tr,
                  completedGoals.length.toString(),
                  Icons.check_circle,
                  Colors.purple,
                ),
              ],
            ),
            const SizedBox(height: 16),
            Divider(color: Colors.grey[300]),
            const SizedBox(height: 16),
            Row(
              mainAxisAlignment: MainAxisAlignment.spaceAround,
              children: [
                _buildStatItem(
                  'total_target'.tr,
                  '${_controller.totalTargetAmount.toStringAsFixed(0)} ${'currency_suffix'.tr}',
                  Icons.flag,
                  Colors.orange,
                ),
                _buildStatItem(
                  'total_saved'.tr,
                  '${_controller.totalCurrentAmount.toStringAsFixed(0)} ${'currency_suffix'.tr}',
                  Icons.savings,
                  Colors.green,
                ),
                _buildStatItem(
                  'overall_progress'.tr,
                  '${_controller.overallProgress.toStringAsFixed(1)}%',
                  Icons.trending_up,
                  _controller.overallProgress >= 50
                      ? Colors.green
                      : Colors.orange,
                ),
              ],
            ),
            const SizedBox(height: 16),
            if (upcomingDeadlines.isNotEmpty) ...[
              Divider(color: Colors.grey[300]),
              const SizedBox(height: 12),
              Row(
                mainAxisAlignment: MainAxisAlignment.center,
                children: [
                  Icon(Icons.warning, color: Colors.orange, size: 18),
                  const SizedBox(width: 8),
                  Text(
                    '${upcomingDeadlines.length} ${'upcoming_deadlines'.tr}',
                    style: TextStyle(
                      color: Colors.orange[800],
                      fontWeight: FontWeight.bold,
                    ),
                  ),
                ],
              ),
            ],
          ],
        ),
      ),
    );
  }

  Widget _buildStatItem(
      String label, String value, IconData icon, Color color) {
    return Column(
      children: [
        Container(
          padding: const EdgeInsets.all(12),
          decoration: BoxDecoration(
            color: color.withOpacity(0.1),
            shape: BoxShape.circle,
          ),
          child: Icon(icon, color: color, size: 24),
        ),
        const SizedBox(height: 8),
        Text(
          value,
          style: TextStyle(
            fontSize: 14,
            fontWeight: FontWeight.bold,
            color: color,
          ),
        ),
        const SizedBox(height: 4),
        Text(
          label,
          style: const TextStyle(
            fontSize: 10,
            color: Colors.grey,
          ),
        ),
      ],
    );
  }

  Widget _buildCategoryDistributionChart() {
    final categoryMap = <String, int>{};
    final categoryColors = <String, Color>{};

    for (var goal in _controller.goals) {
      categoryMap.update(
        goal.category,
        (value) => value + 1,
        ifAbsent: () => 1,
      );

      if (!categoryColors.containsKey(goal.category)) {
        categoryColors[goal.category] = GoalColors.hexToColor(goal.colorHex);
      }
    }

    if (categoryMap.isEmpty) return const SizedBox();

    final categories = categoryMap.keys.toList();
    final colors = categories.map((cat) => categoryColors[cat]!).toList();

    return Card(
      elevation: 4,
      shape: RoundedRectangleBorder(
        borderRadius: BorderRadius.circular(16),
      ),
      child: Padding(
        padding: const EdgeInsets.all(16),
        child: Column(
          crossAxisAlignment: CrossAxisAlignment.start,
          children: [
            Text(
              'distribution_by_category'.tr,
              style: const TextStyle(
                fontSize: 16,
                fontWeight: FontWeight.bold,
              ),
            ),
            const SizedBox(height: 12),
            SizedBox(
              height: 200,
              child: Row(
                children: [
                  Expanded(
                    flex: 3,
                    child: PieChart(
                      PieChartData(
                        sectionsSpace: 2,
                        centerSpaceRadius: 40,
                        sections: List.generate(categories.length, (i) {
                          final category = categories[i];
                          final count = categoryMap[category]!;
                          final percentage =
                              (count / _controller.goals.length * 100);

                          return PieChartSectionData(
                            color: colors[i],
                            value: percentage.toDouble(),
                            title: '${percentage.toStringAsFixed(0)}%',
                            radius: 50,
                            titleStyle: const TextStyle(
                              fontSize: 12,
                              fontWeight: FontWeight.bold,
                              color: Colors.white,
                            ),
                          );
                        }),
                      ),
                    ),
                  ),
                  Expanded(
                    flex: 2,
                    child: Column(
                      mainAxisAlignment: MainAxisAlignment.center,
                      crossAxisAlignment: CrossAxisAlignment.start,
                      children: List.generate(categories.length, (i) {
                        final category = categories[i];
                        final count = categoryMap[category]!;
                        final icon =
                            GoalCategories.getIconForCategory(category);

                        return Padding(
                          padding: const EdgeInsets.symmetric(vertical: 4),
                          child: Row(
                            children: [
                              Container(
                                width: 12,
                                height: 12,
                                decoration: BoxDecoration(
                                  color: colors[i],
                                  shape: BoxShape.circle,
                                ),
                              ),
                              const SizedBox(width: 8),
                              Text(icon, style: const TextStyle(fontSize: 14)),
                              const SizedBox(width: 4),
                              Expanded(
                                child: Text(
                                  category,
                                  style: const TextStyle(fontSize: 12),
                                  overflow: TextOverflow.ellipsis,
                                ),
                              ),
                              Text(
                                '($count)',
                                style: const TextStyle(
                                  fontSize: 12,
                                  fontWeight: FontWeight.bold,
                                ),
                              ),
                            ],
                          ),
                        );
                      }).toList(),
                    ),
                  ),
                ],
              ),
            ),
          ],
        ),
      ),
    );
  }

  Widget _buildPriorityDistributionChart() {
    final priorityCounts = {
      'low': 0,
      'medium': 0,
      'high': 0,
      'critical': 0,
    };

    final priorityColors = {
      'low': Colors.green,
      'medium': Colors.orange,
      'high': Colors.red,
      'critical': Colors.purple,
    };

    for (var goal in _controller.goals) {
      final priorityName = goal.priority.toString().split('.').last;
      priorityCounts[priorityName] = priorityCounts[priorityName]! + 1;
    }

    final priorities = ['critical', 'high', 'medium', 'low'];
    final data = priorities
        .where((p) => priorityCounts[p]! > 0)
        .map((priority) => priorityCounts[priority]!)
        .toList();

    final labels = priorities
        .where((p) => priorityCounts[p]! > 0)
        .map((priority) => priority.tr)
        .toList();

    final colors = priorities
        .where((p) => priorityCounts[p]! > 0)
        .map((priority) => priorityColors[priority]!)
        .toList();

    if (data.isEmpty) return const SizedBox();

    return Card(
      elevation: 4,
      shape: RoundedRectangleBorder(
        borderRadius: BorderRadius.circular(16),
      ),
      child: Padding(
        padding: const EdgeInsets.all(16),
        child: Column(
          crossAxisAlignment: CrossAxisAlignment.start,
          children: [
            Text(
              'distribution_by_priority'.tr,
              style: const TextStyle(
                fontSize: 16,
                fontWeight: FontWeight.bold,
              ),
            ),
            const SizedBox(height: 12),
            SizedBox(
              height: 150,
              child: BarChart(
                BarChartData(
                  alignment: BarChartAlignment.spaceAround,
                  maxY: data.reduce((a, b) => a > b ? a : b).toDouble() * 1.2,
                  barTouchData: BarTouchData(
                    enabled: true,
                    touchTooltipData: BarTouchTooltipData(
                      tooltipBgColor: Colors.white,
                      getTooltipItem: (group, groupIndex, rod, rodIndex) {
                        return BarTooltipItem(
                          '${labels[groupIndex]}\n${data[groupIndex]} ${'goals'.tr}',
                          const TextStyle(
                            color: Colors.black,
                            fontWeight: FontWeight.bold,
                          ),
                        );
                      },
                    ),
                  ),
                  titlesData: FlTitlesData(
                    bottomTitles: AxisTitles(
                      sideTitles: SideTitles(
                        showTitles: true,
                        getTitlesWidget: (value, meta) {
                          final index = value.toInt();
                          if (index >= 0 && index < labels.length) {
                            return Padding(
                              padding: const EdgeInsets.only(top: 8),
                              child: Text(
                                labels[index],
                                style: const TextStyle(fontSize: 10),
                              ),
                            );
                          }
                          return const Text('');
                        },
                      ),
                    ),
                    leftTitles: AxisTitles(
                      sideTitles: SideTitles(
                        showTitles: true,
                        interval: 1,
                        getTitlesWidget: (value, meta) {
                          return Text(
                            value.toInt().toString(),
                            style: const TextStyle(fontSize: 10),
                          );
                        },
                      ),
                    ),
                  ),
                  borderData: FlBorderData(show: false),
                  gridData: FlGridData(show: false),
                  barGroups: List.generate(data.length, (index) {
                    return BarChartGroupData(
                      x: index,
                      barRods: [
                        BarChartRodData(
                          toY: data[index].toDouble(),
                          color: colors[index],
                          width: 20,
                          borderRadius: BorderRadius.circular(4),
                        ),
                      ],
                    );
                  }),
                ),
              ),
            ),
          ],
        ),
      ),
    );
  }

  Widget _buildProgressAnalysisTable() {
    final activeGoals = _controller.activeGoals;

    return Card(
      elevation: 4,
      shape: RoundedRectangleBorder(
        borderRadius: BorderRadius.circular(16),
      ),
      child: Padding(
        padding: const EdgeInsets.all(16),
        child: Column(
          crossAxisAlignment: CrossAxisAlignment.start,
          children: [
            Text(
              'progress_analysis'.tr,
              style: const TextStyle(
                fontSize: 16,
                fontWeight: FontWeight.bold,
              ),
            ),
            const SizedBox(height: 12),
            SingleChildScrollView(
              scrollDirection: Axis.horizontal,
              child: DataTable(
                columnSpacing: 20,
                dataRowMinHeight: 40,
                columns: [
                  DataColumn(label: Text('goal'.tr)),
                  DataColumn(
                    label: Text('progress'.tr),
                    numeric: true,
                  ),
                  DataColumn(
                    label: Text('days_left'.tr),
                    numeric: true,
                  ),
                  DataColumn(
                    label: Text('daily_needed'.tr),
                    numeric: true,
                  ),
                  DataColumn(
                    label: Text('status'.tr),
                  ),
                ],
                rows: activeGoals.map((goal) {
                  final status = _getGoalStatus(goal);
                  final statusColor = _getStatusColor(status);

                  return DataRow(
                    cells: [
                      DataCell(
                        SizedBox(
                          width: 120,
                          child: Text(
                            goal.title,
                            overflow: TextOverflow.ellipsis,
                            style: const TextStyle(fontSize: 12),
                          ),
                        ),
                      ),
                      DataCell(
                        Text(
                          '${goal.progressPercentage.toStringAsFixed(1)}%',
                          style: TextStyle(
                            color: goal.progressPercentage >= 100
                                ? Colors.green
                                : Colors.blue,
                            fontWeight: FontWeight.bold,
                          ),
                        ),
                      ),
                      DataCell(
                        Text(
                          goal.daysRemaining.toString(),
                          style: TextStyle(
                            color: goal.daysRemaining <= 7
                                ? Colors.red
                                : Colors.green,
                          ),
                        ),
                      ),
                      DataCell(
                        Text(
                          '${goal.requiredDailySaving.toStringAsFixed(1)}',
                          style: const TextStyle(fontSize: 11),
                        ),
                      ),
                      DataCell(
                        Container(
                          padding: const EdgeInsets.symmetric(
                            horizontal: 8,
                            vertical: 4,
                          ),
                          decoration: BoxDecoration(
                            color: statusColor.withOpacity(0.1),
                            borderRadius: BorderRadius.circular(12),
                          ),
                          child: Text(
                            status.tr,
                            style: TextStyle(
                              fontSize: 10,
                              color: statusColor,
                              fontWeight: FontWeight.bold,
                            ),
                          ),
                        ),
                      ),
                    ],
                  );
                }).toList(),
              ),
            ),
          ],
        ),
      ),
    );
  }

  String _getGoalStatus(FinancialGoal goal) {
    if (goal.isCompleted) return 'completed';

    final progress = goal.progressPercentage;
    final daysLeft = goal.daysRemaining;

    if (progress >= 100) return 'completed';
    if (progress >= 80) return 'almost_there';
    if (daysLeft <= 7 && progress < 50) return 'at_risk';
    if (daysLeft <= 14) return 'approaching_deadline';
    if (progress >= 50) return 'on_track';
    if (progress >= 30) return 'needs_attention';
    return 'just_started';
  }

  Color _getStatusColor(String status) {
    switch (status) {
      case 'completed':
        return Colors.green;
      case 'almost_there':
        return Colors.lightGreen;
      case 'on_track':
        return Colors.blue;
      case 'needs_attention':
        return Colors.orange;
      case 'approaching_deadline':
        return Colors.orangeAccent;
      case 'at_risk':
        return Colors.red;
      case 'just_started':
        return Colors.grey;
      default:
        return Colors.grey;
    }
  }

  Widget _buildTipsSection() {
    final activeGoals = _controller.activeGoals;

    if (activeGoals.isEmpty) return const SizedBox();

    final atRiskGoals = activeGoals.where((goal) {
      final status = _getGoalStatus(goal);
      return status == 'at_risk' || status == 'needs_attention';
    }).toList();

    final upcomingGoals =
        activeGoals.where((goal) => goal.daysRemaining <= 14).toList();

    return Card(
      elevation: 4,
      shape: RoundedRectangleBorder(
        borderRadius: BorderRadius.circular(16),
      ),
      child: Padding(
        padding: const EdgeInsets.all(16),
        child: Column(
          crossAxisAlignment: CrossAxisAlignment.start,
          children: [
            Text(
              'tips_and_recommendations'.tr,
              style: const TextStyle(
                fontSize: 16,
                fontWeight: FontWeight.bold,
              ),
            ),
            const SizedBox(height: 12),
            if (atRiskGoals.isNotEmpty) ...[
              _buildTipItem(
                Icons.warning,
                Colors.orange,
                'at_risk_goals'.tr,
                '${atRiskGoals.length} ${'goals_need_attention'.tr}',
              ),
              const SizedBox(height: 8),
            ],
            if (upcomingGoals.isNotEmpty) ...[
              _buildTipItem(
                Icons.access_time,
                Colors.blue,
                'upcoming_deadlines'.tr,
                '${upcomingGoals.length} ${'goals_due_soon'.tr}',
              ),
              const SizedBox(height: 8),
            ],
            _buildTipItem(
              Icons.insights,
              Colors.green,
              'average_progress'.tr,
              '${_controller.overallProgress.toStringAsFixed(1)}% ${'of_all_goals'.tr}',
            ),
            const SizedBox(height: 8),
            _buildTipItem(
              Icons.savings,
              Colors.purple,
              'daily_saving_needed'.tr,
              '${_calculateAverageDailyNeeded(activeGoals).toStringAsFixed(1)} ${'currency_suffix'.tr} ${'per_day'.tr}',
            ),
          ],
        ),
      ),
    );
  }

  Widget _buildTipItem(
      IconData icon, Color color, String title, String subtitle) {
    return Row(
      children: [
        Icon(icon, color: color, size: 20),
        const SizedBox(width: 12),
        Expanded(
          child: Column(
            crossAxisAlignment: CrossAxisAlignment.start,
            children: [
              Text(
                title,
                style: const TextStyle(
                  fontSize: 14,
                  fontWeight: FontWeight.w600,
                ),
              ),
              Text(
                subtitle,
                style: const TextStyle(
                  fontSize: 12,
                  color: Colors.grey,
                ),
              ),
            ],
          ),
        ),
      ],
    );
  }

  double _calculateAverageDailyNeeded(List<FinancialGoal> goals) {
    if (goals.isEmpty) return 0.0;

    double totalDailyNeeded = 0.0;
    int count = 0;

    for (var goal in goals) {
      if (!goal.isCompleted && goal.daysRemaining > 0) {
        totalDailyNeeded += goal.requiredDailySaving;
        count++;
      }
    }

    return count > 0 ? totalDailyNeeded / count : 0.0;
  }
}
===================== 
FILE: E:\My Mob Projects\3 Flutter abo hamza\demos\finance_app\lib\features\goals\presentation\widgets\contribution_list.dart 
===================== 
===================== 
FILE: E:\My Mob Projects\3 Flutter abo hamza\demos\finance_app\lib\features\goals\presentation\widgets\goal_card.dart 
===================== 
===================== 
FILE: E:\My Mob Projects\3 Flutter abo hamza\demos\finance_app\lib\features\goals\presentation\widgets\progress_chart.dart 
===================== 
===================== 
FILE: E:\My Mob Projects\3 Flutter abo hamza\demos\finance_app\lib\features\search\presentation\controllers\expense_search_controller.dart 
===================== 
// lib/features/search/presentation/controllers/expense_search_controller.dart

import 'dart:async';

import 'package:get/get.dart';
import '../../../expense/presentation/controllers/expense_controller.dart';
import '../../../expense/domain/entities/expense_entity.dart';
import '../../../../core/utils/error_handler.dart';

class ExpenseSearchController extends GetxController {
  static const String TAG = 'ExpenseSearchController';

  final searchQuery = ''.obs;
  final selectedCategory = 'Ø§Ù„ÙƒÙ„'.obs;
  final selectedType = 'Ø§Ù„ÙƒÙ„'.obs;
  final minAmount = 0.0.obs;
  final maxAmount = 1000000.0.obs;
  final startDate = Rx<DateTime?>(null);
  final endDate = Rx<DateTime?>(null);
  final isFilterActive = false.obs;

  // ğŸ”§ Ø¥Ø¶Ø§ÙØ© cache Ø°ÙƒÙŠ Ù…Ø¹ ØªØªØ¨Ø¹ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª
  List<Map<String, dynamic>>? _cachedFilteredMaps;
  List<ExpenseEntity>? _cachedFilteredEntities;
  String _lastFilterHash = '';
  bool _shouldInvalidateCache = true;

  // ğŸ”§ Ø¥Ø¶Ø§ÙØ© timer Ù„Ù„Ø¨Ø­Ø«
  Timer? _searchTimer;

  @override
  void onClose() {
    _searchTimer?.cancel();
    _searchTimer = null;
    _cachedFilteredMaps = null;
    _cachedFilteredEntities = null;
    super.onClose();
  }

  @override
  void onInit() {
    super.onInit();

    // ğŸ”§ Ø¥Ø¶Ø§ÙØ© worker Ù„Ø¥Ø¨Ø·Ø§Ù„ cache Ø¹Ù†Ø¯ Ø£ÙŠ ØªØºÙŠÙŠØ±
    everAll([
      searchQuery,
      selectedCategory,
      selectedType,
      minAmount,
      maxAmount,
      startDate,
      endDate
    ], (_) {
      _shouldInvalidateCache = true;
      updateFilterStatus();
    });
  }

  // ğŸ”§ Ø¯Ø§Ù„Ø© Ù„Ø­Ø³Ø§Ø¨ hash Ù„Ù„ÙÙ„Ø§ØªØ± Ø§Ù„Ø­Ø§Ù„ÙŠØ©
  String _getFilterHash() {
    return '${searchQuery.value}_${selectedCategory.value}_${selectedType.value}_'
        '${minAmount.value}_${maxAmount.value}_'
        '${startDate.value?.millisecondsSinceEpoch}_${endDate.value?.millisecondsSinceEpoch}';
  }

  // ğŸ”§ Ø¯Ø§Ù„Ø© Ù„Ø¥Ø¨Ø·Ø§Ù„ cache
  void invalidateCache() {
    _shouldInvalidateCache = true;
    _cachedFilteredMaps = null;
    _cachedFilteredEntities = null;
  }

  void updateFilterStatus() {
    isFilterActive.value = searchQuery.value.isNotEmpty ||
        selectedCategory.value != 'Ø§Ù„ÙƒÙ„' ||
        selectedType.value != 'Ø§Ù„ÙƒÙ„' ||
        minAmount.value > 0.0 ||
        maxAmount.value < 1000000.0 ||
        startDate.value != null ||
        endDate.value != null;
  }

  List<Map<String, dynamic>> get filteredExpenses {
    try {
      // ğŸ”§ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† cache Ø£ÙˆÙ„Ø§Ù‹
      final currentHash = _getFilterHash();
      if (!_shouldInvalidateCache &&
          _cachedFilteredMaps != null &&
          _lastFilterHash == currentHash) {
        return _cachedFilteredMaps!;
      }

      final expenseController = Get.find<ExpenseController>();

      // ğŸ”§ ØªØ­Ø³ÙŠÙ†: Ø§Ø³ØªØ®Ø¯Ø§Ù… List<ExpenseEntity> Ù…Ø¨Ø§Ø´Ø±Ø© (Ø£Ø³Ø±Ø¹)
      List<ExpenseEntity> expenseEntities =
          List.from(expenseController.expenses);

      // ğŸ”§ ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙÙ„Ø§ØªØ± Ø¹Ù„Ù‰ List<ExpenseEntity> Ù…Ø¨Ø§Ø´Ø±Ø©
      if (searchQuery.value.isNotEmpty) {
        expenseEntities = expenseEntities.where((expense) {
          return expense.category.arabicName
                  .toLowerCase()
                  .contains(searchQuery.value.toLowerCase()) ||
              expense.description
                  .toLowerCase()
                  .contains(searchQuery.value.toLowerCase());
        }).toList();
      }

      if (selectedCategory.value != 'Ø§Ù„ÙƒÙ„') {
        expenseEntities = expenseEntities.where((expense) {
          return expense.category.arabicName == selectedCategory.value;
        }).toList();
      }

      if (selectedType.value != 'Ø§Ù„ÙƒÙ„') {
        expenseEntities = expenseEntities.where((expense) {
          if (selectedType.value == 'Ø¯Ø®Ù„') return expense.isIncome == true;
          if (selectedType.value == 'Ù…ØµØ±ÙˆÙ') return expense.isIncome == false;
          return true;
        }).toList();
      }

      expenseEntities = expenseEntities.where((expense) {
        return expense.amount >= minAmount.value &&
            expense.amount <= maxAmount.value;
      }).toList();

      if (startDate.value != null) {
        expenseEntities = expenseEntities.where((expense) {
          return expense.date.isAfter(startDate.value!);
        }).toList();
      }

      if (endDate.value != null) {
        expenseEntities = expenseEntities.where((expense) {
          return expense.date.isBefore(endDate.value!);
        }).toList();
      }

      // ğŸ”§ Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ Ø¥Ù„Ù‰ Map Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø© ÙÙ‚Ø·
      final List<Map<String, dynamic>> result =
          expenseEntities.map((expense) => expense.toMap()).toList();

      // ğŸ”§ Ø§Ù„ØªØ±ØªÙŠØ¨ Ø¹Ù„Ù‰ List<Map> (Ø£Ø³Ø±Ø¹ Ø¨Ø¹Ø¯ Ø§Ù„ÙÙ„ØªØ±Ø©)
      result.sort((a, b) {
        try {
          final dateA = DateTime.parse(a['date']);
          final dateB = DateTime.parse(b['date']);
          return dateB.compareTo(dateA);
        } catch (e) {
          return 0;
        }
      });

      // ğŸ”§ ØªØ­Ø¯ÙŠØ« cache
      _cachedFilteredMaps = result;
      _cachedFilteredEntities = expenseEntities;
      _lastFilterHash = currentHash;
      _shouldInvalidateCache = false;

      return result;
    } catch (e) {
      ErrorHandler.showError('Ø®Ø·Ø£ ÙÙŠ ØªØµÙÙŠØ© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª: $e');
      return [];
    }
  }

  List<ExpenseEntity> get filteredExpenseEntities {
    try {
      // ğŸ”§ Ø§Ø³ØªØ®Ø¯Ø§Ù… cache Ø¥Ø°Ø§ Ù…ØªÙˆÙØ±
      if (_cachedFilteredEntities != null && !_shouldInvalidateCache) {
        return _cachedFilteredEntities!;
      }

      // ğŸ”§ Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† ÙÙŠ cacheØŒ Ø§Ø­Ø³Ø¨ Ù…Ù† filteredExpenses (Ø§Ù„ØªÙŠ Ø³ØªØ­Ø¯Ø« cache)
      if (filteredExpenses.isNotEmpty && _cachedFilteredEntities != null) {
        return _cachedFilteredEntities!;
      }

      // ğŸ”§ Ø§Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…Ø¨Ø§Ø´Ø± (Ù†ÙØ³ Ù…Ù†Ø·Ù‚ filteredExpenses Ù„ÙƒÙ† ÙŠØ±Ø¬Ø¹ Entities Ù…Ø¨Ø§Ø´Ø±Ø©)
      final expenseController = Get.find<ExpenseController>();
      List<ExpenseEntity> expenses = List.from(expenseController.expenses);

      if (searchQuery.value.isNotEmpty) {
        expenses = expenses.where((expense) {
          return expense.category.arabicName
                  .toLowerCase()
                  .contains(searchQuery.value.toLowerCase()) ||
              expense.description
                  .toLowerCase()
                  .contains(searchQuery.value.toLowerCase());
        }).toList();
      }

      if (selectedCategory.value != 'Ø§Ù„ÙƒÙ„') {
        expenses = expenses.where((expense) {
          return expense.category.arabicName == selectedCategory.value;
        }).toList();
      }

      if (selectedType.value != 'Ø§Ù„ÙƒÙ„') {
        expenses = expenses.where((expense) {
          if (selectedType.value == 'Ø¯Ø®Ù„') return expense.isIncome == true;
          if (selectedType.value == 'Ù…ØµØ±ÙˆÙ') return expense.isIncome == false;
          return true;
        }).toList();
      }

      expenses = expenses.where((expense) {
        return expense.amount >= minAmount.value &&
            expense.amount <= maxAmount.value;
      }).toList();

      if (startDate.value != null) {
        expenses = expenses.where((expense) {
          return expense.date.isAfter(startDate.value!);
        }).toList();
      }

      if (endDate.value != null) {
        expenses = expenses.where((expense) {
          return expense.date.isBefore(endDate.value!);
        }).toList();
      }

      expenses.sort((a, b) => b.date.compareTo(a.date));

      // ğŸ”§ ØªØ­Ø¯ÙŠØ« cache
      _cachedFilteredEntities = expenses;
      _shouldInvalidateCache = false;

      return expenses;
    } catch (e) {
      ErrorHandler.showError('Ø®Ø·Ø£ ÙÙŠ ØªØµÙÙŠØ© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª: $e');
      return [];
    }
  }

  int get filteredCount => filteredExpenses.length;

  void resetFilters() {
    searchQuery.value = '';
    selectedCategory.value = 'Ø§Ù„ÙƒÙ„';
    selectedType.value = 'Ø§Ù„ÙƒÙ„';
    minAmount.value = 0.0;
    maxAmount.value = 1000000.0;
    startDate.value = null;
    endDate.value = null;
    invalidateCache(); // ğŸ”§ Ø¥Ø¨Ø·Ø§Ù„ cache Ø¹Ù†Ø¯ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ¹ÙŠÙŠÙ†
    ErrorHandler.showSuccess('ØªÙ… Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙÙ„Ø§ØªØ±');
  }

  Map<String, dynamic> getFilterSummary() {
    return {
      'searchQuery': searchQuery.value,
      'category': selectedCategory.value,
      'type': selectedType.value,
      'amountRange': '${minAmount.value} - ${maxAmount.value}',
      'dateRange': startDate.value != null && endDate.value != null
          ? '${startDate.value!.toIso8601String()} to ${endDate.value!.toIso8601String()}'
          : 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯',
      'resultCount': filteredCount,
    };
  }

  // Ø¯Ø§Ù„Ø© Ù…Ø³Ø§Ø¹Ø¯Ø© Ù„Ù„Ø¨Ø­Ø« Ø§Ù„Ø³Ø±ÙŠØ¹
  List<ExpenseEntity> quickSearch(String query) {
    final expenseController = Get.find<ExpenseController>();
    return expenseController.expenses.where((expense) {
      return expense.category.arabicName.contains(query) ||
          expense.description.contains(query) ||
          expense.amount.toString().contains(query);
    }).toList();
  }
}
===================== 
FILE: E:\My Mob Projects\3 Flutter abo hamza\demos\finance_app\lib\features\search\presentation\pages\filter_page.dart 
===================== 
// lib/features/search/presentation/pages/filter_page.dart

import 'package:flutter/material.dart';
import 'package:get/get.dart';
import 'package:intl/intl.dart';

import '../controllers/expense_search_controller.dart';
import '../../../expense/presentation/controllers/expense_controller.dart';
import '../../../../core/models/enums.dart';

class FilterPage extends StatefulWidget {
  const FilterPage({super.key});

  @override
  State<FilterPage> createState() => _FilterPageState();
}

class _FilterPageState extends State<FilterPage> {
  final ExpenseSearchController searchController =
      Get.find<ExpenseSearchController>(tag: ExpenseSearchController.TAG);
  final ExpenseController expenseController = Get.find<ExpenseController>();

  String? _selectedCategory;
  String? _selectedType;

  @override
  void initState() {
    super.initState();
    _selectedCategory = searchController.selectedCategory.value;
    _selectedType = searchController.selectedType.value;
  }

  @override
  Widget build(BuildContext context) {
    final uniqueCategories = _getUniqueCategories();
    final categories = ['all'.tr, ...uniqueCategories]; // âœ… Changed from 'Ø§Ù„ÙƒÙ„'
    final types = [
      'all'.tr,
      'income'.tr,
      'expense'.tr
    ]; // âœ… Changed from ['Ø§Ù„ÙƒÙ„', 'Ø¯Ø®Ù„', 'Ù…ØµØ±ÙˆÙ']

    return Scaffold(
      appBar: AppBar(
        title: Text('filter_transactions'.tr),
        centerTitle: true,
        actions: [
          TextButton(
            onPressed: () {
              searchController.resetFilters();
              setState(() {
                _selectedCategory = 'all'.tr; // âœ… Changed from 'Ø§Ù„ÙƒÙ„'
                _selectedType = 'all'.tr; // âœ… Changed from 'Ø§Ù„ÙƒÙ„'
              });
              Get.back();
            },
            child: Text('reset_all'.tr), // âœ… Changed from 'Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ†'
          ),
        ],
      ),
      body: SingleChildScrollView(
        padding: const EdgeInsets.all(20),
        child: Column(
          crossAxisAlignment: CrossAxisAlignment.start,
          children: [
            _buildSearchSection(),
            const SizedBox(height: 24),
            _buildFilterSection(
              'category'.tr, // âœ… Changed from 'Ø§Ù„ÙØ¦Ø©'
              Icons.category,
              categories,
              _selectedCategory ?? 'all'.tr, // âœ… Changed from 'Ø§Ù„ÙƒÙ„'
              (value) {
                setState(() {
                  _selectedCategory = value;
                });
                searchController.selectedCategory.value = value;
              },
            ),
            const SizedBox(height: 24),
            _buildFilterSection(
              'type'.tr, // âœ… Changed from 'Ø§Ù„Ù†ÙˆØ¹'
              Icons.swap_vert,
              types,
              _selectedType ?? 'all'.tr, // âœ… Changed from 'Ø§Ù„ÙƒÙ„'
              (value) {
                setState(() {
                  _selectedType = value;
                });
                searchController.selectedType.value = value;
              },
            ),
            const SizedBox(height: 24),
            _buildAmountRangeSection(),
            const SizedBox(height: 32),
            _buildResultsStats(),
            const SizedBox(height: 32),
            _buildActionButtons(),
          ],
        ),
      ),
    );
  }

  Widget _buildSearchSection() {
    return Card(
      elevation: 2,
      shape: RoundedRectangleBorder(
        borderRadius: BorderRadius.circular(16),
      ),
      child: Padding(
        padding: const EdgeInsets.all(16),
        child: Column(
          crossAxisAlignment: CrossAxisAlignment.start,
          children: [
            Row(
              children: [
                const Icon(Icons.search, color: Colors.blue),
                const SizedBox(width: 8),
                Text(
                  'search'.tr, // âœ… Changed from 'Ø§Ù„Ø¨Ø­Ø«'
                  style: const TextStyle(
                    fontSize: 16,
                    fontWeight: FontWeight.bold,
                  ),
                ),
              ],
            ),
            const SizedBox(height: 12),
            TextField(
              controller: TextEditingController(
                text: searchController.searchQuery.value,
              ),
              decoration: InputDecoration(
                hintText: 'filter_search_hint'.tr,
                border: OutlineInputBorder(
                  borderRadius: BorderRadius.circular(12),
                ),
                filled: true,
                fillColor: Get.isDarkMode ? Colors.grey[800] : Colors.grey[50],
              ),
              onChanged: (value) {
                searchController.searchQuery.value = value;
              },
            ),
          ],
        ),
      ),
    );
  }

  Widget _buildFilterSection(
    String title,
    IconData icon,
    List<String> options,
    String selectedValue,
    Function(String) onSelected,
  ) {
    return Card(
      elevation: 2,
      shape: RoundedRectangleBorder(
        borderRadius: BorderRadius.circular(16),
      ),
      child: Padding(
        padding: const EdgeInsets.all(16),
        child: Column(
          crossAxisAlignment: CrossAxisAlignment.start,
          children: [
            Row(
              children: [
                Icon(icon, color: Colors.blue),
                const SizedBox(width: 8),
                Text(
                  title,
                  style: const TextStyle(
                    fontSize: 16,
                    fontWeight: FontWeight.bold,
                  ),
                ),
              ],
            ),
            const SizedBox(height: 12),
            Wrap(
              spacing: 8,
              runSpacing: 8,
              children: options.map((option) {
                return ChoiceChip(
                  label: Text(option),
                  selected: selectedValue == option,
                  onSelected: (isSelected) {
                    if (isSelected) {
                      onSelected(option);
                    }
                  },
                  selectedColor: Colors.blue.withOpacity(0.2),
                  labelStyle: TextStyle(
                    color: selectedValue == option
                        ? Colors.blue
                        : Get.isDarkMode
                            ? Colors.white
                            : Colors.black,
                  ),
                );
              }).toList(),
            ),
          ],
        ),
      ),
    );
  }

  Widget _buildAmountRangeSection() {
    return Card(
      elevation: 2,
      shape: RoundedRectangleBorder(
        borderRadius: BorderRadius.circular(16),
      ),
      child: Padding(
        padding: const EdgeInsets.all(16),
        child: Column(
          crossAxisAlignment: CrossAxisAlignment.start,
          children: [
            Row(
              children: [
                const Icon(Icons.attach_money, color: Colors.blue),
                const SizedBox(width: 8),
                Text(
                  'filter_amount_range'.tr, // âœ… Changed from 'Ù†Ø·Ø§Ù‚ Ø§Ù„Ù…Ø¨Ù„Øº'
                  style: const TextStyle(
                    fontSize: 16,
                    fontWeight: FontWeight.bold,
                  ),
                ),
              ],
            ),
            const SizedBox(height: 12),
            Row(
              children: [
                Expanded(
                  child: Text(
                    '${'min'.tr}: ${searchController.minAmount.value.toInt()} ${'currency_suffix'.tr}', // âœ… Added translations
                    textAlign: TextAlign.center,
                  ),
                ),
                Expanded(
                  child: Text(
                    '${'max'.tr}: ${searchController.maxAmount.value.toInt()} ${'currency_suffix'.tr}', // âœ… Added translations
                    textAlign: TextAlign.center,
                  ),
                ),
              ],
            ),
            const SizedBox(height: 8),
            RangeSlider(
              values: RangeValues(
                searchController.minAmount.value.clamp(0.0, 10000.0),
                searchController.maxAmount.value.clamp(0.0, 10000.0),
              ),
              min: 0,
              max: 10000,
              divisions: 100,
              onChanged: (values) {
                setState(() {
                  searchController.minAmount.value = values.start;
                  searchController.maxAmount.value = values.end;
                });
              },
            ),
          ],
        ),
      ),
    );
  }

  Widget _buildResultsStats() {
    return Card(
      elevation: 2,
      shape: RoundedRectangleBorder(
        borderRadius: BorderRadius.circular(16),
      ),
      child: Padding(
        padding: const EdgeInsets.all(16),
        child: Column(
          crossAxisAlignment: CrossAxisAlignment.start,
          children: [
            Text(
              'search_results'.tr, // âœ… Changed from 'Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø¨Ø­Ø«'
              style: const TextStyle(
                fontSize: 16,
                fontWeight: FontWeight.bold,
              ),
            ),
            const SizedBox(height: 12),
            Obx(() {
              final filteredCount = searchController.filteredExpenses.length;
              final totalCount = expenseController.expenses.length;

              return Column(
                children: [
                  Text(
                    'found'.trParams({
                      // âœ… Changed with parameters
                      'filtered': filteredCount.toString(),
                      'total': totalCount.toString()
                    }),
                    style: const TextStyle(fontSize: 14),
                  ),
                  const SizedBox(height: 8),
                  LinearProgressIndicator(
                    value: totalCount > 0 ? filteredCount / totalCount : 0,
                    backgroundColor: Colors.grey[300],
                    valueColor: AlwaysStoppedAnimation<Color>(
                      filteredCount > 0 ? Colors.green : Colors.grey,
                    ),
                  ),
                ],
              );
            }),
          ],
        ),
      ),
    );
  }

  Widget _buildActionButtons() {
    return Column(
      children: [
        SizedBox(
          width: double.infinity,
          height: 56,
          child: ElevatedButton(
            onPressed: () {
              Get.back();
            },
            child: Text('apply_filters'.tr), // âœ… Changed from 'ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙÙ„ØªØ±Ø©'
            style: ElevatedButton.styleFrom(
              shape: RoundedRectangleBorder(
                borderRadius: BorderRadius.circular(12),
              ),
            ),
          ),
        ),
        const SizedBox(height: 12),
        SizedBox(
          width: double.infinity,
          height: 56,
          child: OutlinedButton(
            onPressed: () {
              searchController.resetFilters();
              setState(() {
                _selectedCategory = 'all'.tr; // âœ… Changed from 'Ø§Ù„ÙƒÙ„'
                _selectedType = 'all'.tr; // âœ… Changed from 'Ø§Ù„ÙƒÙ„'
              });
              Get.back();
            },
            child: Text(
                'clear_all_filters'.tr), // âœ… Changed from 'Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„ÙƒÙ„'
            style: OutlinedButton.styleFrom(
              shape: RoundedRectangleBorder(
                borderRadius: BorderRadius.circular(12),
              ),
            ),
          ),
        ),
      ],
    );
  }

  // âœ… **Ø§Ù„Ø¯Ø§Ù„Ø© Ø§Ù„Ù…ØµØ­Ø­Ø©:**
  List<String> _getUniqueCategories() {
    final categories = <String>{};
    for (var expense in expenseController.expenses) {
      categories.add(expense.category.arabicName);
    }
    return categories.toList()..sort();
  }
}
---------------------------------
pubspec.yaml file  :


name: finance_app
description: Finance App - ØªØ·Ø¨ÙŠÙ‚ Ù…Ø§Ù„ÙŠ Ù…ØªÙƒØ§Ù…Ù„ Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©
publish_to: 'none'
version: 1.1.0+1

environment:
  sdk: '>=3.0.0 <4.0.0'

dependencies:
  flutter:
    sdk: flutter

  flutter_localizations:
    sdk: flutter

  # âœ… Enhanced Secuirty & Storage     
  flutter_secure_storage: ^9.0.0
  get_storage: ^2.1.1
  
  # âœ… Enhanced Encryption
  encrypt: ^5.0.1
  crypto: ^3.0.3
  
  # âœ… State Management & UI
  get: ^4.6.5
  google_fonts: ^7.0.0
  intl: any
  
  # âœ… File Operation & Sharing 
  share_plus: ^7.0.1
  path_provider: ^2.1.1
  file_picker: ^8.0.0
  
  # âœ… Utilities
  uuid: ^4.3.0

  # âœ… Chart & Ananlytics 
  fl_chart: ^0.66.0
  
  # âœ… Export & Data Hanlding
  csv: ^5.0.2

  # âœ…Enhanced Logging
  logger: ^2.0.0


 # âœ… Optional: For production analytics (uncomment when needed)
  # firebase_core: ^2.24.2
  # firebase_analytics: ^10.7.2
  # firebase_crashlytics: ^3.2.4

dev_dependencies:
  flutter_test:
    sdk: flutter
  flutter_lints: ^2.0.0
  
  # for Testing
  mockito:  ^5.4.0

flutter:
  uses-material-design: true
  
  assets:
  - assets/lang/en.json
  - assets/lang/ar.json
  
  # fonts:
  # - family: Cairo
  #   fonts:
  #     - asset: assets/fonts/Cairo-Regular.ttf

------------------------------
assets/lang/ar.json  file
{
  "app_title": "ØªØ·Ø¨ÙŠÙ‚ Ù…Ø§Ù„ÙŠ",
  "add_income": "Ø§Ø¶Ø§ÙØ© Ø¯Ø®Ù„",
  "add_expense": "Ø¥Ø¶Ø§ÙØ© Ù…ØµØ±ÙˆÙ",
  "edit_expense": "ØªØ¹Ø¯ÙŠÙ„ Ù…ØµØ±ÙˆÙ",
  "add_new_expense": "Ø§Ø¶Ø§ÙØ© Ù…ØµØ±ÙˆÙ Ø¬Ø¯ÙŠØ¯",
  "add_new_income": "Ø§Ø¶Ø§ÙØ© Ø¯Ø®Ù„ Ø¬Ø¯ÙŠØ¯",
  "budget": "Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ©",
  "amount": "Ø§Ù„Ù…Ø¨Ù„Øº",
  "reports": "Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± ÙˆØ§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª",
  "alerts": "Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª",
  "backup": "Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ",
  "monthly_analysis": "Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø´Ù‡Ø±ÙŠ",
  "settings": "Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª",
  "language": "Ø§Ù„Ù„ØºØ©",
  "income": "Ø¯Ø®Ù„",
  "expense": "Ù…ØµØ±ÙˆÙ",
  "balance": "Ø§Ù„Ø±ØµÙŠØ¯",
  "category": "Ø§Ù„ÙØ¦Ø©",
  "food": "Ø·Ø¹Ø§Ù…",
  "transportation": "Ù…ÙˆØ§ØµÙ„Ø§Øª",
  "marketing": "ØªØ³ÙˆÙ‚",
  "entertainment": "ØªØ±ÙÙŠÙ‡",
  "health": "ØµØ­Ø©",
  "learn": "ØªØ¹Ù„ÙŠÙ…",
  "living": "Ø³ÙƒÙ†",
  "bills": "ÙÙˆØ§ØªÙŠØ±",
  "salary": "Ù…Ø±ØªØ¨",
  "investment": "Ø§Ø³ØªØ«Ù…Ø§Ø±",
  "gifts": "Ù‡Ø¯Ø§ÙŠØ§",
  "others": "Ø£Ø®Ø±Ù‰",
  "date": "Ø§Ù„ØªØ§Ø±ÙŠØ®",
  "description": "Ø§Ù„ÙˆØµÙ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)",
  "save_transaction": "Ø­ÙØ¸ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©",
  "payment_method": "Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹",
  "cash": "Ù†Ù‚Ø¯ÙŠ",
  "credit_card": "Ø¨Ø·Ø§Ù‚Ø© Ø§Ø¦ØªÙ…Ø§Ù†",
  "bank_transfer": "ØªØ­ÙˆÙŠÙ„ Ø¨Ù†ÙƒÙŠ",
  "e_wallet": "Ù…Ø­ÙØ¸Ø© Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©",
  "cheque": "Ø´ÙŠÙƒ",
  "enter_valid_number": "Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù…Ù‹Ø§ ØµØ­ÙŠØ­Ù‹Ø§",
  "edit_income": "ØªØ¹Ø¯ÙŠÙ„ Ø¯Ø®Ù„",
  "save_changes": "Ø­ÙØ¸ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª",
  "delete_transaction": "Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©",
  "delete_transaction_question": "Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©ØŸ",
  "cancel": "Ø¥Ù„ØºØ§Ø¡",
  "confirm_delete": "ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø°Ù",
  "recent_transactions": "Ø¢Ø®Ø± Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª",
  "search_results": "Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø¨Ø­Ø«",
  "filter": "ØªØµÙÙŠØ©",
  "search_transactions": "Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª",
  "add_new": "Ø¥Ø¶Ø§ÙØ© Ø¬Ø¯ÙŠØ¯",
  "currency_suffix": "Ø¬.Ù…",
  "all": "Ø§Ù„ÙƒÙ„",
  "set_budget": "ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ©",
  "max_limit": "Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰",
  "remaining": "Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ",
  "spent": "Ø§Ù„Ù…ØµØ±ÙˆÙ",
  "total_income": "Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¯Ø®Ù„",
  "total_expense": "Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª",
  "monthly_report": "Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø´Ù‡Ø±ÙŠ",
  "yearly_report": "Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø³Ù†ÙˆÙŠ",
  "apply_filters": "ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙÙ„Ø§ØªØ±",
  "clear_filters": "Ù…Ø³Ø­ Ø§Ù„ÙÙ„Ø§ØªØ±",
  "advanced_filter": "ØªØµÙÙŠØ© Ù…ØªÙ‚Ø¯Ù…Ø©",
  "applied_filters": "Ø§Ù„ÙÙ„Ø§ØªØ± Ø§Ù„Ù…Ø·Ø¨Ù‚Ø©",
  "add_alert": "Ø¥Ø¶Ø§ÙØ© ØªÙ†Ø¨ÙŠÙ‡",
  "delete_alert": "Ø­Ø°Ù Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡",
  "alert_message": "Ø±Ø³Ø§Ù„Ø© Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡",
  "alert_time": "ÙˆÙ‚Øª Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡",
  "restore": "Ø§Ø³ØªØ¹Ø§Ø¯Ø©",
  "confirm_restore": "ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø§Ø³ØªØ¹Ø§Ø¯Ø©",
  "backup_success": "ØªÙ… Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ Ø¨Ù†Ø¬Ø§Ø­",
  "restore_success": "ØªÙ…Øª Ø§Ù„Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø¨Ù†Ø¬Ø§Ø­",
  "budget_saved_success": "ØªÙ… Ø­ÙØ¸ Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­",
  "budget_exceeded": "Ù„Ù‚Ø¯ ØªØ¬Ø§ÙˆØ²Øª Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ©",
  "save": "Ø­ÙØ¸",
  "yes": "Ù†Ø¹Ù…",
  "no": "Ù„Ø§",
  "light_mode": "Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„ÙØ§ØªØ­",
  "dark_mode": "Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø¯Ø§ÙƒÙ†",
  "clear_all_data": "Ù…Ø³Ø­ ÙƒÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª",
  "confirm_clear_all": "Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ø£Ù†Ùƒ ØªØ±ÙŠØ¯ Ù…Ø³Ø­ ÙƒÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§ØªØŸ",
  "of": "Ù…Ù†",
  "transactions": "Ù…Ø¹Ø§Ù…Ù„Ø§Øª",
  "no_transactions": "Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ø­ØªÙ‰ Ø§Ù„Ø¢Ù†",
  "start_first_transaction": "Ø§Ø¨Ø¯Ø£ Ø¨Ø¥Ø¶Ø§ÙØ© Ø£ÙˆÙ„ Ù…Ø¹Ø§Ù…Ù„Ø© Ù„Ùƒ",
  "no_search_results": "Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬ Ù„Ù„Ø¨Ø­Ø«",
  "search": "Ø¨Ø­Ø«",
  "clear_all_filters": "Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙÙ„Ø§ØªØ±",
  "transaction_details": "ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©",
  "type": "Ø§Ù„Ù†ÙˆØ¹",
  "close": "Ø¥ØºÙ„Ø§Ù‚",
  "error": "Ø®Ø·Ø£",
  "transaction_not_found": "Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø© ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯Ø©",
  "deleted": "ØªÙ… Ø§Ù„Ø­Ø°Ù",
  "transaction_deleted_success": "ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø© Ø¨Ù†Ø¬Ø§Ø­",
  "duplicated": "ØªÙ… Ø§Ù„Ù†Ø³Ø®",
  "transaction_duplicated_success": "ØªÙ… Ù†Ø³Ø® Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø© Ø¨Ù†Ø¬Ø§Ø­",
  "duplicate_failed": "ÙØ´Ù„ ÙÙŠ Ù†Ø³Ø® Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©",
  "manage_budget": "Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ©",
  "budget_summary": "Ù…Ù„Ø®Øµ Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ©",
  "monthly_budget": "Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ© Ø§Ù„Ø´Ù‡Ø±ÙŠØ©",
  "amount_with_currency": "Ø§Ù„Ù…Ø¨Ù„Øº (Ø¬.Ù…)",
  "spent_percentage": "ØªÙ… Ø¥Ù†ÙØ§Ù‚ {value}% Ù…Ù† Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ©",
  "category_budget": "Ù…ÙŠØ²Ø§Ù†ÙŠØ© Ø§Ù„ÙØ¦Ø§Øª",
  "set_category_budget": "Ø­Ø¯Ø¯ Ù…ÙŠØ²Ø§Ù†ÙŠØ© Ù„ÙƒÙ„ ÙØ¦Ø© Ù…Ù† ÙØ¦Ø§Øª Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª",
  "notes": "Ù…Ù„Ø§Ø­Ø¸Ø§Øª",
  "note_budget_control": "â€¢ Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ© ØªØ³Ø§Ø¹Ø¯Ùƒ Ø¹Ù„Ù‰ Ø§Ù„ØªØ­ÙƒÙ… ÙÙŠ Ø¥Ù†ÙØ§Ù‚Ùƒ",
  "note_budget_alert": "â€¢ Ø³ÙŠØªÙ… Ø¥Ø¹Ù„Ø§Ù…Ùƒ Ø¹Ù†Ø¯ Ø§Ù‚ØªØ±Ø§Ø¨Ùƒ Ù…Ù† ØªØ¬Ø§ÙˆØ² Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ©",
  "note_budget_edit": "â€¢ ÙŠÙ…ÙƒÙ†Ùƒ ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ© ÙÙŠ Ø£ÙŠ ÙˆÙ‚Øª",
  "show_summary": "Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù„Ø®Øµ",
  "reset": "Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ†",
  "ok": "Ø­Ø³Ù†Ø§Ù‹",
  "saved": "ØªÙ… Ø§Ù„Ø­ÙØ¸",
  "monthly_budget_updated": "ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ© Ø§Ù„Ø´Ù‡Ø±ÙŠØ©",
  "category_budget_updated": "ØªÙ… ØªØ­Ø¯ÙŠØ« Ù…ÙŠØ²Ø§Ù†ÙŠØ© Ø§Ù„ÙØ¦Ø©",
  "no_reports": "Ù„Ø§ ØªÙˆØ¬Ø¯ ØªÙ‚Ø§Ø±ÙŠØ± Ù…ØªØ§Ø­Ø©",
  "no_data": "Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„Ø¹Ø±Ø¶",
  "statistics": "Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª",
  "monthly_balance": "Ø±ØµÙŠØ¯ Ø§Ù„Ø´Ù‡Ø±",
  "income_distribution": "ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ø¯Ø®Ù„",
  "expense_distribution": "ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª",
  "additional_stats": "Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø¥Ø¶Ø§ÙÙŠØ©",
  "total_transactions": "Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª",
  "current_balance": "Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ø­Ø§Ù„ÙŠ",
  "export_data": "ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª",
  "save_copy": "Ø­ÙØ¸ Ù†Ø³Ø®Ø© Ù…Ù† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª",
  "compare_previous_months": "Ù…Ù‚Ø§Ø±Ù†Ø© Ø§Ù„Ø£Ø´Ù‡Ø± Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©",
  "no_transactions_to_export": "Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ù„ØªØµØ¯ÙŠØ±Ù‡Ø§",
  "export_success": "ØªÙ… Ø§Ù„ØªØµØ¯ÙŠØ± Ø¨Ù†Ø¬Ø§Ø­",
  "export_file_saved": "ØªÙ… Ø­ÙØ¸ Ù…Ù„Ù Ø§Ù„ØªØµØ¯ÙŠØ± Ø¨Ù†Ø¬Ø§Ø­",
  "export_error": "Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØµØ¯ÙŠØ±",
  "export_failed": "Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ØªØµØ¯ÙŠØ±: $e",
  "january": "ÙŠÙ†Ø§ÙŠØ±",
  "february": "ÙØ¨Ø±Ø§ÙŠØ±",
  "march": "Ù…Ø§Ø±Ø³",
  "april": "Ø£Ø¨Ø±ÙŠÙ„",
  "may": "Ù…Ø§ÙŠÙˆ",
  "june": "ÙŠÙˆÙ†ÙŠÙˆ",
  "july": "ÙŠÙˆÙ„ÙŠÙˆ",
  "august": "Ø£ØºØ³Ø·Ø³",
  "september": "Ø³Ø¨ØªÙ…Ø¨Ø±",
  "october": "Ø£ÙƒØªÙˆØ¨Ø±",
  "november": "Ù†ÙˆÙÙ…Ø¨Ø±",
  "december": "Ø¯ÙŠØ³Ù…Ø¨Ø±",
  "reset_all": "Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„ÙƒÙ„",
  "found": "ØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ {filtered} Ù…Ù† Ø£ØµÙ„ {total}",
  "search_hint": "Ø§Ø¨Ø­Ø« Ø¨Ø§Ù„ÙˆØµÙ Ø£Ùˆ Ø§Ù„ÙØ¦Ø©...",
  "filter_transactions": "ØªØµÙÙŠØ© Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª",
  "budget_alerts": "ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ©",
  "budget_alert_threshold": "Ø¹Ù†Ø¯ Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ {value}% Ù…Ù† Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ©",
  "large_expense_alert": "ØªÙ†Ø¨ÙŠÙ‡ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª Ø§Ù„ÙƒØ¨ÙŠØ±Ø©",
  "large_expense_alert_threshold": "Ø¹Ù†Ø¯ Ø¥Ù†ÙØ§Ù‚ Ø£ÙƒØ«Ø± Ù…Ù† {value} {currency}",
  "daily_summary": "Ù…Ù„Ø®Øµ ÙŠÙˆÙ…ÙŠ",
  "daily_summary_desc": "Ø¹Ø±Ø¶ Ù…Ù„Ø®Øµ ÙŠÙˆÙ…ÙŠ Ù„Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª ÙˆØ§Ù„Ù…ØµØ±ÙˆÙØ§Øª",
  "test_alerts": "Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª",
  "min": "Ù…Ù†",
  "max": "Ø¥Ù„Ù‰",
  "actions": "Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª",
  "create_backup": "Ø¥Ù†Ø´Ø§Ø¡ Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© ÙƒØ§Ù…Ù„Ø©",
  "restore_backup_desc": "ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ù…Ù„Ù Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ",
  "important_tips": "ğŸ’¡ Ù†ØµØ§Ø¦Ø­ Ù…Ù‡Ù…Ø©",
  "tip_weekly_backup": "Ù‚Ù… Ø¨Ø¥Ù†Ø´Ø§Ø¡ Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ø£Ø³Ø¨ÙˆØ¹ÙŠØ§Ù‹",
  "tip_save_location": "Ø§Ø­ÙØ¸ Ù…Ù„ÙØ§Øª Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ ÙÙŠ Ù…ÙƒØ§Ù† Ø¢Ù…Ù†",
  "tip_dont_share": "Ù„Ø§ ØªØ´Ø§Ø±Ùƒ Ù…Ù„ÙØ§Øª Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ Ù…Ø¹ Ø§Ù„Ø¢Ø®Ø±ÙŠÙ†",
  "tip_cross_device": "ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø¹Ù„Ù‰ Ø£ÙŠ Ø¬Ù‡Ø§Ø²",
  "backup_stats": "Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ",
  "backup_files": "Ù…Ù„ÙØ§Øª Ø§Ù„Ù†Ø³Ø®",
  "last_backup": "Ø¢Ø®Ø± Ù†Ø³Ø®Ø©",
  "security_note": "Ù…Ù„Ø§Ø­Ø¸Ø© Ø£Ù…Ù†ÙŠØ© Ù…Ù‡Ù…Ø©",
  "security_note_desc": "Ø¨ÙŠØ§Ù†Ø§ØªÙƒ Ù…Ø®Ø²Ù†Ø© Ù…Ø­Ù„ÙŠØ§Ù‹ Ø¹Ù„Ù‰ Ø¬Ù‡Ø§Ø²Ùƒ ÙˆÙ„Ø§ ÙŠØªÙ… Ø±ÙØ¹Ù‡Ø§ Ù„Ø£ÙŠ Ù…ÙƒØ§Ù†. ØªØ£ÙƒØ¯ Ù…Ù† Ø­ÙØ¸ Ù…Ù„ÙØ§Øª Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ ÙÙŠ Ù…ÙƒØ§Ù† Ø¢Ù…Ù†.",
  "advanced_options": "Ø®ÙŠØ§Ø±Ø§Øª Ù…ØªÙ‚Ø¯Ù…Ø©",
  "clear_backup_history": "Ù…Ø³Ø­ ØªØ§Ø±ÙŠØ® Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ",
  "clear_backup_history_desc": "Ø­Ø°Ù Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¢Ø®Ø± Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©",
  "system_info": "Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¹Ù† Ø§Ù„Ù†Ø¸Ø§Ù…",
  "system_info_desc": "Ø¹Ø±Ø¶ ØªÙØ§ØµÙŠÙ„ ØªØ®Ø²ÙŠÙ† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª",
  "local_storage": "ØªØ®Ø²ÙŠÙ† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­Ù„ÙŠ",
  "storage_getstorage": "Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ÙŠØ³ØªØ®Ø¯Ù… GetStorage Ù„Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ",
  "storage_encryption": "Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø´ÙØ±Ø© Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… AES-256",
  "storage_temp_files": "Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…Ø¤Ù‚ØªØ© ØªØ®Ø²Ù† ÙÙŠ Ù…Ø¬Ù„Ø¯ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚",
  "compatibility": "Ø§Ù„ØªÙˆØ§ÙÙ‚",
  "compat_android_ios": "ØªØ¯Ø¹Ù… Android Ùˆ iOS",
  "compat_restore_any": "ÙŠÙ…ÙƒÙ† Ø§Ù„Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø¹Ù„Ù‰ Ø£ÙŠ Ø¬Ù‡Ø§Ø²",
  "compat_data_format": "ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª: JSON",
  "monthly_analysis_comparison": "ØªØ­Ù„ÙŠÙ„ Ø´Ù‡Ø±ÙŠ - Ù…Ù‚Ø§Ø±Ù†Ø© Ø§Ù„Ø£Ø´Ù‡Ø±",
  "out_of": "Ù…Ù† Ø£ØµÙ„",
  "monthly_comparison": "Ù…Ù‚Ø§Ø±Ù†Ø© Ø§Ù„Ø¯Ø®Ù„ ÙˆØ§Ù„Ù…ØµØ±ÙˆÙØ§Øª Ø®Ù„Ø§Ù„ 6 Ø£Ø´Ù‡Ø±",
  "detailed_comparison": "Ù…Ù‚Ø§Ø±Ù†Ø© Ù…ÙØµÙ„Ø© Ù„ÙƒÙ„ Ø´Ù‡Ø±",
  "no_analysis_data": "Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª ÙƒØ§ÙÙŠØ© Ù„Ù„ØªØ­Ù„ÙŠÙ„",
  "add_transactions_for_analysis": "Ø£Ø¶Ù Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ù„ØªØ±Ù‰ Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø´Ù‡Ø±ÙŠ",
  "filter_amount_range": "Ù†Ø·Ø§Ù‚ Ø§Ù„Ù…Ø¨Ù„Øº",
  "filter_search_hint": "Ø§Ø¨Ø­Ø« Ø¨Ø§Ù„ÙˆØµÙ Ø£Ùˆ Ø§Ù„ÙØ¦Ø©...",
  "month": "Ø§Ù„Ø´Ù‡Ø±",
  "income_header": "Ø§Ù„Ø¯Ø®Ù„",
  "expense_header": "Ø§Ù„Ù…ØµØ±ÙˆÙ",
  "balance_header": "Ø§Ù„Ø±ØµÙŠØ¯",
  "transactions_header": "Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª",
  "total_transactions_stat": "Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª",
  "net_period": "ØµØ§ÙÙŠ Ø§Ù„ÙØªØ±Ø©",
  "financial_goals": "Ø§Ù„Ø£Ù‡Ø¯Ø§Ù Ø§Ù„Ù…Ø§Ù„ÙŠØ©",
  "add_goal": "Ø¥Ø¶Ø§ÙØ© Ù‡Ø¯Ù",
  "goal_stats": "Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø£Ù‡Ø¯Ø§Ù",
  "no_goals_yet": "Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£Ù‡Ø¯Ø§Ù Ø­ØªÙ‰ Ø§Ù„Ø¢Ù†",
  "start_by_adding_your_first_goal": "Ø§Ø¨Ø¯Ø£ Ø¨Ø¥Ø¶Ø§ÙØ© Ø£ÙˆÙ„ Ù‡Ø¯Ù Ù…Ø§Ù„ÙŠ Ù„Ùƒ",
  "create_first_goal": "Ø¥Ù†Ø´Ø§Ø¡ Ø£ÙˆÙ„ Ù‡Ø¯Ù",
  "total_goals": "Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø£Ù‡Ø¯Ø§Ù",
  "total_saved": "Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¯Ø®Ø±Ø§Øª",
  "progress": "Ø§Ù„ØªÙ‚Ø¯Ù…",
  "active_goals": "Ø§Ù„Ø£Ù‡Ø¯Ø§Ù Ø§Ù„Ù†Ø´Ø·Ø©",
  "completed_goals": "Ø§Ù„Ø£Ù‡Ø¯Ø§Ù Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø©",
  "days_left": "ÙŠÙˆÙ… Ù…ØªØ¨Ù‚ÙŠ",
  "low": "Ù…Ù†Ø®ÙØ¶",
  "medium": "Ù…ØªÙˆØ³Ø·",
  "high": "Ù…Ø±ØªÙØ¹",
  "critical": "Ø­Ø±Ø¬",
  "add_new_goal": "Ø¥Ø¶Ø§ÙØ© Ù‡Ø¯Ù Ø¬Ø¯ÙŠØ¯",
  "goal_title": "Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù‡Ø¯Ù",
  "goal_description": "Ø§Ù„ÙˆØµÙ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)",
  "target_amount": "Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø³ØªÙ‡Ø¯Ù",
  "current_amount": "Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ø­Ø§Ù„ÙŠ",
  "start_date": "ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨Ø¯Ø¡",
  "target_date": "ØªØ§Ø±ÙŠØ® Ø§Ù„Ù‡Ø¯Ù",
  "select_category": "Ø§Ø®ØªØ± Ø§Ù„ÙØ¦Ø©",
  "priority": "Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©",
  "select_color": "Ø§Ø®ØªØ± Ø§Ù„Ù„ÙˆÙ†",
  "save_goal": "Ø­ÙØ¸ Ø§Ù„Ù‡Ø¯Ù",
  "update_goal": "ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù‡Ø¯Ù",
  "delete_goal": "Ø­Ø°Ù Ø§Ù„Ù‡Ø¯Ù",
  "confirm_delete_goal": "Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù‡Ø¯ÙØŸ",
  "goal_details": "ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù‡Ø¯Ù",
  "add_contribution": "Ø¥Ø¶Ø§ÙØ© Ù…Ø³Ø§Ù‡Ù…Ø©",
  "contribution_amount": "Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø³Ø§Ù‡Ù…Ø©",
  "contribution_note": "Ù…Ù„Ø§Ø­Ø¸Ø© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)",
  "save_contribution": "Ø­ÙØ¸ Ø§Ù„Ù…Ø³Ø§Ù‡Ù…Ø©",
  "contributions_history": "Ø³Ø¬Ù„ Ø§Ù„Ù…Ø³Ø§Ù‡Ù…Ø§Øª",
  "no_contributions": "Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø³Ø§Ù‡Ù…Ø§Øª Ø­ØªÙ‰ Ø§Ù„Ø¢Ù†",
  "daily_saving_needed": "Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ ÙŠÙˆÙ…ÙŠØ§Ù‹",
  "remaining_amount": "Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ",
  "achieved_on": "ØªÙ… Ø§Ù„ØªØ­Ù‚ÙŠÙ‚ ÙÙŠ",
  "goal_completed": "ØªÙ… Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„Ù‡Ø¯Ù!",
  "congratulations": "Ù…Ø¨Ø±ÙˆÙƒ!",
  "add_more": "Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø²ÙŠØ¯",
  "edit_goal": "ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù‡Ø¯Ù",
  "delete": "Ø­Ø°Ù",
  "enter_goal_title": "ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù‡Ø¯Ù",
  "enter_target_amount": "ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø³ØªÙ‡Ø¯Ù",
  "enter_current_amount": "ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ø­Ø§Ù„ÙŠ",
  "enter_valid_amount": "ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ù…Ø¨Ù„Øº ØµØ­ÙŠØ­",
  "current_cannot_exceed_target": "Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ø­Ø§Ù„ÙŠ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø£Ù† ÙŠØªØ¬Ø§ÙˆØ² Ø§Ù„Ù…Ø³ØªÙ‡Ø¯Ù",
  "delete_goal_question": "Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù‡Ø¯ÙØŸ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø³Ø§Ù‡Ù…Ø§Øª Ø³ØªÙÙ‚Ø¯.",
  "goal_saved_success": "ØªÙ… Ø­ÙØ¸ Ø§Ù„Ù‡Ø¯Ù Ø¨Ù†Ø¬Ø§Ø­",
  "goal_updated_success": "ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù‡Ø¯Ù Ø¨Ù†Ø¬Ø§Ø­",
  "goal_deleted_success": "ØªÙ… Ø­Ø°Ù Ø§Ù„Ù‡Ø¯Ù Ø¨Ù†Ø¬Ø§Ø­",
  "goal_not_found": "Ø§Ù„Ù‡Ø¯Ù ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯",
  "enter_amount": "ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ù…Ø¨Ù„Øº",
  "contribution_details": "ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ø³Ø§Ù‡Ù…Ø©",
  "target": "Ø§Ù„Ù…Ø³ØªÙ‡Ø¯Ù",
  "duration": "Ø§Ù„Ù…Ø¯Ø©",
  "days": "ÙŠÙˆÙ…",
  "total_contributions": "Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø³Ø§Ù‡Ù…Ø§Øª",
  "contributions": "Ù…Ø³Ø§Ù‡Ù…Ø©",
  "add_your_first_contribution": "Ø£Ø¶Ù Ø£ÙˆÙ„ Ù…Ø³Ø§Ù‡Ù…Ø© Ù„Ùƒ Ù„ØªØªØ¨Ø¹ ØªÙ‚Ø¯Ù…Ùƒ",
  "goal_statistics": "Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø£Ù‡Ø¯Ø§Ù",
  "no_goals_for_stats": "Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£Ù‡Ø¯Ø§Ù Ù„Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª",
  "add_goals_to_see_statistics": "Ø£Ø¶Ù Ø£Ù‡Ø¯Ø§ÙØ§Ù‹ Ù„ØªØ±Ù‰ Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ù…ÙØµÙ„Ø©",
  "back_to_goals": "Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø£Ù‡Ø¯Ø§Ù",
  "overall_statistics": "Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø¹Ø§Ù…Ø©",
  "total_target": "Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø³ØªÙ‡Ø¯Ù",
  "overall_progress": "Ø§Ù„ØªÙ‚Ø¯Ù… Ø§Ù„Ø¹Ø§Ù…",
  "upcoming_deadlines": "Ù…ÙˆØ§Ø¹ÙŠØ¯ Ù†Ù‡Ø§Ø¦ÙŠØ© Ù‚Ø±ÙŠØ¨Ø©",
  "distribution_by_category": "Ø§Ù„ØªÙˆØ²ÙŠØ¹ Ø­Ø³Ø¨ Ø§Ù„ÙØ¦Ø©",
  "distribution_by_priority": "Ø§Ù„ØªÙˆØ²ÙŠØ¹ Ø­Ø³Ø¨ Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©",
  "goals": "Ù‡Ø¯Ù",
  "progress_analysis": "ØªØ­Ù„ÙŠÙ„ Ø§Ù„ØªÙ‚Ø¯Ù…",
  "goal": "Ø§Ù„Ù‡Ø¯Ù",
  "daily_needed": "Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ ÙŠÙˆÙ…ÙŠØ§Ù‹",
  "status": "Ø§Ù„Ø­Ø§Ù„Ø©",
  "completed": "Ù…ÙƒØªÙ…Ù„",
  "almost_there": "Ù‚Ø±ÙŠØ¨ Ù…Ù† Ø§Ù„Ø§ÙƒØªÙ…Ø§Ù„",
  "at_risk": "ÙÙŠ Ø®Ø·Ø±",
  "approaching_deadline": "Ù‚Ø±ÙŠØ¨ Ù…Ù† Ø§Ù„Ù…ÙˆØ¹Ø¯",
  "on_track": "Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø³Ø§Ø± Ø§Ù„ØµØ­ÙŠØ­",
  "needs_attention": "ÙŠØ­ØªØ§Ø¬ Ø§Ù‡ØªÙ…Ø§Ù…",
  "just_started": "Ø¨Ø¯Ø£ Ù„Ù„ØªÙˆ",
  "tips_and_recommendations": "Ù†ØµØ§Ø¦Ø­ ÙˆØªÙˆØµÙŠØ§Øª",
  "at_risk_goals": "Ø£Ù‡Ø¯Ø§Ù ÙÙŠ Ø®Ø·Ø±",
  "goals_need_attention": "Ø£Ù‡Ø¯Ø§Ù ØªØ­ØªØ§Ø¬ Ù„Ø§Ù‡ØªÙ…Ø§Ù…Ùƒ",
  "goals_due_soon": "Ø£Ù‡Ø¯Ø§Ù ØªÙ†ØªÙ‡ÙŠ Ø®Ù„Ø§Ù„ 14 ÙŠÙˆÙ…",
  "average_progress": "Ù…ØªÙˆØ³Ø· Ø§Ù„ØªÙ‚Ø¯Ù…",
  "of_all_goals": "Ù…Ù† ÙƒÙ„ Ø§Ù„Ø£Ù‡Ø¯Ø§Ù",
  "per_day": "ÙŠÙˆÙ…ÙŠØ§Ù‹",
  "active": "Ù†Ø´Ø·",
  "more_options": "Ø®ÙŠØ§Ø±Ø§Øª Ø£ÙƒØ«Ø±",
  "theme_changed": "ØªÙ… ØªØºÙŠÙŠØ± Ø§Ù„Ø³Ù…Ø© Ø¨Ù†Ø¬Ø§Ø­",
  "language_changed": "ØªÙ… ØªØºÙŠÙŠØ± Ø§Ù„Ù„ØºØ© Ø¨Ù†Ø¬Ø§Ø­",
  "saveSuccess": "ØªÙ… Ø§Ù„Ø­ÙØ¸ Ø¨Ù†Ø¬Ø§Ø­",
  "clearSuccess": "ØªÙ… Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­",
  "loadDataError": "Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª",
  "invalidAmount": "Ø§Ù„Ù…Ø¨Ù„Øº ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ø£ÙƒØ¨Ø± Ù…Ù† ØµÙØ±",
  "invalidExpense": "Ù…Ø¹Ø§Ù…Ù„Ø© ØºÙŠØ± ØµØ§Ù„Ø­Ø©",
  "duplicateExpense": "ÙŠÙˆØ¬Ø¯ Ù…Ø¹Ø§Ù…Ù„Ø© Ù…Ø´Ø§Ø¨Ù‡Ø© ØªÙ… Ø¥Ø¶Ø§ÙØªÙ‡Ø§ Ù…Ø¤Ø®Ø±Ø§Ù‹",
  "criticalError": "Ø®Ø·Ø£ Ø­Ø±Ø¬",
  "restartApp": "ÙŠØ±Ø¬Ù‰ Ø¥Ø¹Ø§Ø¯Ø© ØªØ´ØºÙŠÙ„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚", 
  "initDataError": "Ø®Ø·Ø£ ÙÙŠ ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª: {e}",
  "otherCategoryDescription": "ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ ÙˆØµÙ Ù„Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª ÙÙŠ Ø§Ù„ÙØ¦Ø© 'Ø£Ø®Ø±Ù‰'",
  "similarTransaction": "Ù…Ø¹Ø§Ù…Ù„Ø© Ù…Ø´Ø§Ø¨Ù‡Ø©",
  "duplicateExpenseQuestion": "ÙŠÙˆØ¬Ø¯ Ù…Ø¹Ø§Ù…Ù„Ø© Ù…Ø´Ø§Ø¨Ù‡Ø© ØªÙ… Ø¥Ø¶Ø§ÙØªÙ‡Ø§ Ù…Ø¤Ø®Ø±Ø§Ù‹. Ù‡Ù„ ØªØ±ÙŠØ¯ Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©ØŸ",
  "proceedAnyway": "Ù†Ø¹Ù…ØŒ Ù…ØªØ§Ø¨Ø¹Ø©",
  "addExpenseFailed": "ÙØ´Ù„ ÙÙŠ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©: {e}",
  "invalidIndex": "ÙÙ‡Ø±Ø³ ØºÙŠØ± ØµØ§Ù„Ø­",
  "updateSuccess": "ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø© Ø¨Ù†Ø¬Ø§Ø­",
  "updateExpenseFailed": "ÙØ´Ù„ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©: {e}",
  "deleteSuccess": "ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø© Ø¨Ù†Ø¬Ø§Ø­",
  "deleteExpenseFailed": "ÙØ´Ù„ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©: {e}",
  "clearAllDataTitle": "Ù…Ø³Ø­ ÙƒÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª",
  "clearAllDataMessage": "Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ù…Ø³Ø­ ÙƒÙ„ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§ØªØŸ\n\nÙ‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡ ÙˆØ³ÙŠØªÙ… Ø­Ø°Ù:\nâ€¢ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª\nâ€¢ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª\nâ€¢ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ§Øª\n\nØªØ£ÙƒØ¯ Ù…Ù† Ø¹Ù…Ù„ Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ø£ÙˆÙ„Ø§Ù‹.",
  "confirmClearAll": "Ù†Ø¹Ù…ØŒ Ù…Ø³Ø­ Ø§Ù„ÙƒÙ„",
  "clearAllSuccess": "ØªÙ… Ù…Ø³Ø­ ÙƒÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­",
  "clearDataFailed": "ÙØ´Ù„ ÙÙŠ Ù…Ø³Ø­ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª: {e}",
  "saveDataError": "Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª: {e}",
  "loadedWithErrors": "ØªÙ… ØªØ­Ù…ÙŠÙ„ {successCount} Ù…Ø¹Ø§Ù…Ù„Ø© Ù…Ø¹ {errorCount} Ø£Ø®Ø·Ø§Ø¡",
  "note": "Ù…Ù„Ø§Ø­Ø¸Ø©",
  "corruptedDataCleared": "ØªÙ… Ø§ÙƒØªØ´Ø§Ù Ø¨ÙŠØ§Ù†Ø§Øª ØªØ§Ù„ÙØ©ØŒ ØªÙ… Ù…Ø³Ø­ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©",
  "alert": "ØªÙ†Ø¨ÙŠÙ‡",
  "loadDataFailedRestart": "ÙØ´Ù„ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§ØªØŒ ÙŠØ±Ø¬Ù‰ Ø¥Ø¹Ø§Ø¯Ø© ØªØ´ØºÙŠÙ„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚"
}
 -----------------------------------

assets/lang/en.json  file: 
{
  "app_title": "Finance App",
  "add_expense": "Add Expense",
  "add_income": "Add Income",
  "add_new_expense": "Add New Expense",
  "add_new_income": "Add New Income",
  "edit_expense": "Edit Expense",
  "budget": "Budget",
  "amount": "Amount",
  "reports": "Reports",
  "alerts": "Alerts",
  "monthly_analysis": "Monthly Analysis",
  "settings": "Settings",
  "language": "Language",
  "income": "Income",
  "expense": "Expense",
  "balance": "Balance",
  "category": "Category",
  "food": "Food",
  "transportation": "Transportation",
  "marketing": "Marketing",
  "entertainment": "Entertainment",
  "health": "Health",
  "learn": "Learn",
  "living": "Living",
  "bills": "Bills",
  "salary": "Salary",
  "investment": "Investment",
  "gifts": "Gifts",
  "others": "Others",
  "date": "Date",
  "description": "Description (optional)",
  "save_transaction": "Save Transaction",
  "payment_method": "Payment Method",
  "cash": "Cash",
  "credit_card": "Credit Card",
  "bank_transfer": "Bank Transfer",
  "e_wallet": "E-Wallet",
  "cheque": "Cheque",
  "edit_income": "Edit Income",
  "save_changes": "Save Changes",
  "delete_transaction": "Delete Transaction",
  "delete_transaction_question": "Do you want to delete this transaction?",
  "enter_valid_number": "Enter a valid number",
  "cancel": "Cancel",
  "confirm_delete": "Confirm Delete",
  "recent_transactions": "Recent Transactions",
  "search_results": "Search Results",
  "search_transactions": "Search Transactions",
  "add_new": "Add New",
  "currency_suffix": "EGP",
  "all": "All",
  "set_budget": "Set Budget",
  "max_limit": "Maximum Limit",
  "remaining": "Remaining",
  "spent": "Spent",
  "total_income": "Total Income",
  "total_expense": "Total Expense",
  "monthly_report": "Monthly Report",
  "yearly_report": "Yearly Report",
  "filter": "Filter",
  "apply_filters": "Apply Filters",
  "clear_filters": "Clear Filters",
  "advanced_filter": "Advanced Filter",
  "applied_filters": "Applied Filters",
  "add_alert": "Add Alert",
  "delete_alert": "Delete Alert",
  "alert_message": "Alert Message",
  "alert_time": "Alert Time",
  "backup": "Backup",
  "restore": "Restore",
  "confirm_restore": "Confirm Restore",
  "backup_success": "Backup completed successfully",
  "restore_success": "Restore completed successfully",
  "budget_saved_success": "Budget saved successfully",
  "budget_exceeded": "You have exceeded your budget",
  "save": "Save",
  "yes": "Yes",
  "no": "No",
  "light_mode": "Light Mode",
  "dark_mode": "Dark Mode",
  "clear_all_data": "Clear All Data",
  "confirm_clear_all": "Are you sure you want to clear all data?",
  "of": "of",
  "transactions": "transactions",
  "no_transactions": "No transactions yet",
  "start_first_transaction": "Start by adding your first transaction",
  "no_search_results": "No search results",
  "search": "Search",
  "clear_all_filters": "Clear All Filters",
  "transaction_details": "Transaction Details",
  "type": "Type",
  "close": "Close",
  "error": "Error",
  "transaction_not_found": "Transaction not found",
  "deleted": "Deleted",
  "transaction_deleted_success": "Transaction deleted successfully",
  "duplicated": "Duplicated",
  "transaction_duplicated_success": "Transaction duplicated successfully",
  "duplicate_failed": "Failed to duplicate transaction",
  "manage_budget": "Manage Budget",
  "budget_summary": "Budget Summary",
  "monthly_budget": "Monthly Budget",
  "amount_with_currency": "Amount (EGP)",
  "spent_percentage": "Spent {value}% of the budget",
  "category_budget": "Category Budget",
  "set_category_budget": "Set a budget for each expense category",
  "notes": "Notes",
  "note_budget_control": "â€¢ Budget helps you control your spending",
  "note_budget_alert": "â€¢ You will be alerted when you approach your budget limit",
  "note_budget_edit": "â€¢ You can edit the budget anytime",
  "show_summary": "Show Summary",
  "reset": "Reset",
  "ok": "OK",
  "saved": "Saved",
  "monthly_budget_updated": "Monthly budget updated",
  "category_budget_updated": "Category budget updated",
  "no_reports": "No reports available",
  "no_data": "No data to display",
  "statistics": "Statistics",
  "monthly_balance": "Monthly Balance",
  "income_distribution": "Income Distribution",
  "expense_distribution": "Expense Distribution",
  "additional_stats": "Additional Statistics",
  "total_transactions": "Total Transactions",
  "current_balance": "Current Balance",
  "export_data": "Export Data",
  "save_copy": "Save a copy of all transactions",
  "compare_previous_months": "Compare previous months",
  "no_transactions_to_export": "No transactions to export",
  "export_success": "Export successful",
  "export_file_saved": "Export file saved successfully",
  "export_error": "Export error",
  "export_failed": "An error occurred during export: $e",
  "january": "January",
  "february": "February",
  "march": "March",
  "april": "April",
  "may": "May",
  "june": "June",
  "july": "July",
  "august": "August",
  "september": "September",
  "october": "October",
  "november": "November",
  "december": "December",
  "budget_alerts": "Budget Alerts",
  "budget_alert_threshold": "Alert when reaching {value}% of budget",
  "large_expense_alert": "Large Expense Alert",
  "large_expense_alert_threshold": "Alert when spending more than {value} {currency}",
  "daily_summary": "Daily Summary",
  "daily_summary_desc": "Show daily summary of income and expenses",
  "test_alerts": "Test Alerts",
  "min": "MIN",
  "max": "MAX",
  "found": "Found {filtered} out of {total}",
  "actions": "Actions",
  "create_backup": "Create Full Backup",
  "restore_backup_desc": "Load data from backup file",
  "important_tips": "ğŸ’¡ Important Tips",
  "tip_weekly_backup": "Create weekly backups",
  "tip_save_location": "Save backup files in a safe place",
  "tip_dont_share": "Don't share backup files with others",
  "tip_cross_device": "You can restore on any device",
  "backup_stats": "Backup Statistics",
  "backup_files": "Backup Files",
  "last_backup": "Last Backup",
  "security_note": "Important Security Note",
  "security_note_desc": "Your data is stored locally on your device and is not uploaded anywhere. Make sure to save backup files in a safe place.",
  "advanced_options": "Advanced Options",
  "clear_backup_history": "Clear Backup History",
  "clear_backup_history_desc": "Delete last backup information",
  "system_info": "System Information",
  "system_info_desc": "View data storage details",
  "local_storage": "Local Data Storage",
  "storage_getstorage": "App uses GetStorage for local storage",
  "storage_encryption": "Data is encrypted using AES-256",
  "storage_temp_files": "Temporary files are stored in app folder",
  "compatibility": "Compatibility",
  "compat_android_ios": "Supports Android and iOS",
  "compat_restore_any": "Can restore on any device",
  "compat_data_format": "Data format: JSON",
  "monthly_analysis_comparison": "Monthly analysis - months comparison",
  "monthly_comparison": "Income vs Expenses Comparison - 6 Months",
  "detailed_comparison": "Detailed Monthly Comparison",
  "no_analysis_data": "Not enough data for analysis",
  "add_transactions_for_analysis": "Add transactions to see monthly analysis",
  "filter_amount_range": "Amount Range",
  "filter_search_hint": "Search by description or category...",
  "month": "Month",
  "income_header": "Income",
  "expense_header": "Expense",
  "balance_header": "Balance",
  "transactions_header": "Transactions",
  "total_transactions_stat": "Total Transactions",
  "net_period": "Net Period",
  "financial_goals": "Financial Goals",
  "add_goal": "Add Goal",
  "goal_stats": "Goal Statistics",
  "no_goals_yet": "No goals yet",
  "start_by_adding_your_first_goal": "Start by adding your first financial goal",
  "create_first_goal": "Create First Goal",
  "total_goals": "Total Goals",
  "total_saved": "Total Saved",
  "progress": "Progress",
  "active_goals": "Active Goals",
  "completed_goals": "Completed Goals",
  "days_left": "days left",
  "low": "Low",
  "medium": "Medium",
  "high": "High",
  "critical": "Critical",
  "add_new_goal": "Add New Goal",
  "goal_title": "Goal Title",
  "goal_description": "Description (optional)",
  "target_amount": "Target Amount",
  "current_amount": "Current Amount",
  "start_date": "Start Date",
  "target_date": "Target Date",
  "select_category": "Select Category",
  "priority": "Priority",
  "select_color": "Select Color",
  "save_goal": "Save Goal",
  "update_goal": "Update Goal",
  "delete_goal": "Delete Goal",
  "confirm_delete_goal": "Are you sure you want to delete this goal?",
  "goal_details": "Goal Details",
  "add_contribution": "Add Contribution",
  "contribution_amount": "Contribution Amount",
  "contribution_note": "Note (optional)",
  "save_contribution": "Save Contribution",
  "contributions_history": "Contributions History",
  "no_contributions": "No contributions yet",
  "daily_saving_needed": "Daily saving needed",
  "remaining_amount": "Remaining Amount",
  "achieved_on": "Achieved on",
  "goal_completed": "Goal Completed!",
  "congratulations": "Congratulations!",
  "add_more": "Add More",
  "edit_goal": "Edit Goal",
  "delete": "Delete",
  "enter_goal_title": "Please enter goal title",
  "enter_target_amount": "Please enter target amount",
  "enter_current_amount": "Please enter current amount",
  "enter_valid_amount": "Please enter a valid amount",
  "current_cannot_exceed_target": "Current amount cannot exceed target amount",
  "delete_goal_question": "Are you sure you want to delete this goal? All contributions will be lost.",
  "goal_saved_success": "Goal saved successfully",
  "goal_updated_success": "Goal updated successfully",
  "goal_deleted_success": "Goal deleted successfully",
  "goal_not_found": "Goal not found",
  "enter_amount": "Please enter amount",
  "contribution_details": "Contribution Details",
  "target": "Target",
  "duration": "Duration",
  "days": "days",
  "total_contributions": "Total Contributions",
  "contributions": "contributions",
  "add_your_first_contribution": "Add your first contribution to track your progress",
  "goal_statistics": "Goal Statistics",
  "no_goals_for_stats": "No goals for statistics",
  "add_goals_to_see_statistics": "Add goals to see detailed statistics",
  "back_to_goals": "Back to Goals",
  "overall_statistics": "Overall Statistics",
  "total_target": "Total Target",
  "overall_progress": "Overall Progress",
  "upcoming_deadlines": "upcoming deadlines",
  "distribution_by_category": "Distribution by Category",
  "distribution_by_priority": "Distribution by Priority",
  "goals": "goals",
  "progress_analysis": "Progress Analysis",
  "goal": "Goal",
  "daily_needed": "Daily Needed",
  "status": "Status",
  "completed": "Completed",
  "almost_there": "Almost There",
  "at_risk": "At Risk",
  "approaching_deadline": "Approaching",
  "on_track": "On Track",
  "needs_attention": "Needs Attention",
  "just_started": "Just Started",
  "tips_and_recommendations": "Tips & Recommendations",
  "at_risk_goals": "Goals at Risk",
  "goals_need_attention": "goals need your attention",
  "goals_due_soon": "goals due within 14 days",
  "average_progress": "Average Progress",
  "of_all_goals": "of all goals",
  "per_day": "per day",
  "active": "active",
  "more_options": "More Options",
  "theme_changed": "Theme changed successfully",
  "language_changed": "Language changed successfully",
  "saveSuccess": "Saved successfully",
  "clearSuccess": "All data cleared successfully",
  "loadDataError": "Error loading data",
  "invalidAmount": "Amount must be greater than zero",
  "invalidExpense": "Invalid transaction",
  "duplicateExpense": "Similar transaction was added recently",
  "criticalError": "Critical error",
  "restartApp": "Please restart the app",
  "initDataError": "Error initializing data: {e}",
  "otherCategoryDescription": "Please enter a description for transactions in the 'Other' category",
  "similarTransaction": "Similar Transaction",
  "duplicateExpenseQuestion": "A similar transaction was added recently. Do you want to proceed?",
  "proceedAnyway": "Yes, proceed anyway",
  "addExpenseFailed": "Failed to add transaction: {e}",
  "invalidIndex": "Invalid index",
  "updateSuccess": "Transaction updated successfully",
  "updateExpenseFailed": "Failed to update transaction: {e}",
  "deleteSuccess": "Transaction deleted successfully",
  "deleteExpenseFailed": "Failed to delete transaction: {e}",
  "clearAllDataTitle": "Clear All Data",
  "clearAllDataMessage": "Are you sure you want to clear all transactions?\n\nThis action cannot be undone and will delete:\nâ€¢ All transactions\nâ€¢ All statistics\nâ€¢ All budgets\n\nMake sure to backup first.",
  "confirmClearAll": "Yes, clear all",
  "clearAllSuccess": "All data cleared successfully",
  "clearDataFailed": "Failed to clear data: {e}",
  "saveDataError": "Error saving data: {e}",
  "loadedWithErrors": "Loaded {successCount} transactions with {errorCount} errors",
  "note": "Note",
  "corruptedDataCleared": "Corrupted data detected, old data cleared",
  "alert": "Alert",
  "loadDataFailedRestart": "Failed to load data, please restart the app"
}


  